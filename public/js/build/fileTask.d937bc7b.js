import{_ as o}from"./openpgp_hi.15f91b1d.js";import{I as l}from"./IFrame.7786c4f7.js";import{n as a}from"./app.30a8687c.js";import"./@micro-zoe.c2e1472d.js";import"./jquery.5fefb7d5.js";import"./@babel.f9bcab46.js";import"./dayjs.dd4b2d82.js";import"./localforage.4b3d3970.js";import"./markdown-it.bda97caf.js";import"./mdurl.ce6c1dd8.js";import"./uc.micro.8d343c98.js";import"./entities.48a44fec.js";import"./linkify-it.c5e8196e.js";import"./punycode.js.4b3f125a.js";import"./highlight.js.ab8aeea4.js";import"./markdown-it-link-attributes.e1d5d151.js";import"./@traptitech.897ae552.js";import"./vue.fd9b772e.js";import"./vuex.cc7cb26e.js";import"./axios.6ec123f8.js";import"./mitt.1ea0a2a3.js";import"./vue-router.2d566cd7.js";import"./vue-clipboard2.50be9c5e.js";import"./clipboard.058ef547.js";import"./view-design-hi.5e48072b.js";import"./vuedraggable.9fd6afed.js";import"./sortablejs.d74243d9.js";import"./vue-resize-observer.c3c9ca4e.js";import"./element-sea.7f208f9b.js";import"./deepmerge.cecf392e.js";import"./resize-observer-polyfill.0bdc1850.js";import"./throttle-debounce.7c3948b2.js";import"./babel-helper-vue-jsx-merge-props.5ed215c3.js";import"./normalize-wheel.2a034b9f.js";import"./async-validator.49abba38.js";import"./babel-runtime.4773988a.js";import"./core-js.314b4a1d.js";import"./lodash.18c5398d.js";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"single-file-task"},[e("PageTitle",{attrs:{title:t.title}}),t.loadIng>0?e("Loading"):t.isWait?t._e():[t.isType("md")?e("VMPreview",{attrs:{value:t.fileDetail.content.content}}):t.isType("text")?e("TEditor",{attrs:{value:t.fileDetail.content.content,height:"100%",readOnly:""}}):t.isType("drawio")?e("Drawio",{attrs:{title:t.fileDetail.name,readOnly:""},model:{value:t.fileDetail.content,callback:function(r){t.$set(t.fileDetail,"content",r)},expression:"fileDetail.content"}}):t.isType("mind")?e("Minder",{attrs:{value:t.fileDetail.content,readOnly:""}}):t.isType("code")?e("AceEditor",{staticClass:"view-editor",attrs:{ext:t.fileDetail.ext,readOnly:""},model:{value:t.fileDetail.content.content,callback:function(r){t.$set(t.fileDetail.content,"content",r)},expression:"fileDetail.content.content"}}):t.isType("office")?e("OnlyOffice",{attrs:{code:t.officeCode,documentKey:t.documentKey,readOnly:""},model:{value:t.officeContent,callback:function(r){t.officeContent=r},expression:"officeContent"}}):t.isType("preview")?e("IFrame",{staticClass:"preview-iframe",attrs:{src:t.previewUrl}}):e("div",{staticClass:"no-support"},[t._v(t._s(t.$L("\u4E0D\u652F\u6301\u5355\u72EC\u67E5\u770B\u6B64\u6D88\u606F")))])]],2)},c=[];const m=()=>o(()=>import("./preview.cb2a7514.js"),["js/build/preview.cb2a7514.js","js/build/openpgp_hi.15f91b1d.js","js/build/index.40a8e116.js","js/build/app.30a8687c.js","js/build/app.f6489fe9.css","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.5fefb7d5.js","js/build/@babel.f9bcab46.js","js/build/dayjs.dd4b2d82.js","js/build/localforage.4b3d3970.js","js/build/markdown-it.bda97caf.js","js/build/mdurl.ce6c1dd8.js","js/build/uc.micro.8d343c98.js","js/build/entities.48a44fec.js","js/build/linkify-it.c5e8196e.js","js/build/punycode.js.4b3f125a.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.897ae552.js","js/build/vue.fd9b772e.js","js/build/vuex.cc7cb26e.js","js/build/axios.6ec123f8.js","js/build/mitt.1ea0a2a3.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.50be9c5e.js","js/build/clipboard.058ef547.js","js/build/view-design-hi.5e48072b.js","js/build/vuedraggable.9fd6afed.js","js/build/sortablejs.d74243d9.js","js/build/vue-resize-observer.c3c9ca4e.js","js/build/element-sea.7f208f9b.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.0bdc1850.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.49abba38.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js","js/build/lodash.18c5398d.js"]),p=()=>o(()=>import("./TEditor.a8450861.js"),["js/build/TEditor.a8450861.js","js/build/tinymce.24840f82.js","js/build/@babel.f9bcab46.js","js/build/ImgUpload.8aa01baf.js","js/build/app.30a8687c.js","js/build/app.f6489fe9.css","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.5fefb7d5.js","js/build/dayjs.dd4b2d82.js","js/build/localforage.4b3d3970.js","js/build/markdown-it.bda97caf.js","js/build/mdurl.ce6c1dd8.js","js/build/uc.micro.8d343c98.js","js/build/entities.48a44fec.js","js/build/linkify-it.c5e8196e.js","js/build/punycode.js.4b3f125a.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.897ae552.js","js/build/vue.fd9b772e.js","js/build/vuex.cc7cb26e.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/mitt.1ea0a2a3.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.50be9c5e.js","js/build/clipboard.058ef547.js","js/build/view-design-hi.5e48072b.js","js/build/vuedraggable.9fd6afed.js","js/build/sortablejs.d74243d9.js","js/build/vue-resize-observer.c3c9ca4e.js","js/build/element-sea.7f208f9b.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.0bdc1850.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.49abba38.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js","js/build/lodash.18c5398d.js"]),d=()=>o(()=>import("./AceEditor.f431591f.js"),["js/build/AceEditor.f431591f.js","js/build/vuex.cc7cb26e.js","js/build/app.30a8687c.js","js/build/app.f6489fe9.css","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.5fefb7d5.js","js/build/@babel.f9bcab46.js","js/build/dayjs.dd4b2d82.js","js/build/localforage.4b3d3970.js","js/build/markdown-it.bda97caf.js","js/build/mdurl.ce6c1dd8.js","js/build/uc.micro.8d343c98.js","js/build/entities.48a44fec.js","js/build/linkify-it.c5e8196e.js","js/build/punycode.js.4b3f125a.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.897ae552.js","js/build/vue.fd9b772e.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/mitt.1ea0a2a3.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.50be9c5e.js","js/build/clipboard.058ef547.js","js/build/view-design-hi.5e48072b.js","js/build/vuedraggable.9fd6afed.js","js/build/sortablejs.d74243d9.js","js/build/vue-resize-observer.c3c9ca4e.js","js/build/element-sea.7f208f9b.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.0bdc1850.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.49abba38.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js","js/build/lodash.18c5398d.js"]),f=()=>o(()=>import("./OnlyOffice.eaec2524.js"),["js/build/OnlyOffice.eaec2524.js","js/build/OnlyOffice.3bef70c7.css","js/build/vuex.cc7cb26e.js","js/build/app.30a8687c.js","js/build/app.f6489fe9.css","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.5fefb7d5.js","js/build/@babel.f9bcab46.js","js/build/dayjs.dd4b2d82.js","js/build/localforage.4b3d3970.js","js/build/markdown-it.bda97caf.js","js/build/mdurl.ce6c1dd8.js","js/build/uc.micro.8d343c98.js","js/build/entities.48a44fec.js","js/build/linkify-it.c5e8196e.js","js/build/punycode.js.4b3f125a.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.897ae552.js","js/build/vue.fd9b772e.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/mitt.1ea0a2a3.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.50be9c5e.js","js/build/clipboard.058ef547.js","js/build/view-design-hi.5e48072b.js","js/build/vuedraggable.9fd6afed.js","js/build/sortablejs.d74243d9.js","js/build/vue-resize-observer.c3c9ca4e.js","js/build/element-sea.7f208f9b.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.0bdc1850.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.49abba38.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js","js/build/lodash.18c5398d.js"]),_=()=>o(()=>import("./Drawio.4657eb85.js"),["js/build/Drawio.4657eb85.js","js/build/Drawio.6a04e353.css","js/build/vuex.cc7cb26e.js","js/build/IFrame.7786c4f7.js","js/build/app.30a8687c.js","js/build/app.f6489fe9.css","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.5fefb7d5.js","js/build/@babel.f9bcab46.js","js/build/dayjs.dd4b2d82.js","js/build/localforage.4b3d3970.js","js/build/markdown-it.bda97caf.js","js/build/mdurl.ce6c1dd8.js","js/build/uc.micro.8d343c98.js","js/build/entities.48a44fec.js","js/build/linkify-it.c5e8196e.js","js/build/punycode.js.4b3f125a.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.897ae552.js","js/build/vue.fd9b772e.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/mitt.1ea0a2a3.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.50be9c5e.js","js/build/clipboard.058ef547.js","js/build/view-design-hi.5e48072b.js","js/build/vuedraggable.9fd6afed.js","js/build/sortablejs.d74243d9.js","js/build/vue-resize-observer.c3c9ca4e.js","js/build/element-sea.7f208f9b.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.0bdc1850.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.49abba38.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js","js/build/lodash.18c5398d.js"]),u=()=>o(()=>import("./Minder.e792cb1b.js"),["js/build/Minder.e792cb1b.js","js/build/Minder.b3680370.css","js/build/IFrame.7786c4f7.js","js/build/app.30a8687c.js","js/build/app.f6489fe9.css","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.5fefb7d5.js","js/build/@babel.f9bcab46.js","js/build/dayjs.dd4b2d82.js","js/build/localforage.4b3d3970.js","js/build/markdown-it.bda97caf.js","js/build/mdurl.ce6c1dd8.js","js/build/uc.micro.8d343c98.js","js/build/entities.48a44fec.js","js/build/linkify-it.c5e8196e.js","js/build/punycode.js.4b3f125a.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.897ae552.js","js/build/vue.fd9b772e.js","js/build/vuex.cc7cb26e.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/mitt.1ea0a2a3.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.50be9c5e.js","js/build/clipboard.058ef547.js","js/build/view-design-hi.5e48072b.js","js/build/vuedraggable.9fd6afed.js","js/build/sortablejs.d74243d9.js","js/build/vue-resize-observer.c3c9ca4e.js","js/build/element-sea.7f208f9b.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.0bdc1850.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.49abba38.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js","js/build/lodash.18c5398d.js"]),v={components:{IFrame:l,AceEditor:d,TEditor:p,VMPreview:m,OnlyOffice:f,Drawio:_,Minder:u},data(){return{loadIng:0,isWait:!1,fileDetail:{}}},mounted(){},watch:{$route:{handler(){this.getInfo()},immediate:!0}},computed:{fileId(){const{fileId:t}=this.$route.params;return parseInt(/^\d+$/.test(t)?t:0)},title(){const{name:t}=this.fileDetail;return t||"Loading..."},isType(){const{fileDetail:t}=this;return function(i){return t.file_mode==i}},officeContent(){return{id:this.fileDetail.id||0,type:this.fileDetail.ext,name:this.title}},officeCode(){return"taskFile_"+this.fileDetail.id},previewUrl(){const{name:t,key:i}=this.fileDetail.content;return $A.onlinePreviewUrl(t,i)}},methods:{getInfo(){this.fileId<=0||(setTimeout(t=>{this.loadIng++},600),this.isWait=!0,this.$store.dispatch("call",{url:"project/task/filedetail",data:{file_id:this.fileId}}).then(({data:t})=>{this.fileDetail=t}).catch(({msg:t})=>{$A.modalError({content:t,onOk:()=>{this.$Electron&&window.close()}})}).finally(t=>{this.loadIng--,this.isWait=!1}))},documentKey(){return new Promise((t,i)=>{this.$store.dispatch("call",{url:"project/task/filedetail",data:{file_id:this.fileId,only_update_at:"yes"}}).then(({data:e})=>{t(`${e.id}-${$A.dayjs(e.update_at).unix()}`)}).catch(e=>{i(e)})})}}},n={};var h=a(v,s,c,!1,y,null,null,null);function y(t){for(let i in n)this[i]=n[i]}var ot=function(){return h.exports}();export{ot as default};

import{m as u,a as g}from"./vuex.cc7cb26e.js";import{l as V}from"./lodash.18c5398d.js";import{D as F}from"./vuedraggable.9fd6afed.js";import{b as O,T as U,a as R,P as H}from"./add.16a099a6.js";import{n as x,T as z,e as v,g as K,U as W}from"./app.c1662089.js";import{D as G}from"./index.41ac2cef.js";import{n as Y}from"./index.d4db92a7.js";import{U as J}from"./tip.aadcd63a.js";import{D as X}from"./DialogWrapper.f49dddcb.js";import{l as q}from"./longpress.6c9d7403.js";import"./@babel.f9bcab46.js";import"./sortablejs.d74243d9.js";import"./@micro-zoe.c2e1472d.js";import"./jquery.27137903.js";import"./dayjs.962ed2d8.js";import"./localforage.d38c5478.js";import"./markdown-it.bda97caf.js";import"./mdurl.ce6c1dd8.js";import"./uc.micro.8d343c98.js";import"./entities.48a44fec.js";import"./linkify-it.c5e8196e.js";import"./punycode.js.4b3f125a.js";import"./highlight.js.ab8aeea4.js";import"./markdown-it-link-attributes.e1d5d151.js";import"./@traptitech.897ae552.js";import"./vue.fd9b772e.js";import"./openpgp_hi.15f91b1d.js";import"./axios.6ec123f8.js";import"./mitt.1ea0a2a3.js";import"./vue-router.2d566cd7.js";import"./vue-clipboard2.50be9c5e.js";import"./clipboard.058ef547.js";import"./view-design-hi.0cb8d723.js";import"./vue-resize-observer.c3c9ca4e.js";import"./element-sea.7f208f9b.js";import"./deepmerge.cecf392e.js";import"./resize-observer-polyfill.0bdc1850.js";import"./throttle-debounce.7c3948b2.js";import"./babel-helper-vue-jsx-merge-props.5ed215c3.js";import"./normalize-wheel.2a034b9f.js";import"./async-validator.49abba38.js";import"./babel-runtime.4773988a.js";import"./core-js.314b4a1d.js";import"./quill-hi.b7430b13.js";import"./parchment.d5c5924e.js";import"./quill-delta.f1b7ce48.js";import"./fast-diff.f17881f3.js";import"./lodash.clonedeep.e8ef3f14.js";import"./lodash.isequal.d6a986d0.js";import"./eventemitter3.78b735ad.js";import"./lodash-es.df04b444.js";import"./quill-mention-hi.0fc702d1.js";import"./vue-virtual-scroll-list-hi.2c0d691d.js";import"./ImgUpload.d18f92d0.js";var Z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.rowMode?s("Row",{staticClass:"task-add-row"},[s("Col",{class:["row-add",t.active?"active":""],attrs:{span:"12"}},[s("div",{staticClass:"add-input",on:{mouseenter:function(a){t.mouseEnter=!0},mouseleave:function(a){t.mouseEnter=!1}}},[s("Input",{ref:"input",attrs:{type:"textarea",rows:1,autosize:{minRows:1,maxRows:3},maxlength:255,placeholder:t.$L(t.typeName+"\u63CF\u8FF0\uFF0C\u56DE\u8F66\u521B\u5EFA"),enterkeyhint:"done"},on:{"on-focus":function(a){t.onFocus=!0},"on-blur":function(a){t.onFocus=!1},"on-keydown":t.onKeydown},model:{value:t.addData.name,callback:function(a){t.$set(t.addData,"name",a)},expression:"addData.name"}}),t.parentId==0?s("div",{staticClass:"priority"},[s("ul",t._l(t.taskPriority,function(a,n){return s("li",{key:n},[t.active?s("ETooltip",{attrs:{disabled:t.$isEEUiApp||t.windowTouch,content:t.taskPriorityContent(a)}},[s("i",{staticClass:"taskfont",style:{color:a.color},domProps:{innerHTML:t._s(t.addData.p_name==a.name?"&#xe61d;":"&#xe61c;")},on:{click:function(i){return t.choosePriority(a)}}})]):t._e()],1)}),0),s("Icon",{attrs:{type:"md-settings"},on:{click:t.onPriority}})],1):t._e()],1),s("div",{staticClass:"add-btn",on:{click:t.openAdd}},[s("Icon",{staticClass:"add-icon",attrs:{type:"md-add"}}),t._v(t._s(t.$L("\u6DFB\u52A0"+t.typeName))+" ")],1)]),s("Col",{attrs:{span:"3"}}),s("Col",{attrs:{span:"3"}}),s("Col",{attrs:{span:"3"}}),s("Col",{attrs:{span:"3"}})],1):s("div",{class:["task-add-simple",t.active?"active":""],on:{mouseenter:function(a){t.mouseEnter=!0},mouseleave:function(a){t.mouseEnter=!1}}},[s("Input",{ref:"input",attrs:{type:"textarea",rows:2,autosize:{minRows:2,maxRows:3},maxlength:255,placeholder:t.$L(t.typeName+"\u63CF\u8FF0\uFF0C\u56DE\u8F66\u521B\u5EFA"),enterkeyhint:"done"},on:{"on-focus":function(a){t.onFocus=!0},"on-blur":function(a){t.onFocus=!1},"on-keydown":t.onKeydown},model:{value:t.addData.name,callback:function(a){t.$set(t.addData,"name",a)},expression:"addData.name"}}),s("div",{staticClass:"add-placeholder",on:{click:t.openAdd}},[s("Icon",{attrs:{type:"md-add"}}),t._v(t._s(t.$L("\u6DFB\u52A0"+t.typeName))+" ")],1),s("div",{staticClass:"priority"},[s("ul",t._l(t.taskPriority,function(a,n){return s("li",{key:n},[t.active?s("ETooltip",{attrs:{disabled:t.$isEEUiApp||t.windowTouch,content:t.taskPriorityContent(a)}},[s("i",{staticClass:"taskfont",style:{color:a.color},domProps:{innerHTML:t._s(t.addData.p_name==a.name?"&#xe61d;":"&#xe61c;")},on:{click:function(i){return t.choosePriority(a)}}})]):t._e()],1)}),0),s("Icon",{attrs:{type:"md-settings"},on:{click:t.onPriority}})],1)],1)},Q=[];const tt={name:"TaskAddSimple",props:{parentId:{type:Number,default:0},projectId:{type:Number,default:0},columnId:{type:Number,default:0},addTop:{type:Boolean,default:!1},autoActive:{type:Boolean,default:!1},rowMode:{type:Boolean,default:!1}},data(){return{loadIng:0,addData:{name:"",owner:0,column_id:0,times:[],subtasks:[],p_level:0,p_name:"",p_color:"",visibility_appoint:1,visibility_appointor:[]},active:!1,onFocus:!1,mouseEnter:!1}},mounted(){this.autoActive&&this.$nextTick(this.openAdd)},computed:{...u(["taskPriority"]),typeName(){return this.parentId>0?"\u5B50\u4EFB\u52A1":"\u4EFB\u52A1"}},watch:{active(t){t||this.$emit("on-close")},mouseEnter(){this.chackClose()},onFocus(){this.chackClose()}},methods:{getData(){var t;return this.parentId>0?{task_id:this.parentId,name:this.addData.name}:(this.addData.project_id=this.projectId||this.$store.state.projectId,this.addData.column_id=this.columnId||((t=this.$store.state.cacheColumns.find(e=>e.project_id===this.addData.project_id))==null?void 0:t.id)||"",this.addData.owner=[this.userId],this.addData.top=this.addTop?1:0,$A.cloneJSON(this.addData))},openAdd(){if(this.windowPortrait){this.defaultPriority(),this.$emit("on-priority",this.getData()),this.$emit("on-close");return}this.active=!0,this.defaultPriority(),this.$nextTick(()=>{this.$refs.input.resizeTextarea(),this.$refs.input.focus()})},chackClose(){this.mouseEnter||this.onFocus||this.addData.name||(this.active=!1)},onPriority(){this.$emit("on-priority",this.getData()),this.active=!1},onKeydown(t){if(t.keyCode===13){if(t.shiftKey)return;t.preventDefault(),this.onAdd()}},onAdd(){if(!this.addData.name){$A.messageWarning("\u8BF7\u8F93\u5165\u4EFB\u52A1\u63CF\u8FF0");return}if(this.loadIng>0)return;this.loadIng++;let t=this.parentId>0?"taskAddSub":"taskAdd";this.$store.dispatch(t,this.getData()).then(({msg:e})=>{$A.messageSuccess(e),this.active=!1,this.addData={name:"",owner:0,column_id:0,times:[],subtasks:[],p_level:0,p_name:"",p_color:"",visibility_appoint:1,visibility_appointor:[]}}).catch(({msg:e})=>{$A.modalError(e)}).finally(()=>{this.loadIng--})},taskPriorityContent(t){let e=$A.runNum(t.days);return e<=0?t.name+" ("+this.$L("\u65E0\u65F6\u95F4\u9650\u5236")+")":t.name+" ("+e+this.$L("\u5929")+")"},choosePriority(t,e=!0){if($A.runNum(t.days)>0){let s=$A.daytz(),a=s.clone().add($A.runNum(t.days),"day");this.$set(this.addData,"times",$A.newDateString([s,a]))}else this.$set(this.addData,"times",[]);this.$set(this.addData,"p_level",t.priority),this.$set(this.addData,"p_name",t.name),this.$set(this.addData,"p_color",t.color),e&&this.$nextTick(()=>{this.$refs.input.focus()})},defaultPriority(){this.taskPriority.length===0||this.addData.p_name||this.choosePriority(this.taskPriority[0],!1)}}},k={};var et=x(tt,Z,Q,!1,st,null,null,null);function st(t){for(let e in k)this[e]=k[e]}var B=function(){return et.exports}(),at=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task-rows"},[t._l(t.list,function(a,n){return s("div",{key:n,ref:`task_${a.id}`,refInFor:!0,staticClass:"task-item",attrs:{"data-id":`${t.openKey}_${a.id}`}},[s("Row",{staticClass:"task-row",style:t.taskItemStyle(a)},[t.taskItemVisible(`${t.openKey}_${a.id}`)?[a.p_name?s("em",{staticClass:"priority-color",style:{backgroundColor:a.p_color}}):t._e(),s("Col",{class:["row-name",a.complete_at?"complete":""],attrs:{span:"12"}},[a.sub_num>0&&a.sub_top!==!0||a.parent_id===0&&t.fastAddTask?s("Icon",{class:["sub-icon",t.taskOpen[a.id]?"active":""],attrs:{type:"ios-arrow-forward"},on:{click:function(i){return t.getSublist(a)}}}):t._e(),s("TaskMenu",{ref:`taskMenu_${a.id}`,refInFor:!0,attrs:{task:a}}),s("div",{staticClass:"item-title",on:{click:function(i){return t.openTask(a)}}},[a.flow_item_name?s("span",{class:a.flow_item_status,on:{click:function(i){return i.stopPropagation(),t.openMenu(i,a)}}},[t._v(t._s(a.flow_item_name))]):t._e(),a.sub_top===!0?s("span",[t._v(t._s(t.$L("\u5B50\u4EFB\u52A1")))]):t._e(),a.sub_my&&a.sub_my.length>0?s("span",[t._v("+"+t._s(a.sub_my.length))]):t._e(),t._v(" "+t._s(a.name)+" ")]),s("div",{staticClass:"item-icons",on:{click:function(i){return t.openTask(a)}}},[a.desc?s("div",{staticClass:"item-icon"},[s("i",{staticClass:"taskfont"},[t._v("\uE71A")])]):t._e(),a.file_num>0?s("div",{staticClass:"item-icon"},[s("i",{staticClass:"taskfont"},[t._v("\uE71C")]),s("em",[t._v(t._s(a.file_num))])]):t._e(),a.msg_num>0?s("div",{staticClass:"item-icon"},[s("i",{staticClass:"taskfont"},[t._v("\uE71E")]),s("em",[t._v(t._s(a.msg_num))])]):t._e(),a.sub_num>0?s("div",{staticClass:"item-icon",on:{click:function(i){return i.stopPropagation(),t.getSublist(a)}}},[s("i",{staticClass:"taskfont"},[t._v("\uE71F")]),s("em",[t._v(t._s(a.sub_complete)+"/"+t._s(a.sub_num))])]):t._e()])],1),s("Col",{staticClass:"row-column",attrs:{span:"3"}},[s("EDropdown",{attrs:{trigger:"click",size:"small",placement:"bottom",disabled:a.sub_top===!0},on:{command:function(i){return t.dropTask(a,i)}}},[s("div",{staticClass:"task-column"},[t._v(t._s(t.columnName(a.column_id)))]),s("EDropdownMenu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.columnList(a.project_id),function(i){return s("EDropdownItem",{key:i.id,attrs:{command:"column::"+i.id}},[t._v(" "+t._s(i.name)+" ")])}),1)],1)],1),s("Col",{staticClass:"row-priority",attrs:{span:"3"}},[s("EDropdown",{attrs:{trigger:"click",size:"small",placement:"bottom",disabled:a.sub_top===!0},on:{command:function(i){return t.dropTask(a,i)}}},[s("TaskPriority",{attrs:{backgroundColor:a.p_color}},[t._v(t._s(a.p_name||t.$L("\u672A\u8BBE\u7F6E")))]),s("EDropdownMenu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.taskPriority,function(i,o){return s("EDropdownItem",{key:o,attrs:{command:"priority::"+o}},[s("i",{staticClass:"taskfont",style:{color:i.color},domProps:{innerHTML:t._s(i.p_name==i.name?"&#xe61d;":"&#xe61c;")}}),t._v(" "+t._s(i.name)+" ")])}),1)],1)],1),s("Col",{staticClass:"row-user",attrs:{span:"3"}},[s("ul",{on:{click:function(i){return t.openTask(a)}}},[t._l(t.ownerUser(a.task_user),function(i,o){return o<3?s("li",{key:o},[s("UserAvatar",{attrs:{userid:i.userid,size:"32",borderWitdh:2,borderColor:a.color,showName:t.ownerUser(a.task_user).length===1}})],1):t._e()}),t.ownerUser(a.task_user).length===0?s("li",{staticClass:"no-owner"},[s("Button",{attrs:{type:"primary",size:"small"},on:{click:function(i){return i.stopPropagation(),t.openTask(a,!0)}}},[t._v(t._s(t.$L("\u9886\u53D6\u4EFB\u52A1")))])],1):t._e()],2)]),s("Col",{staticClass:"row-time",attrs:{span:"3"}},[!a.complete_at&&a.end_at?s("ETooltip",{class:["task-time",a.today?"today":"",a.overdue?"overdue":""],attrs:{disabled:t.$isEEUiApp||t.windowTouch,"open-delay":600,content:a.end_at}},[s("div",{on:{click:function(i){return t.openTask(a)}}},[t._v(t._s(t.expiresFormat(a.end_at)))])]):t.showCompleteAt&&a.complete_at?s("div",{attrs:{title:a.complete_at}},[t._v(t._s(t.completeAtFormat(a.complete_at)))]):t._e()],1)]:t._e()],2),t.taskOpen[a.id]===!0?s("TaskRow",{attrs:{list:t.subTask(a.id),"parent-id":a.id,"fast-add-task":a.parent_id===0&&t.fastAddTask,"open-key":t.openKey},on:{command:t.dropTask}}):t._e()],1)}),t.fastAddTask||t.parentId>0?s("TaskAddSimple",{attrs:{"parent-id":t.parentId,"row-mode":""},on:{"on-priority":t.onPriority}}):t._e()],2)},nt=[];const it={name:"TaskRow",components:{TaskMenu:z,TaskAddSimple:B,TaskPriority:O},props:{list:{type:Array,default:()=>[]},parentId:{type:Number,default:0},fastAddTask:{type:Boolean,default:!1},openKey:{type:String,default:"default"},showCompleteAt:{type:Boolean,default:!1},taskVisibilitys:{type:Object,default:()=>({})}},data(){return{nowTime:$A.dayjs().unix(),nowInterval:null,taskLoad:{},taskOpen:{}}},mounted(){this.nowInterval=setInterval(()=>{this.nowTime=$A.dayjs().unix()},1e3)},destroyed(){clearInterval(this.nowInterval)},computed:{...u(["cacheTasks","taskPriority","cacheColumns","taskLatestId"]),subTask(){return function(t){return this.cacheTasks.filter(e=>e.archived_at?!1:e.parent_id==t).sort((e,s)=>e.id-s.id)}}},watch:{taskLatestId(t){setTimeout(()=>{$A.scrollIntoAndShake(this.$refs[`task_${t}`])},300)}},methods:{columnName(t){const e=this.cacheColumns.find(({id:s})=>s==t);return e?e.name:""},dropTask(t,e){const s=this.$refs[`taskMenu_${t.id}`];if(!!s){if($A.leftExists(e,"column::")){s[0].updateTask({column_id:$A.leftDelete(e,"column::")});return}if($A.leftExists(e,"priority::")){let a=this.taskPriority[parseInt($A.leftDelete(e,"priority::"))];a&&s[0].updateTask({p_level:a.priority,p_name:a.name,p_color:a.color})}}},onPriority(t){this.$emit("on-priority",t)},getSublist(t){if(t.sub_top===!0){this.openTask(t);return}if(this.taskOpen[t.id]===!0){this.$set(this.taskOpen,t.id,!1);return}this.taskLoad[t.id]!==!0&&(this.$set(this.taskLoad,t.id,!0),this.$store.dispatch("getTaskForParent",t.id).then(()=>{this.$set(this.taskLoad,t.id,!1),this.$set(this.taskOpen,t.id,!0)}).catch(({msg:e})=>{$A.modalError(e),this.$set(this.taskLoad,t.id,!1)}))},columnList(t){return this.cacheColumns.filter(({project_id:e})=>e==t)},openTask(t,e){this.$store.dispatch("openTask",t),e===!0&&setTimeout(()=>{v.emit("receiveTask",!0)},300)},openMenu(t,e){const s=this.$refs[`taskMenu_${e.id}`];s&&s[0].handleClick(t)},ownerUser(t){return t.filter(({owner:e})=>e==1).sort((e,s)=>e.id-s.id)},expiresFormat(t){return $A.countDownFormat(this.nowTime,t)},completeAtFormat(t){let e=$A.dayjs(t);return $A.daytz().year()===e.year()?e.format("MM-DD HH:mm"):e.format("YYYY-MM-DD")},taskItemVisible(t){var e;return this.parentId>0||((e=this.taskVisibilitys[t])==null?void 0:e.visible)},taskItemStyle({id:t,color:e}){var n;const s={};e&&(s.backgroundColor=e,s.borderBottomColor=e);const a=`${this.openKey}_${t}`;return this.taskItemVisible(a)||(s.height=(((n=this.taskVisibilitys[a])==null?void 0:n.height)||49)+"px"),s}}},y={};var ot=x(it,at,nt,!1,rt,null,null,null);function rt(t){for(let e in y)this[e]=y[e]}var lt=function(){return ot.exports}(),ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task-archived"},[s("div",{staticClass:"archived-title"},[t._v(" "+t._s(t.$L("\u5F52\u6863\u7684\u4EFB\u52A1"))+" "),s("div",{staticClass:"title-icon"},[t.loadIng>0?s("Loading"):t._e()],1)]),s("div",{staticClass:"search-container lr"},[s("ul",[s("li",[s("div",{staticClass:"search-label"},[t._v(" "+t._s(t.$L("\u5173\u952E\u8BCD"))+" ")]),s("div",{staticClass:"search-content"},[s("Input",{attrs:{placeholder:t.$L("ID\u3001\u4EFB\u52A1\u540D..."),clearable:""},model:{value:t.keys.name,callback:function(a){t.$set(t.keys,"name",a)},expression:"keys.name"}})],1)]),s("li",{staticClass:"search-button"},[s("Tooltip",{attrs:{theme:"light",placement:"right","transfer-class-name":"search-button-clear",transfer:""}},[s("Button",{attrs:{loading:t.loadIng>0,type:"primary",icon:"ios-search"},on:{click:t.onSearch}},[t._v(t._s(t.$L("\u641C\u7D22")))]),s("div",{attrs:{slot:"content"},slot:"content"},[t.keyIs?s("Button",{attrs:{type:"text"},on:{click:function(a){t.keyIs=!1}}},[t._v(t._s(t.$L("\u53D6\u6D88\u7B5B\u9009")))]):s("Button",{attrs:{loading:t.loadIng>0,type:"text"},on:{click:t.getLists}},[t._v(t._s(t.$L("\u5237\u65B0")))])],1)],1)],1)])]),s("div",{staticClass:"table-page-box"},[s("Table",{attrs:{columns:t.columns,data:t.list,loading:t.loadIng>0,"no-data-text":t.$L(t.noText),stripe:""}}),s("Page",{attrs:{total:t.total,current:t.page,"page-size":t.pageSize,disabled:t.loadIng>0,simple:t.windowPortrait,"page-size-opts":[10,20,30,50,100],"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.setPage,"on-page-size-change":t.setPageSize}})],1)])},xt=[];const dt={name:"TaskArchived",props:{projectId:{type:Number,default:0}},data(){return{loadIng:0,keys:{},keyIs:!1,columns:[{title:"ID",key:"id",width:80,render:(t,{row:e,column:s})=>t("TableAction",{props:{column:s,align:"left"}},[t("div",e.id)])},{title:this.$L("\u4EFB\u52A1\u540D\u79F0"),key:"name",minWidth:200,render:(t,{row:e})=>t("AutoTip",{on:{"on-click":()=>{this.$store.dispatch("openTask",e)}}},e.name)},{title:this.$L("\u5B8C\u6210\u65F6\u95F4"),key:"complete_at",width:168,render:(t,{row:e})=>t("div",{style:{color:e.complete_at?"":"#f00"}},e.complete_at||this.$L("\u672A\u5B8C\u6210"))},{title:this.$L("\u5F52\u6863\u65F6\u95F4"),key:"archived_at",width:168},{title:this.$L("\u5F52\u6863\u4EBA\u5458"),key:"archived_userid",minWidth:100,render:(t,{row:e})=>e.archived_userid?t("UserAvatar",{props:{userid:e.archived_userid,size:24,showName:!0}}):t("Tag",this.$L("\u7CFB\u7EDF\u81EA\u52A8"))},{title:this.$L("\u64CD\u4F5C"),align:"center",width:100,render:(t,e)=>{if(this.cacheTasks.find(a=>a.id==e.row.id&&!a.archived_at))return t("div",{style:{color:"#888"}},this.$L("\u5DF2\u8FD8\u539F"));const s=[t("span",{style:{fontSize:"13px",cursor:"pointer",color:"#84C56A"},on:{click:()=>{this.$store.dispatch("openTask",e.row)}}},this.$L("\u67E5\u770B")),t("Poptip",{props:{title:e.row.__restorePoptipTitle,confirm:!0,transfer:!0,placement:"left",okText:this.$L("\u786E\u5B9A"),cancelText:this.$L("\u53D6\u6D88"),value:e.row.__restorePoptipShow,width:220},style:{marginLeft:"6px",fontSize:"13px",cursor:"pointer",color:"#84C56A"},on:{"on-ok":()=>{this.recovery(e.row)},"on-popper-hide":()=>{e.row.__restorePoptipLoadIng=!1,e.row.__restorePoptipTitle=this.$L("\u4F60\u786E\u5B9A\u8981\u8FD8\u539F\u5F52\u6863\u5417\uFF1F"),e.row.__restorePoptipShow=!1}}},[t("span",{on:{click:a=>{a.stopPropagation(),e.row.__restorePoptipLoadIng=!0,this.$store.dispatch("call",{url:"project/column/one",data:{column_id:e.row.column_id,deleted:"all"}}).then(({data:n})=>{n.deleted_at&&(e.row.__restorePoptipTitle=this.$L("\u68C0\u6D4B\u5230\u6240\u5C5E\u7684\u4EFB\u52A1\u5217\u8868\u5DF2\u88AB\u5220\u9664\uFF0C\u8BE5\u64CD\u4F5C\u5C06\u4F1A\u8FD8\u539F\u4EFB\u52A1\u5217\u8868\uFF0C\u4F60\u786E\u5B9A\u8981\u8FD8\u539F\u5F52\u6863\u5417\uFF1F")),e.row.__restorePoptipShow=!0}).catch(({msg:n})=>{$A.modalError({content:n})}).finally(n=>{e.row.__restorePoptipLoadIng=!1})}}},[e.row.__restorePoptipLoadIng?t("Loading",{style:{width:"26px",height:"15px"}}):this.$L("\u8FD8\u539F")])]),t("Poptip",{props:{title:this.$L("\u4F60\u786E\u5B9A\u8981\u5220\u9664\u4EFB\u52A1\u5417\uFF1F"),confirm:!0,transfer:!0,placement:"left",okText:this.$L("\u786E\u5B9A"),cancelText:this.$L("\u53D6\u6D88")},style:{marginLeft:"6px",fontSize:"13px",cursor:"pointer",color:"#f00"},on:{"on-ok":()=>{this.delete(e.row)}}},this.$L("\u5220\u9664"))];return t("TableAction",{props:{column:e.column}},s)}}],list:[],page:1,pageSize:20,total:0,noText:""}},mounted(){},computed:{...u(["cacheTasks"])},watch:{projectId:{handler(){this.getLists()},immediate:!0},keyIs(t){t||(this.keys={},this.setPage(1))}},methods:{onSearch(){this.page=1,this.getLists()},getLists(){!this.projectId||(this.loadIng++,this.keyIs=$A.objImplode(this.keys)!="",this.$store.dispatch("call",{url:"project/task/lists",data:{keys:this.keys,project_id:this.projectId,parent_id:-1,archived:"yes",sorts:{archived_at:"desc"},page:Math.max(this.page,1),pagesize:Math.max($A.runNum(this.pageSize),10)}}).then(({data:t})=>{this.page=t.current_page,this.total=t.total,this.list=t.data.map(e=>(e.__restorePoptipLoadIng=!1,e.__restorePoptipTitle=this.$L("\u4F60\u786E\u5B9A\u8981\u8FD8\u539F\u5F52\u6863\u5417\uFF1F"),e.__restorePoptipShow=!1,e)),this.noText="\u6CA1\u6709\u76F8\u5173\u7684\u6570\u636E"}).catch(()=>{this.noText="\u6570\u636E\u52A0\u8F7D\u5931\u8D25"}).finally(t=>{this.loadIng--}))},setPage(t){this.page=t,this.getLists()},setPageSize(t){this.page=1,this.pageSize=t,this.getLists()},recovery(t){this.list=this.list.filter(({id:e})=>e!=t.id),this.loadIng++,this.$store.dispatch("archivedTask",{task_id:t.id,type:"recovery"}).then(({msg:e})=>{$A.messageSuccess(e),this.loadIng--,this.getLists(),this.$store.dispatch("openTask",t)}).catch(({msg:e})=>{$A.modalError(e),this.loadIng--,this.getLists()})},delete(t){this.list=this.list.filter(({id:e})=>e!=t.id),this.loadIng++,this.$store.dispatch("removeTask",{task_id:t.id}).then(({msg:e})=>{$A.messageSuccess(e),this.loadIng--,this.getLists()}).catch(({msg:e})=>{$A.modalError(e),this.loadIng--,this.getLists()})}}},w={};var ut=x(dt,ct,xt,!1,ht,null,null,null);function ht(t){for(let e in w)this[e]=w[e]}var mt=function(){return ut.exports}(),pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project-task-template"},[s("div",{staticClass:"header"},[s("div",{staticClass:"title"},[t._v(" "+t._s(t.$L("\u4EFB\u52A1\u6807\u7B7E"))+" "),t.loadIng>0?s("Loading"):t._e()],1),s("div",{staticClass:"actions"},[s("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:function(a){return t.handleAdd(null)}}},[t._v(" "+t._s(t.$L("\u65B0\u5EFA\u6807\u7B7E"))+" ")])],1)]),s("div",{staticClass:"content"},[t.tags.length?s("div",{staticClass:"template-list"},t._l(t.tags,function(a){return s("div",{key:a.id,staticClass:"tag-item"},[s("div",{staticClass:"tag-contents"},[s("div",{staticClass:"tag-title"},[s("Tags",{attrs:{tags:a}})],1),a.desc?s("div",{staticClass:"tag-desc"},[t._v(t._s(a.desc))]):t._e()]),s("div",{staticClass:"tag-actions"},[s("Button",{attrs:{type:"primary"},on:{click:function(n){return t.handleAdd(a)}}},[t._v(" "+t._s(t.$L("\u7F16\u8F91"))+" ")]),s("Button",{attrs:{type:"error"},on:{click:function(n){return t.handleDelete(a)}}},[t._v(" "+t._s(t.$L("\u5220\u9664"))+" ")])],1)])}),0):s("div",{staticClass:"empty"},[s("div",{staticClass:"empty-text"},[t._v(t._s(t.$L("\u5F53\u524D\u9879\u76EE\u6682\u65E0\u4EFB\u52A1\u6807\u7B7E")))]),s("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:function(a){return t.handleAdd(null)}}},[t._v(t._s(t.$L("\u65B0\u5EFA\u6807\u7B7E")))])],1)]),s("TaskTagAdd",{ref:"addTag",attrs:{"project-id":t.projectId},on:{"on-save":t.loadTags}})],1)},ft=[];const _t={name:"ProjectTaskTag",components:{TaskTagAdd:U,Tags:R},props:{projectId:{type:[Number,String],required:!0}},data(){return{loadIng:0,tags:[]}},computed:{...u(["formOptions"])},created(){this.loadTags()},methods:{async loadTags(){this.loadIng++;try{const{data:t}=await this.$store.dispatch("call",{url:"project/tag/list",data:{project_id:this.projectId},spinner:300});this.tags=t||[]}catch({msg:t}){$A.messageError(t||"\u52A0\u8F7D\u6807\u7B7E\u5931\u8D25")}finally{this.loadIng--}},handleAdd(t){this.$refs.addTag.onOpen(t)},async handleDelete(t){$A.modalConfirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u6807\u7B7E\u5417\uFF1F",onOk:async()=>{this.loadIng++;try{const{msg:e}=await this.$store.dispatch("call",{url:"project/tag/delete",data:{id:t.id},spinner:300});$A.messageSuccess(e||"\u5220\u9664\u6210\u529F"),this.loadTags()}catch({msg:e}){$A.messageError(e||"\u5220\u9664\u5931\u8D25")}finally{this.loadIng--}}})}}},b={};var vt=x(_t,pt,ft,!1,gt,null,null,null);function gt(t){for(let e in b)this[e]=b[e]}var kt=function(){return vt.exports}(),$t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vmpreview-nostyle",domProps:{innerHTML:t._s(t.html)}})},yt=[];const wt={name:"VMPreviewNostyle",props:{value:{default:""}},data(){return{html:""}},mounted(){this.translateMarkdown()},methods:{translateMarkdown(){this.html=Y(this.value,{sanitize:!1}).replace(/href="/gi,'target="_blank" href="')}},watch:{value(){this.translateMarkdown()}}},T={};var bt=x(wt,$t,yt,!1,Tt,null,null,null);function Tt(t){for(let e in T)this[e]=T[e]}var N=function(){return bt.exports}(),_={zh:[{name:"\u901A\u7528\u4EFB\u52A1",title:"xxxx \u4EFB\u52A1",content:`\u63CF\u8FF0\uFF1Axxxx
\u6E05\u5355\uFF1Axxxx`},{name:"\u4EA7\u54C1\u9700\u6C42",title:"xxxx \u529F\u80FD\u9700\u6C42/\u4EA7\u54C1\u4EFB\u52A1",content:`\u80CC\u666F\uFF1Axxxx
\u76EE\u6807\uFF1Axxxx
\u6E05\u5355\uFF1Axxxx`},{name:"\u6280\u672F\u4EFB\u52A1",title:"xxxx \u5F00\u53D1\u4EFB\u52A1/\u6280\u672F\u4F18\u5316\u4EFB\u52A1",content:`\u80CC\u666F\uFF1Axxxx
\u6280\u672F\u76EE\u6807\uFF1Axxxx
\u4EFB\u52A1\u6E05\u5355\uFF1Axxxx`},{name:"\u8FD0\u8425\u4EFB\u52A1",title:"xxxx \u6D3B\u52A8\u7B56\u5212/\u8FD0\u8425\u4EFB\u52A1",content:`\u80CC\u666F\uFF1Axxxx
\u6D3B\u52A8\u65B9\u6848\uFF1Axxxx
\u6570\u636E\u6307\u6807\uFF1Axxxx
\u4EFB\u52A1\u6E05\u5355\uFF1Axxxx`},{name:"\u5E02\u573A\u63A8\u5E7F",title:"xxxx \u63A8\u5E7F\u4EFB\u52A1/\u54C1\u724C\u6D3B\u52A8",content:`\u80CC\u666F\uFF1Axxxx
\u63A8\u5E7F\u65B9\u6848\uFF1Axxxx
\u6570\u636E\u6307\u6807\uFF1Axxxx
\u4EFB\u52A1\u6E05\u5355\uFF1Axxxx`},{name:"\u8BBE\u8BA1\u4EFB\u52A1",title:"xxxx \u8BBE\u8BA1\u4EFB\u52A1",content:`\u80CC\u666F\uFF1Axxxx
\u8BBE\u8BA1\u8981\u6C42\uFF1Axxxx
\u4EFB\u52A1\u6E05\u5355\uFF1Axxxx
\u76F8\u5173\u8D44\u6E90\uFF1Axxxx`},{name:"\u4EBA\u529B\u8D44\u6E90",title:"xxxx \u62DB\u8058\u4EFB\u52A1/\u57F9\u8BAD\u4EFB\u52A1",content:`\u76EE\u6807\uFF1Axxxx
\u5185\u5BB9\uFF1Axxxx
\u4EFB\u52A1\u6E05\u5355\uFF1Axxxx`},{name:"\u8D22\u52A1\u4EFB\u52A1",title:"xxxx \u9884\u7B97\u5BA1\u6279/\u62A5\u9500\u4EFB\u52A1",content:`\u80CC\u666F\uFF1Axxxx
\u5BA1\u6279\u6D41\u7A0B\uFF1Axxxx
\u62A5\u9500\u6E05\u5355\uFF1Axxxx`},{name:"\u9500\u552E\u4EFB\u52A1",title:"xxxx \u9500\u552E\u8DDF\u8FDB\u4EFB\u52A1",content:`\u5BA2\u6237\u4FE1\u606F\uFF1Axxxx
\u9500\u552E\u76EE\u6807\uFF1Axxxx
\u4EFB\u52A1\u6E05\u5355\uFF1Axxxx`},{name:"\u5BA2\u6237\u652F\u6301",title:"xxxx \u5BA2\u6237\u95EE\u9898\u5904\u7406\u4EFB\u52A1",content:`\u5BA2\u6237\u95EE\u9898\uFF1Axxxx
\u4F18\u5148\u7EA7\uFF1Axxxx
\u89E3\u51B3\u65B9\u6848\uFF1Axxxx
\u4EFB\u52A1\u6E05\u5355\uFF1Axxxx`},{name:"\u5185\u5BB9\u521B\u4F5C",title:"xxxx \u5185\u5BB9\u521B\u4F5C\u4EFB\u52A1",content:`\u4E3B\u9898\uFF1Axxxx
\u76EE\u6807\uFF1Axxxx
\u4EFB\u52A1\u6E05\u5355\uFF1Axxxx`},{name:"\u6CD5\u5F8B\u4E8B\u52A1",title:"xxxx \u5408\u540C\u5BA1\u6838/\u6CD5\u5F8B\u4EFB\u52A1",content:`\u5408\u540C\u80CC\u666F\uFF1Axxxx
\u5BA1\u6838\u91CD\u70B9\uFF1Axxxx
\u4EFB\u52A1\u6E05\u5355\uFF1Axxxx`},{name:"\u5B66\u4E60\u8BA1\u5212",title:"xxxx \u5B66\u4E60\u8BA1\u5212\u4EFB\u52A1",content:`\u5B66\u4E60\u76EE\u6807\uFF1Axxxx
\u5B66\u4E60\u8D44\u6E90\uFF1Axxxx
\u4EFB\u52A1\u6E05\u5355\uFF1Axxxx`},{name:"\u9879\u76EE\u7BA1\u7406",title:"xxxx \u9879\u76EE\u7BA1\u7406\u4EFB\u52A1",content:`\u9879\u76EE\u80CC\u666F\uFF1Axxxx
\u4EFB\u52A1\u6E05\u5355\uFF1Axxxx
\u72B6\u6001\uFF1Axxxx`},{name:"\u6D4B\u8BD5\u4EFB\u52A1",title:"xxxx \u6D4B\u8BD5\u4EFB\u52A1",content:`\u6D4B\u8BD5\u76EE\u6807\uFF1Axxxx
\u6D4B\u8BD5\u8303\u56F4\uFF1Axxxx
\u6D4B\u8BD5\u7528\u4F8B\uFF1Axxxx
\u95EE\u9898\u8BB0\u5F55\uFF1Axxxx`},{name:"\u6570\u636E\u5206\u6790",title:"xxxx \u6570\u636E\u5206\u6790\u4EFB\u52A1",content:`\u5206\u6790\u76EE\u6807\uFF1Axxxx
\u6570\u636E\u6765\u6E90\uFF1Axxxx
\u5206\u6790\u65B9\u6CD5\uFF1Axxxx
\u7ED3\u8BBA\u4E0E\u5EFA\u8BAE\uFF1Axxxx`},{name:"\u4F9B\u5E94\u94FE\u7BA1\u7406",title:"xxxx \u4F9B\u5E94\u94FE\u4EFB\u52A1",content:`\u4EFB\u52A1\u76EE\u6807\uFF1Axxxx
\u4F9B\u5E94\u5546\u4FE1\u606F\uFF1Axxxx
\u4EFB\u52A1\u6E05\u5355\uFF1Axxxx`},{name:"\u5B89\u5168\u68C0\u67E5",title:"xxxx \u5B89\u5168\u68C0\u67E5\u4EFB\u52A1",content:`\u68C0\u67E5\u8303\u56F4\uFF1Axxxx
\u68C0\u67E5\u6807\u51C6\uFF1Axxxx
\u95EE\u9898\u8BB0\u5F55\uFF1Axxxx
\u6574\u6539\u8BA1\u5212\uFF1Axxxx`},{name:"\u884C\u653F\u4E8B\u52A1",title:"xxxx \u884C\u653F\u4EFB\u52A1",content:`\u4EFB\u52A1\u63CF\u8FF0\uFF1Axxxx
\u8D1F\u8D23\u4EBA\uFF1Axxxx
\u4EFB\u52A1\u6E05\u5355\uFF1Axxxx`}],"zh-CHT":[{name:"\u901A\u7528\u4EFB\u52D9",title:"xxxx \u4EFB\u52D9",content:`\u63CF\u8FF0\uFF1Axxxx
\u6E05\u55AE\uFF1Axxxx`},{name:"\u7522\u54C1\u9700\u6C42",title:"xxxx \u4EFB\u52D9",content:`\u80CC\u666F\uFF1Axxxx
\u76EE\u6A19\uFF1Axxxx
\u6E05\u55AE\uFF1Axxxx`},{name:"\u6280\u8853\u4EFB\u52D9",title:"xxxx \u4EFB\u52D9",content:`\u80CC\u666F\uFF1Axxxx
\u6280\u8853\u76EE\u6A19\uFF1Axxxx
\u4EFB\u52D9\u6E05\u55AE\uFF1Axxxx`},{name:"\u904B\u71DF\u4EFB\u52D9",title:"xxxx \u4EFB\u52D9",content:`\u80CC\u666F\uFF1Axxxx
\u6D3B\u52D5\u65B9\u6848\uFF1Axxxx
\u6578\u64DA\u6307\u6A19\uFF1Axxxx
\u4EFB\u52D9\u6E05\u55AE\uFF1Axxxx`},{name:"\u5E02\u5834\u63A8\u5EE3",title:"xxxx \u4EFB\u52D9",content:`\u80CC\u666F\uFF1Axxxx
\u63A8\u5EE3\u65B9\u6848\uFF1Axxxx
\u6578\u64DA\u6307\u6A19\uFF1Axxxx
\u4EFB\u52D9\u6E05\u55AE\uFF1Axxxx`},{name:"\u8A2D\u8A08\u4EFB\u52D9",title:"xxxx \u4EFB\u52D9",content:`\u80CC\u666F\uFF1Axxxx
\u8A2D\u8A08\u8981\u6C42\uFF1Axxxx
\u4EFB\u52D9\u6E05\u55AE\uFF1Axxxx
\u76F8\u95DC\u8CC7\u6E90\uFF1Axxxx`},{name:"\u4EBA\u529B\u8CC7\u6E90",title:"xxxx \u4EFB\u52D9",content:`\u76EE\u6A19\uFF1Axxxx
\u5167\u5BB9\uFF1Axxxx
\u4EFB\u52D9\u6E05\u55AE\uFF1Axxxx`},{name:"\u8CA1\u52D9\u4EFB\u52D9",title:"xxxx \u4EFB\u52D9",content:`\u80CC\u666F\uFF1Axxxx
\u5BE9\u6279\u6D41\u7A0B\uFF1Axxxx
\u5831\u92B7\u6E05\u55AE\uFF1Axxxx`},{name:"\u92B7\u552E\u4EFB\u52D9",title:"xxxx \u4EFB\u52D9",content:`\u5BA2\u6236\u4FE1\u606F\uFF1Axxxx
\u92B7\u552E\u76EE\u6A19\uFF1Axxxx
\u4EFB\u52D9\u6E05\u55AE\uFF1Axxxx`},{name:"\u5BA2\u6236\u652F\u6301",title:"xxxx \u4EFB\u52D9",content:`\u5BA2\u6236\u554F\u984C\uFF1Axxxx
\u512A\u5148\u7D1A\uFF1Axxxx
\u89E3\u6C7A\u65B9\u6848\uFF1Axxxx
\u4EFB\u52D9\u6E05\u55AE\uFF1Axxxx`},{name:"\u5167\u5BB9\u5275\u4F5C",title:"xxxx \u4EFB\u52D9",content:`\u4E3B\u984C\uFF1Axxxx
\u76EE\u6A19\uFF1Axxxx
\u4EFB\u52D9\u6E05\u55AE\uFF1Axxxx`},{name:"\u6CD5\u5F8B\u4E8B\u52D9",title:"xxxx \u4EFB\u52D9",content:`\u5408\u540C\u80CC\u666F\uFF1Axxxx
\u5BE9\u6838\u91CD\u9EDE\uFF1Axxxx
\u4EFB\u52D9\u6E05\u55AE\uFF1Axxxx`},{name:"\u5B78\u7FD2\u8A08\u5283",title:"xxxx \u4EFB\u52D9",content:`\u5B78\u7FD2\u76EE\u6A19\uFF1Axxxx
\u5B78\u7FD2\u8CC7\u6E90\uFF1Axxxx
\u4EFB\u52D9\u6E05\u55AE\uFF1Axxxx`},{name:"\u9805\u76EE\u7BA1\u7406",title:"xxxx \u4EFB\u52D9",content:`\u9805\u76EE\u80CC\u666F\uFF1Axxxx
\u4EFB\u52D9\u6E05\u55AE\uFF1Axxxx
\u72C0\u614B\uFF1Axxxx`},{name:"\u6E2C\u8A66\u4EFB\u52D9",title:"xxxx \u4EFB\u52D9",content:`\u6E2C\u8A66\u76EE\u6A19\uFF1Axxxx
\u6E2C\u8A66\u7BC4\u570D\uFF1Axxxx
\u6E2C\u8A66\u7528\u4F8B\uFF1Axxxx
\u554F\u984C\u8A18\u9304\uFF1Axxxx`},{name:"\u6578\u64DA\u5206\u6790",title:"xxxx \u4EFB\u52D9",content:`\u5206\u6790\u76EE\u6A19\uFF1Axxxx
\u6578\u64DA\u4F86\u6E90\uFF1Axxxx
\u5206\u6790\u65B9\u6CD5\uFF1Axxxx
\u7D50\u8AD6\u8207\u5EFA\u8B70\uFF1Axxxx`},{name:"\u4F9B\u61C9\u93C8\u7BA1\u7406",title:"xxxx \u4EFB\u52D9",content:`\u4EFB\u52D9\u76EE\u6A19\uFF1Axxxx
\u4F9B\u61C9\u5546\u4FE1\u606F\uFF1Axxxx
\u4EFB\u52D9\u6E05\u55AE\uFF1Axxxx`},{name:"\u5B89\u5168\u6AA2\u67E5",title:"xxxx \u4EFB\u52D9",content:`\u6AA2\u67E5\u7BC4\u570D\uFF1Axxxx
\u6AA2\u67E5\u6A19\u6E96\uFF1Axxxx
\u554F\u984C\u8A18\u9304\uFF1Axxxx
\u6574\u6539\u8A08\u5283\uFF1Axxxx`},{name:"\u884C\u653F\u4E8B\u52D9",title:"xxxx \u4EFB\u52D9",content:`\u4EFB\u52D9\u63CF\u8FF0\uFF1Axxxx
\u8CA0\u8CAC\u4EBA\uFF1Axxxx
\u4EFB\u52D9\u6E05\u55AE\uFF1Axxxx`}],en:[{name:"General Task",title:"xxxx Task",content:`Description: xxxx
Checklist: xxxx`},{name:"Product Requirement",title:"xxxx Task",content:`Background: xxxx
Goal: xxxx
Checklist: xxxx`},{name:"Technical Task",title:"xxxx Task",content:`Background: xxxx
Technical Goal: xxxx
Task Checklist: xxxx`},{name:"Operations Task",title:"xxxx Task",content:`Background: xxxx
Activity Plan: xxxx
Data Metrics: xxxx
Task Checklist: xxxx`},{name:"Marketing",title:"xxxx Task",content:`Background: xxxx
Promotion Plan: xxxx
Data Metrics: xxxx
Task Checklist: xxxx`},{name:"Design Task",title:"xxxx Task",content:`Background: xxxx
Design Requirements: xxxx
Task Checklist: xxxx
Related Resources: xxxx`},{name:"Human Resources",title:"xxxx Task",content:`Goal: xxxx
Content: xxxx
Task Checklist: xxxx`},{name:"Finance Task",title:"xxxx Task",content:`Background: xxxx
Approval Process: xxxx
Reimbursement Checklist: xxxx`},{name:"Sales Task",title:"xxxx Task",content:`Customer Information: xxxx
Sales Target: xxxx
Task Checklist: xxxx`},{name:"Customer Support",title:"xxxx Task",content:`Customer Issues: xxxx
Priority: xxxx
Solution: xxxx
Task Checklist: xxxx`},{name:"Content Creation",title:"xxxx Task",content:`Topic: xxxx
Goal: xxxx
Task Checklist: xxxx`},{name:"Legal Affairs",title:"xxxx Task",content:`Contract Background: xxxx
Review Focus: xxxx
Task Checklist: xxxx`},{name:"Learning Plan",title:"xxxx Task",content:`Learning Goal: xxxx
Learning Resources: xxxx
Task Checklist: xxxx`},{name:"Project Management",title:"xxxx Task",content:`Project Background: xxxx
Task Checklist: xxxx
Status: xxxx`},{name:"Testing Task",title:"xxxx Task",content:`Testing Goal: xxxx
Testing Scope: xxxx
Test Cases: xxxx
Issue Records: xxxx`},{name:"Data Analysis",title:"xxxx Task",content:`Analysis Goal: xxxx
Data Source: xxxx
Analysis Methods: xxxx
Conclusions and Suggestions: xxxx`},{name:"Supply Chain Management",title:"xxxx Task",content:`Task Goal: xxxx
Supplier Information: xxxx
Task Checklist: xxxx`},{name:"Safety Inspection",title:"xxxx Task",content:`Inspection Scope: xxxx
Inspection Standards: xxxx
Issue Records: xxxx
Correction Plan: xxxx`},{name:"Administrative Affairs",title:"xxxx Task",content:`Task Description: xxxx
Person in Charge: xxxx
Task Checklist: xxxx`}],ko:[{name:"\uC77C\uBC18 \uC791\uC5C5",title:"xxxx \uC791\uC5C5",content:`\uC124\uBA85: xxxx
\uCCB4\uD06C\uB9AC\uC2A4\uD2B8: xxxx`},{name:"\uC81C\uD488 \uC694\uAD6C\uC0AC\uD56D",title:"xxxx \uC791\uC5C5",content:`\uBC30\uACBD: xxxx
\uBAA9\uD45C: xxxx
\uCCB4\uD06C\uB9AC\uC2A4\uD2B8: xxxx`},{name:"\uAE30\uC220 \uC791\uC5C5",title:"xxxx \uC791\uC5C5",content:`\uBC30\uACBD: xxxx
\uAE30\uC220 \uBAA9\uD45C: xxxx
\uC791\uC5C5 \uCCB4\uD06C\uB9AC\uC2A4\uD2B8: xxxx`},{name:"\uC6B4\uC601 \uC791\uC5C5",title:"xxxx \uC791\uC5C5",content:`\uBC30\uACBD: xxxx
\uD65C\uB3D9 \uACC4\uD68D: xxxx
\uB370\uC774\uD130 \uC9C0\uD45C: xxxx
\uC791\uC5C5 \uCCB4\uD06C\uB9AC\uC2A4\uD2B8: xxxx`},{name:"\uB9C8\uCF00\uD305",title:"xxxx \uC791\uC5C5",content:`\uBC30\uACBD: xxxx
\uD64D\uBCF4 \uACC4\uD68D: xxxx
\uB370\uC774\uD130 \uC9C0\uD45C: xxxx
\uC791\uC5C5 \uCCB4\uD06C\uB9AC\uC2A4\uD2B8: xxxx`},{name:"\uB514\uC790\uC778 \uC791\uC5C5",title:"xxxx \uC791\uC5C5",content:`\uBC30\uACBD: xxxx
\uB514\uC790\uC778 \uC694\uAD6C\uC0AC\uD56D: xxxx
\uC791\uC5C5 \uCCB4\uD06C\uB9AC\uC2A4\uD2B8: xxxx
\uAD00\uB828 \uC790\uB8CC: xxxx`},{name:"\uC778\uC0AC \uAD00\uB9AC",title:"xxxx \uC791\uC5C5",content:`\uBAA9\uD45C: xxxx
\uB0B4\uC6A9: xxxx
\uC791\uC5C5 \uCCB4\uD06C\uB9AC\uC2A4\uD2B8: xxxx`},{name:"\uC7AC\uBB34 \uC791\uC5C5",title:"xxxx \uC791\uC5C5",content:`\uBC30\uACBD: xxxx
\uC2B9\uC778 \uC808\uCC28: xxxx
\uBE44\uC6A9 \uCCAD\uAD6C\uC11C: xxxx`},{name:"\uC601\uC5C5 \uC791\uC5C5",title:"xxxx \uC791\uC5C5",content:`\uACE0\uAC1D \uC815\uBCF4: xxxx
\uC601\uC5C5 \uBAA9\uD45C: xxxx
\uC791\uC5C5 \uCCB4\uD06C\uB9AC\uC2A4\uD2B8: xxxx`},{name:"\uACE0\uAC1D \uC9C0\uC6D0",title:"xxxx \uC791\uC5C5",content:`\uACE0\uAC1D \uBB38\uC81C: xxxx
\uC6B0\uC120 \uC21C\uC704: xxxx
\uD574\uACB0\uCC45: xxxx
\uC791\uC5C5 \uCCB4\uD06C\uB9AC\uC2A4\uD2B8: xxxx`},{name:"\uCF58\uD150\uCE20 \uC81C\uC791",title:"xxxx \uC791\uC5C5",content:`\uC8FC\uC81C: xxxx
\uBAA9\uD45C: xxxx
\uC791\uC5C5 \uCCB4\uD06C\uB9AC\uC2A4\uD2B8: xxxx`},{name:"\uBC95\uB960 \uC5C5\uBB34",title:"xxxx \uC791\uC5C5",content:`\uACC4\uC57D \uBC30\uACBD: xxxx
\uAC80\uD1A0 \uCD08\uC810: xxxx
\uC791\uC5C5 \uCCB4\uD06C\uB9AC\uC2A4\uD2B8: xxxx`},{name:"\uD559\uC2B5 \uACC4\uD68D",title:"xxxx \uC791\uC5C5",content:`\uD559\uC2B5 \uBAA9\uD45C: xxxx
\uD559\uC2B5 \uC790\uB8CC: xxxx
\uC791\uC5C5 \uCCB4\uD06C\uB9AC\uC2A4\uD2B8: xxxx`},{name:"\uD504\uB85C\uC81D\uD2B8 \uAD00\uB9AC",title:"xxxx \uC791\uC5C5",content:`\uD504\uB85C\uC81D\uD2B8 \uBC30\uACBD: xxxx
\uC791\uC5C5 \uCCB4\uD06C\uB9AC\uC2A4\uD2B8: xxxx
\uC0C1\uD0DC: xxxx`},{name:"\uD14C\uC2A4\uD2B8 \uC791\uC5C5",title:"xxxx \uC791\uC5C5",content:`\uD14C\uC2A4\uD2B8 \uBAA9\uD45C: xxxx
\uD14C\uC2A4\uD2B8 \uBC94\uC704: xxxx
\uD14C\uC2A4\uD2B8 \uCF00\uC774\uC2A4: xxxx
\uBB38\uC81C \uAE30\uB85D: xxxx`},{name:"\uB370\uC774\uD130 \uBD84\uC11D",title:"xxxx \uC791\uC5C5",content:`\uBD84\uC11D \uBAA9\uD45C: xxxx
\uB370\uC774\uD130 \uCD9C\uCC98: xxxx
\uBD84\uC11D \uBC29\uBC95: xxxx
\uACB0\uB860 \uBC0F \uC81C\uC548: xxxx`},{name:"\uACF5\uAE09\uB9DD \uAD00\uB9AC",title:"xxxx \uC791\uC5C5",content:`\uC791\uC5C5 \uBAA9\uD45C: xxxx
\uACF5\uAE09\uC5C5\uCCB4 \uC815\uBCF4: xxxx
\uC791\uC5C5 \uCCB4\uD06C\uB9AC\uC2A4\uD2B8: xxxx`},{name:"\uC548\uC804 \uC810\uAC80",title:"xxxx \uC791\uC5C5",content:`\uC810\uAC80 \uBC94\uC704: xxxx
\uC810\uAC80 \uAE30\uC900: xxxx
\uBB38\uC81C \uAE30\uB85D: xxxx
\uC218\uC815 \uACC4\uD68D: xxxx`},{name:"\uD589\uC815 \uC5C5\uBB34",title:"xxxx \uC791\uC5C5",content:`\uC791\uC5C5 \uC124\uBA85: xxxx
\uB2F4\uB2F9\uC790: xxxx
\uC791\uC5C5 \uCCB4\uD06C\uB9AC\uC2A4\uD2B8: xxxx`}],ja:[{name:"\u4E00\u822C\u30BF\u30B9\u30AF",title:"xxxx \u30BF\u30B9\u30AF",content:`\u8AAC\u660E\uFF1Axxxx
\u30C1\u30A7\u30C3\u30AF\u30EA\u30B9\u30C8\uFF1Axxxx`},{name:"\u88FD\u54C1\u8981\u4EF6",title:"xxxx \u30BF\u30B9\u30AF",content:`\u80CC\u666F\uFF1Axxxx
\u76EE\u6A19\uFF1Axxxx
\u30C1\u30A7\u30C3\u30AF\u30EA\u30B9\u30C8\uFF1Axxxx`},{name:"\u6280\u8853\u30BF\u30B9\u30AF",title:"xxxx \u30BF\u30B9\u30AF",content:`\u80CC\u666F\uFF1Axxxx
\u6280\u8853\u76EE\u6A19\uFF1Axxxx
\u30BF\u30B9\u30AF\u30EA\u30B9\u30C8\uFF1Axxxx`},{name:"\u904B\u55B6\u30BF\u30B9\u30AF",title:"xxxx \u30BF\u30B9\u30AF",content:`\u80CC\u666F\uFF1Axxxx
\u6D3B\u52D5\u8A08\u753B\uFF1Axxxx
\u30C7\u30FC\u30BF\u6307\u6A19\uFF1Axxxx
\u30BF\u30B9\u30AF\u30EA\u30B9\u30C8\uFF1Axxxx`},{name:"\u30DE\u30FC\u30B1\u30C6\u30A3\u30F3\u30B0",title:"xxxx \u30BF\u30B9\u30AF",content:`\u80CC\u666F\uFF1Axxxx
\u30D7\u30ED\u30E2\u30FC\u30B7\u30E7\u30F3\u8A08\u753B\uFF1Axxxx
\u30C7\u30FC\u30BF\u6307\u6A19\uFF1Axxxx
\u30BF\u30B9\u30AF\u30EA\u30B9\u30C8\uFF1Axxxx`},{name:"\u30C7\u30B6\u30A4\u30F3\u30BF\u30B9\u30AF",title:"xxxx \u30BF\u30B9\u30AF",content:`\u80CC\u666F\uFF1Axxxx
\u30C7\u30B6\u30A4\u30F3\u8981\u4EF6\uFF1Axxxx
\u30BF\u30B9\u30AF\u30EA\u30B9\u30C8\uFF1Axxxx
\u95A2\u9023\u30EA\u30BD\u30FC\u30B9\uFF1Axxxx`},{name:"\u4EBA\u4E8B\u30BF\u30B9\u30AF",title:"xxxx \u30BF\u30B9\u30AF",content:`\u76EE\u6A19\uFF1Axxxx
\u5185\u5BB9\uFF1Axxxx
\u30BF\u30B9\u30AF\u30EA\u30B9\u30C8\uFF1Axxxx`},{name:"\u8CA1\u52D9\u30BF\u30B9\u30AF",title:"xxxx \u30BF\u30B9\u30AF",content:`\u80CC\u666F\uFF1Axxxx
\u627F\u8A8D\u30D7\u30ED\u30BB\u30B9\uFF1Axxxx
\u7CBE\u7B97\u30EA\u30B9\u30C8\uFF1Axxxx`},{name:"\u55B6\u696D\u30BF\u30B9\u30AF",title:"xxxx \u30BF\u30B9\u30AF",content:`\u9867\u5BA2\u60C5\u5831\uFF1Axxxx
\u55B6\u696D\u76EE\u6A19\uFF1Axxxx
\u30BF\u30B9\u30AF\u30EA\u30B9\u30C8\uFF1Axxxx`},{name:"\u30AB\u30B9\u30BF\u30DE\u30FC\u30B5\u30DD\u30FC\u30C8",title:"xxxx \u30BF\u30B9\u30AF",content:`\u9867\u5BA2\u554F\u984C\uFF1Axxxx
\u512A\u5148\u9806\u4F4D\uFF1Axxxx
\u89E3\u6C7A\u7B56\uFF1Axxxx
\u30BF\u30B9\u30AF\u30EA\u30B9\u30C8\uFF1Axxxx`},{name:"\u30B3\u30F3\u30C6\u30F3\u30C4\u5236\u4F5C",title:"xxxx \u30BF\u30B9\u30AF",content:`\u30C6\u30FC\u30DE\uFF1Axxxx
\u76EE\u6A19\uFF1Axxxx
\u30BF\u30B9\u30AF\u30EA\u30B9\u30C8\uFF1Axxxx`},{name:"\u6CD5\u52D9\u696D\u52D9",title:"xxxx \u30BF\u30B9\u30AF",content:`\u5951\u7D04\u80CC\u666F\uFF1Axxxx
\u30EC\u30D3\u30E5\u30FC\u306E\u30DD\u30A4\u30F3\u30C8\uFF1Axxxx
\u30BF\u30B9\u30AF\u30EA\u30B9\u30C8\uFF1Axxxx`},{name:"\u5B66\u7FD2\u8A08\u753B",title:"xxxx \u30BF\u30B9\u30AF",content:`\u5B66\u7FD2\u76EE\u6A19\uFF1Axxxx
\u5B66\u7FD2\u30EA\u30BD\u30FC\u30B9\uFF1Axxxx
\u30BF\u30B9\u30AF\u30EA\u30B9\u30C8\uFF1Axxxx`},{name:"\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u7BA1\u7406",title:"xxxx \u30BF\u30B9\u30AF",content:`\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u80CC\u666F\uFF1Axxxx
\u30BF\u30B9\u30AF\u30EA\u30B9\u30C8\uFF1Axxxx
\u30B9\u30C6\u30FC\u30BF\u30B9\uFF1Axxxx`},{name:"\u30C6\u30B9\u30C8\u30BF\u30B9\u30AF",title:"xxxx \u30BF\u30B9\u30AF",content:`\u30C6\u30B9\u30C8\u76EE\u6A19\uFF1Axxxx
\u30C6\u30B9\u30C8\u7BC4\u56F2\uFF1Axxxx
\u30C6\u30B9\u30C8\u30B1\u30FC\u30B9\uFF1Axxxx
\u554F\u984C\u8A18\u9332\uFF1Axxxx`},{name:"\u30C7\u30FC\u30BF\u5206\u6790",title:"xxxx \u30BF\u30B9\u30AF",content:`\u5206\u6790\u76EE\u6A19\uFF1Axxxx
\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9\uFF1Axxxx
\u5206\u6790\u65B9\u6CD5\uFF1Axxxx
\u7D50\u8AD6\u3068\u63D0\u6848\uFF1Axxxx`},{name:"\u30B5\u30D7\u30E9\u30A4\u30C1\u30A7\u30FC\u30F3\u7BA1\u7406",title:"xxxx \u30BF\u30B9\u30AF",content:`\u30BF\u30B9\u30AF\u76EE\u6A19\uFF1Axxxx
\u30B5\u30D7\u30E9\u30A4\u30E4\u30FC\u60C5\u5831\uFF1Axxxx
\u30BF\u30B9\u30AF\u30EA\u30B9\u30C8\uFF1Axxxx`},{name:"\u5B89\u5168\u70B9\u691C",title:"xxxx \u30BF\u30B9\u30AF",content:`\u70B9\u691C\u7BC4\u56F2\uFF1Axxxx
\u70B9\u691C\u57FA\u6E96\uFF1Axxxx
\u554F\u984C\u8A18\u9332\uFF1Axxxx
\u662F\u6B63\u8A08\u753B\uFF1Axxxx`},{name:"\u7BA1\u7406\u696D\u52D9",title:"xxxx \u30BF\u30B9\u30AF",content:`\u30BF\u30B9\u30AF\u8AAC\u660E\uFF1Axxxx
\u62C5\u5F53\u8005\uFF1Axxxx
\u30BF\u30B9\u30AF\u30EA\u30B9\u30C8\uFF1Axxxx`}],de:[{name:"Allgemeine Aufgabe",title:"xxxx Aufgabe",content:`Beschreibung: xxxx
Checkliste: xxxx`},{name:"Produktanforderung",title:"xxxx Aufgabe",content:`Hintergrund: xxxx
Ziel: xxxx
Checkliste: xxxx`},{name:"Technische Aufgabe",title:"xxxx Aufgabe",content:`Hintergrund: xxxx
Technisches Ziel: xxxx
Aufgabenliste: xxxx`},{name:"Betriebsaufgabe",title:"xxxx Aufgabe",content:`Hintergrund: xxxx
Aktivit\xE4tsplan: xxxx
Datenkennzahlen: xxxx
Aufgabenliste: xxxx`},{name:"Marketing",title:"xxxx Aufgabe",content:`Hintergrund: xxxx
Werbeplan: xxxx
Datenkennzahlen: xxxx
Aufgabenliste: xxxx`},{name:"Design-Aufgabe",title:"xxxx Aufgabe",content:`Hintergrund: xxxx
Designanforderungen: xxxx
Aufgabenliste: xxxx
Relevante Ressourcen: xxxx`},{name:"Personalwesen",title:"xxxx Aufgabe",content:`Ziel: xxxx
Inhalt: xxxx
Aufgabenliste: xxxx`},{name:"Finanzaufgabe",title:"xxxx Aufgabe",content:`Hintergrund: xxxx
Genehmigungsprozess: xxxx
Erstattungsliste: xxxx`},{name:"Verkaufsaufgabe",title:"xxxx Aufgabe",content:`Kundeninformationen: xxxx
Verkaufsziel: xxxx
Aufgabenliste: xxxx`},{name:"Kundensupport",title:"xxxx Aufgabe",content:`Kundenprobleme: xxxx
Priorit\xE4ten: xxxx
L\xF6sung: xxxx
Aufgabenliste: xxxx`},{name:"Inhaltserstellung",title:"xxxx Aufgabe",content:`Thema: xxxx
Ziel: xxxx
Aufgabenliste: xxxx`},{name:"Rechtsangelegenheiten",title:"xxxx Aufgabe",content:`Vertragsgrundlage: xxxx
Pr\xFCfungsschwerpunkte: xxxx
Aufgabenliste: xxxx`},{name:"Lernplan",title:"xxxx Aufgabe",content:`Lernziel: xxxx
Lernressourcen: xxxx
Aufgabenliste: xxxx`},{name:"Projektmanagement",title:"xxxx Aufgabe",content:`Projektgrundlage: xxxx
Aufgabenliste: xxxx
Status: xxxx`},{name:"Testaufgabe",title:"xxxx Aufgabe",content:`Testziel: xxxx
Testumfang: xxxx
Testf\xE4lle: xxxx
Problemliste: xxxx`},{name:"Datenanalyse",title:"xxxx Aufgabe",content:`Analyseziel: xxxx
Datenquelle: xxxx
Analysemethoden: xxxx
Schlussfolgerungen und Empfehlungen: xxxx`},{name:"Lieferkettenmanagement",title:"xxxx Aufgabe",content:`Aufgabenziel: xxxx
Lieferanteninformationen: xxxx
Aufgabenliste: xxxx`},{name:"Sicherheitspr\xFCfung",title:"xxxx Aufgabe",content:`Pr\xFCfungsumfang: xxxx
Pr\xFCfungsstandards: xxxx
Problemliste: xxxx
Korrekturplan: xxxx`},{name:"Verwaltungsaufgaben",title:"xxxx Aufgabe",content:`Aufgabenbeschreibung: xxxx
Verantwortliche Person: xxxx
Aufgabenliste: xxxx`}],fr:[{name:"T\xE2che G\xE9n\xE9rale",title:"xxxx T\xE2che",content:`Description : xxxx
Liste de contr\xF4le : xxxx`},{name:"Exigence Produit",title:"xxxx T\xE2che",content:`Contexte : xxxx
Objectif : xxxx
Liste de contr\xF4le : xxxx`},{name:"T\xE2che Technique",title:"xxxx T\xE2che",content:`Contexte : xxxx
Objectif Technique : xxxx
Liste des t\xE2ches : xxxx`},{name:"T\xE2che Op\xE9rationnelle",title:"xxxx T\xE2che",content:`Contexte : xxxx
Plan d'activit\xE9 : xxxx
Indicateurs de donn\xE9es : xxxx
Liste des t\xE2ches : xxxx`},{name:"Marketing",title:"xxxx T\xE2che",content:`Contexte : xxxx
Plan de promotion : xxxx
Indicateurs de donn\xE9es : xxxx
Liste des t\xE2ches : xxxx`},{name:"T\xE2che de Design",title:"xxxx T\xE2che",content:`Contexte : xxxx
Exigences de design : xxxx
Liste des t\xE2ches : xxxx
Ressources associ\xE9es : xxxx`},{name:"Ressources Humaines",title:"xxxx T\xE2che",content:`Objectif : xxxx
Contenu : xxxx
Liste des t\xE2ches : xxxx`},{name:"T\xE2che Financi\xE8re",title:"xxxx T\xE2che",content:`Contexte : xxxx
Processus d'approbation : xxxx
Liste des remboursements : xxxx`},{name:"T\xE2che Commerciale",title:"xxxx T\xE2che",content:`Informations client : xxxx
Objectif de vente : xxxx
Liste des t\xE2ches : xxxx`},{name:"Support Client",title:"xxxx T\xE2che",content:`Probl\xE8mes client : xxxx
Priorit\xE9 : xxxx
Solution : xxxx
Liste des t\xE2ches : xxxx`},{name:"Cr\xE9ation de Contenu",title:"xxxx T\xE2che",content:`Th\xE8me : xxxx
Objectif : xxxx
Liste des t\xE2ches : xxxx`},{name:"Affaires Juridiques",title:"xxxx T\xE2che",content:`Contexte du contrat : xxxx
Points cl\xE9s de r\xE9vision : xxxx
Liste des t\xE2ches : xxxx`},{name:"Plan d'Apprentissage",title:"xxxx T\xE2che",content:`Objectif d'apprentissage : xxxx
Ressources d'apprentissage : xxxx
Liste des t\xE2ches : xxxx`},{name:"Gestion de Projet",title:"xxxx T\xE2che",content:`Contexte du projet : xxxx
Liste des t\xE2ches : xxxx
Statut : xxxx`},{name:"T\xE2che de Test",title:"xxxx T\xE2che",content:`Objectif du test : xxxx
P\xE9rim\xE8tre du test : xxxx
Cas de test : xxxx
Enregistrements des probl\xE8mes : xxxx`},{name:"Analyse de Donn\xE9es",title:"xxxx T\xE2che",content:`Objectif d'analyse : xxxx
Source de donn\xE9es : xxxx
M\xE9thodes d'analyse : xxxx
Conclusions et recommandations : xxxx`},{name:"Gestion de la Cha\xEEne d'Approvisionnement",title:"xxxx T\xE2che",content:`Objectif de la t\xE2che : xxxx
Informations sur le fournisseur : xxxx
Liste des t\xE2ches : xxxx`},{name:"Inspection de S\xE9curit\xE9",title:"xxxx T\xE2che",content:`P\xE9rim\xE8tre de l'inspection : xxxx
Normes d'inspection : xxxx
Enregistrements des probl\xE8mes : xxxx
Plan de correction : xxxx`},{name:"Affaires Administratives",title:"xxxx T\xE2che",content:`Description de la t\xE2che : xxxx
Responsable : xxxx
Liste des t\xE2ches : xxxx`}],id:[{name:"Tugas Umum",title:"xxxx Tugas",content:`Deskripsi: xxxx
Daftar Periksa: xxxx`},{name:"Kebutuhan Produk",title:"xxxx Tugas",content:`Latar Belakang: xxxx
Tujuan: xxxx
Daftar Periksa: xxxx`},{name:"Tugas Teknis",title:"xxxx Tugas",content:`Latar Belakang: xxxx
Tujuan Teknis: xxxx
Daftar Tugas: xxxx`},{name:"Tugas Operasional",title:"xxxx Tugas",content:`Latar Belakang: xxxx
Rencana Aktivitas: xxxx
Indikator Data: xxxx
Daftar Tugas: xxxx`},{name:"Pemasaran",title:"xxxx Tugas",content:`Latar Belakang: xxxx
Rencana Promosi: xxxx
Indikator Data: xxxx
Daftar Tugas: xxxx`},{name:"Tugas Desain",title:"xxxx Tugas",content:`Latar Belakang: xxxx
Persyaratan Desain: xxxx
Daftar Tugas: xxxx
Sumber Daya Terkait: xxxx`},{name:"Sumber Daya Manusia",title:"xxxx Tugas",content:`Tujuan: xxxx
Isi: xxxx
Daftar Tugas: xxxx`},{name:"Tugas Keuangan",title:"xxxx Tugas",content:`Latar Belakang: xxxx
Proses Persetujuan: xxxx
Daftar Penggantian: xxxx`},{name:"Tugas Penjualan",title:"xxxx Tugas",content:`Informasi Pelanggan: xxxx
Target Penjualan: xxxx
Daftar Tugas: xxxx`},{name:"Dukungan Pelanggan",title:"xxxx Tugas",content:`Masalah Pelanggan: xxxx
Prioritas: xxxx
Solusi: xxxx
Daftar Tugas: xxxx`},{name:"Pembuatan Konten",title:"xxxx Tugas",content:`Topik: xxxx
Tujuan: xxxx
Daftar Tugas: xxxx`},{name:"Urusan Hukum",title:"xxxx Tugas",content:`Latar Belakang Kontrak: xxxx
Fokus Peninjauan: xxxx
Daftar Tugas: xxxx`},{name:"Rencana Pembelajaran",title:"xxxx Tugas",content:`Tujuan Pembelajaran: xxxx
Sumber Belajar: xxxx
Daftar Tugas: xxxx`},{name:"Manajemen Proyek",title:"xxxx Tugas",content:`Latar Belakang Proyek: xxxx
Daftar Tugas: xxxx
Status: xxxx`},{name:"Tugas Pengujian",title:"xxxx Tugas",content:`Tujuan Pengujian: xxxx
Lingkup Pengujian: xxxx
Kasus Pengujian: xxxx
Catatan Masalah: xxxx`},{name:"Analisis Data",title:"xxxx Tugas",content:`Tujuan Analisis: xxxx
Sumber Data: xxxx
Metode Analisis: xxxx
Kesimpulan dan Rekomendasi: xxxx`},{name:"Manajemen Rantai Pasokan",title:"xxxx Tugas",content:`Tujuan Tugas: xxxx
Informasi Pemasok: xxxx
Daftar Tugas: xxxx`},{name:"Inspeksi Keamanan",title:"xxxx Tugas",content:`Lingkup Inspeksi: xxxx
Standar Inspeksi: xxxx
Catatan Masalah: xxxx
Rencana Koreksi: xxxx`},{name:"Tugas Administrasi",title:"xxxx Tugas",content:`Deskripsi Tugas: xxxx
Penanggung Jawab: xxxx
Daftar Tugas: xxxx`}],ru:[{name:"\u041E\u0431\u0449\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430",title:"xxxx \u0417\u0430\u0434\u0430\u0447\u0430",content:`\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435: xxxx
\u0427\u0435\u043A-\u043B\u0438\u0441\u0442: xxxx`},{name:"\u0422\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u044F \u043A \u043F\u0440\u043E\u0434\u0443\u043A\u0442\u0443",title:"xxxx \u0417\u0430\u0434\u0430\u0447\u0430",content:`\u041A\u043E\u043D\u0442\u0435\u043A\u0441\u0442: xxxx
\u0426\u0435\u043B\u044C: xxxx
\u0427\u0435\u043A-\u043B\u0438\u0441\u0442: xxxx`},{name:"\u0422\u0435\u0445\u043D\u0438\u0447\u0435\u0441\u043A\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430",title:"xxxx \u0417\u0430\u0434\u0430\u0447\u0430",content:`\u041A\u043E\u043D\u0442\u0435\u043A\u0441\u0442: xxxx
\u0422\u0435\u0445\u043D\u0438\u0447\u0435\u0441\u043A\u0430\u044F \u0446\u0435\u043B\u044C: xxxx
\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u0434\u0430\u0447: xxxx`},{name:"\u041E\u043F\u0435\u0440\u0430\u0446\u0438\u043E\u043D\u043D\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430",title:"xxxx \u0417\u0430\u0434\u0430\u0447\u0430",content:`\u041A\u043E\u043D\u0442\u0435\u043A\u0441\u0442: xxxx
\u041F\u043B\u0430\u043D \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439: xxxx
\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u0435\u043B\u0438 \u0434\u0430\u043D\u043D\u044B\u0445: xxxx
\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u0434\u0430\u0447: xxxx`},{name:"\u041C\u0430\u0440\u043A\u0435\u0442\u0438\u043D\u0433",title:"xxxx \u0417\u0430\u0434\u0430\u0447\u0430",content:`\u041A\u043E\u043D\u0442\u0435\u043A\u0441\u0442: xxxx
\u041F\u043B\u0430\u043D \u043F\u0440\u043E\u0434\u0432\u0438\u0436\u0435\u043D\u0438\u044F: xxxx
\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u0435\u043B\u0438 \u0434\u0430\u043D\u043D\u044B\u0445: xxxx
\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u0434\u0430\u0447: xxxx`},{name:"\u0414\u0438\u0437\u0430\u0439\u043D\u0435\u0440\u0441\u043A\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430",title:"xxxx \u0417\u0430\u0434\u0430\u0447\u0430",content:`\u041A\u043E\u043D\u0442\u0435\u043A\u0441\u0442: xxxx
\u0422\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u044F \u043A \u0434\u0438\u0437\u0430\u0439\u043D\u0443: xxxx
\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u0434\u0430\u0447: xxxx
\u0421\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u044B: xxxx`},{name:"\u041A\u0430\u0434\u0440\u043E\u0432\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430",title:"xxxx \u0417\u0430\u0434\u0430\u0447\u0430",content:`\u0426\u0435\u043B\u044C: xxxx
\u0421\u043E\u0434\u0435\u0440\u0436\u0430\u043D\u0438\u0435: xxxx
\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u0434\u0430\u0447: xxxx`},{name:"\u0424\u0438\u043D\u0430\u043D\u0441\u043E\u0432\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430",title:"xxxx \u0417\u0430\u0434\u0430\u0447\u0430",content:`\u041A\u043E\u043D\u0442\u0435\u043A\u0441\u0442: xxxx
\u041F\u0440\u043E\u0446\u0435\u0441\u0441 \u0443\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F: xxxx
\u0427\u0435\u043A-\u043B\u0438\u0441\u0442 \u0432\u043E\u0437\u043C\u0435\u0449\u0435\u043D\u0438\u044F: xxxx`},{name:"\u0417\u0430\u0434\u0430\u0447\u0430 \u043F\u043E \u043F\u0440\u043E\u0434\u0430\u0436\u0430\u043C",title:"xxxx \u0417\u0430\u0434\u0430\u0447\u0430",content:`\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u043A\u043B\u0438\u0435\u043D\u0442\u0430\u0445: xxxx
\u0426\u0435\u043B\u044C \u043F\u0440\u043E\u0434\u0430\u0436: xxxx
\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u0434\u0430\u0447: xxxx`},{name:"\u041A\u043B\u0438\u0435\u043D\u0442\u0441\u043A\u0430\u044F \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0430",title:"xxxx \u0417\u0430\u0434\u0430\u0447\u0430",content:`\u041F\u0440\u043E\u0431\u043B\u0435\u043C\u044B \u043A\u043B\u0438\u0435\u043D\u0442\u043E\u0432: xxxx
\u041F\u0440\u0438\u043E\u0440\u0438\u0442\u0435\u0442: xxxx
\u0420\u0435\u0448\u0435\u043D\u0438\u0435: xxxx
\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u0434\u0430\u0447: xxxx`},{name:"\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u043A\u043E\u043D\u0442\u0435\u043D\u0442\u0430",title:"xxxx \u0417\u0430\u0434\u0430\u0447\u0430",content:`\u0422\u0435\u043C\u0430: xxxx
\u0426\u0435\u043B\u044C: xxxx
\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u0434\u0430\u0447: xxxx`},{name:"\u042E\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043A\u0438\u0435 \u0432\u043E\u043F\u0440\u043E\u0441\u044B",title:"xxxx \u0417\u0430\u0434\u0430\u0447\u0430",content:`\u041A\u043E\u043D\u0442\u0435\u043A\u0441\u0442 \u043A\u043E\u043D\u0442\u0440\u0430\u043A\u0442\u0430: xxxx
\u041A\u043B\u044E\u0447\u0435\u0432\u044B\u0435 \u043C\u043E\u043C\u0435\u043D\u0442\u044B \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438: xxxx
\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u0434\u0430\u0447: xxxx`},{name:"\u041F\u043B\u0430\u043D \u043E\u0431\u0443\u0447\u0435\u043D\u0438\u044F",title:"xxxx \u0417\u0430\u0434\u0430\u0447\u0430",content:`\u0426\u0435\u043B\u044C \u043E\u0431\u0443\u0447\u0435\u043D\u0438\u044F: xxxx
\u0423\u0447\u0435\u0431\u043D\u044B\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u044B: xxxx
\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u0434\u0430\u0447: xxxx`},{name:"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0440\u043E\u0435\u043A\u0442\u043E\u043C",title:"xxxx \u0417\u0430\u0434\u0430\u0447\u0430",content:`\u041A\u043E\u043D\u0442\u0435\u043A\u0441\u0442 \u043F\u0440\u043E\u0435\u043A\u0442\u0430: xxxx
\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u0434\u0430\u0447: xxxx
\u0421\u0442\u0430\u0442\u0443\u0441: xxxx`},{name:"\u0422\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435",title:"xxxx \u0417\u0430\u0434\u0430\u0447\u0430",content:`\u0426\u0435\u043B\u044C \u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F: xxxx
\u041E\u0431\u043B\u0430\u0441\u0442\u044C \u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F: xxxx
\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0435 \u043A\u0435\u0439\u0441\u044B: xxxx
\u0416\u0443\u0440\u043D\u0430\u043B \u043F\u0440\u043E\u0431\u043B\u0435\u043C: xxxx`},{name:"\u0410\u043D\u0430\u043B\u0438\u0437 \u0434\u0430\u043D\u043D\u044B\u0445",title:"xxxx \u0417\u0430\u0434\u0430\u0447\u0430",content:`\u0426\u0435\u043B\u044C \u0430\u043D\u0430\u043B\u0438\u0437\u0430: xxxx
\u0418\u0441\u0442\u043E\u0447\u043D\u0438\u043A \u0434\u0430\u043D\u043D\u044B\u0445: xxxx
\u041C\u0435\u0442\u043E\u0434\u044B \u0430\u043D\u0430\u043B\u0438\u0437\u0430: xxxx
\u0412\u044B\u0432\u043E\u0434\u044B \u0438 \u0440\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0430\u0446\u0438\u0438: xxxx`},{name:"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0446\u0435\u043F\u043E\u0447\u043A\u0430\u043C\u0438 \u043F\u043E\u0441\u0442\u0430\u0432\u043E\u043A",title:"xxxx \u0417\u0430\u0434\u0430\u0447\u0430",content:`\u0426\u0435\u043B\u044C \u0437\u0430\u0434\u0430\u0447\u0438: xxxx
\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u043F\u043E\u0441\u0442\u0430\u0432\u0449\u0438\u043A\u0430\u0445: xxxx
\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u0434\u0430\u0447: xxxx`},{name:"\u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u0438",title:"xxxx \u0417\u0430\u0434\u0430\u0447\u0430",content:`\u041E\u0431\u043B\u0430\u0441\u0442\u044C \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438: xxxx
\u041A\u0440\u0438\u0442\u0435\u0440\u0438\u0438 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438: xxxx
\u0416\u0443\u0440\u043D\u0430\u043B \u043F\u0440\u043E\u0431\u043B\u0435\u043C: xxxx
\u041F\u043B\u0430\u043D \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u0438\u0440\u043E\u0432\u043A\u0438: xxxx`},{name:"\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u0438\u0432\u043D\u044B\u0435 \u0437\u0430\u0434\u0430\u0447\u0438",title:"xxxx \u0417\u0430\u0434\u0430\u0447\u0430",content:`\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438: xxxx
\u041E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0435 \u043B\u0438\u0446\u043E: xxxx
\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u0434\u0430\u0447: xxxx`}]},Ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project-task-template"},[s("div",{staticClass:"header"},[s("div",{staticClass:"title"},[t._v(" "+t._s(t.$L("\u4EFB\u52A1\u6A21\u677F"))+" "),t.loadIng>0?s("Loading"):t._e()],1),s("div",{staticClass:"actions"},[s("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.handleAdd}},[t._v(" "+t._s(t.$L("\u65B0\u5EFA\u6A21\u677F"))+" ")])],1)]),s("div",{staticClass:"content"},[t.templates.length?s("div",{staticClass:"template-list"},t._l(t.templates,function(a){return s("div",{key:a.id,staticClass:"template-item"},[s("div",{staticClass:"template-title"},[s("span",[t._v(t._s(a.name))]),a.is_default?s("span",{staticClass:"default-tag"},[t._v(t._s(t.$L("\u9ED8\u8BA4")))]):t._e()]),s("div",{staticClass:"template-content"},[a.title?s("div",{staticClass:"task-title"},[t._v(t._s(a.title))]):t._e(),a.content?s("div",{staticClass:"task-content"},[s("VMPreviewNostyle",{ref:"descPreview",refInFor:!0,attrs:{value:a.content}})],1):t._e()]),s("div",{staticClass:"template-actions"},[s("Button",{attrs:{type:"primary",icon:a.is_default?"md-checkmark":""},on:{click:function(n){return t.handleSetDefault(a)}}},[t._v(" "+t._s(t.$L(a.is_default?"\u53D6\u6D88\u9ED8\u8BA4":"\u8BBE\u4E3A\u9ED8\u8BA4"))+" ")]),s("Button",{attrs:{type:"primary"},on:{click:function(n){return t.handleEdit(a)}}},[t._v(" "+t._s(t.$L("\u7F16\u8F91"))+" ")]),s("Button",{attrs:{type:"error"},on:{click:function(n){return t.handleDelete(a)}}},[t._v(" "+t._s(t.$L("\u5220\u9664"))+" ")])],1)])}),0):s("div",{staticClass:"empty"},[s("div",{staticClass:"empty-text"},[t._v(t._s(t.$L("\u5F53\u524D\u9879\u76EE\u6682\u65E0\u4EFB\u52A1\u6A21\u677F")))]),s("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.handleAdd}},[t._v(t._s(t.$L("\u65B0\u5EFA\u6A21\u677F")))])],1)]),s("Modal",{attrs:{title:t.editingTemplate.id?t.$L("\u7F16\u8F91\u6A21\u677F"):t.$L("\u65B0\u5EFA\u6A21\u677F"),"mask-closable":!1},model:{value:t.showEditModal,callback:function(a){t.showEditModal=a},expression:"showEditModal"}},[s("Form",t._b({ref:"editForm",attrs:{model:t.editingTemplate,rules:t.formRules},nativeOn:{submit:function(a){a.preventDefault()}}},"Form",t.formOptions,!1),[s("FormItem",{attrs:{prop:"name",label:t.$L("\u6A21\u677F\u540D\u79F0")}},[s("Input",{ref:"templateName",attrs:{disabled:t.systemTemplateIsMultiple,placeholder:t.$L("\u8BF7\u8F93\u5165\u6A21\u677F\u540D\u79F0")},model:{value:t.editingTemplate.name,callback:function(a){t.$set(t.editingTemplate,"name",a)},expression:"editingTemplate.name"}})],1),s("FormItem",{attrs:{prop:"title",label:t.$L("\u4EFB\u52A1\u6807\u9898")}},[s("Input",{attrs:{disabled:t.systemTemplateIsMultiple,placeholder:t.$L("\u8BF7\u8F93\u5165\u4EFB\u52A1\u6807\u9898")},model:{value:t.editingTemplate.title,callback:function(a){t.$set(t.editingTemplate,"title",a)},expression:"editingTemplate.title"}})],1),s("FormItem",{attrs:{prop:"content",label:t.$L("\u4EFB\u52A1\u5185\u5BB9")}},[s("Input",{attrs:{type:"textarea",disabled:t.systemTemplateIsMultiple,placeholder:t.$L("\u8BF7\u8F93\u5165\u4EFB\u52A1\u5185\u5BB9"),autosize:{minRows:4,maxRows:12}},model:{value:t.editingTemplate.content,callback:function(a){t.$set(t.editingTemplate,"content",a)},expression:"editingTemplate.content"}})],1),t.editingTemplate.id?t._e():s("FormItem",[s("div",{staticClass:"project-task-template-system"},[t.systemTemplateShow?s("ul",[s("li",{class:{selected:t.systemTemplateIsMultiple},on:{click:function(a){t.systemTemplateIsMultiple=!t.systemTemplateIsMultiple}}},[s("i",{staticClass:"taskfont",domProps:{innerHTML:t._s(t.systemTemplateIsMultiple?"&#xe627;":"&#xe625;")}}),t._v(" "+t._s(t.$L("\u591A\u9009"))+" ")]),t._l(t.systemTemplateData,function(a,n){return s("li",{key:n,class:{selected:t.systemTemplateIsMultiple&&t.systemTemplateMultipleData.indexOf(a)!==-1},on:{click:function(i){return t.useSystemTemplate(a)}}},[t._v(t._s(a.name))])})],2):s("div",{staticClass:"tip-title",on:{click:t.onSystemTemplate}},[t._v(t._s(t.$L("\u4F7F\u7528\u793A\u4F8B\u6A21\u677F")))])])])],1),s("div",{staticClass:"adaption",attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"default"},on:{click:function(a){t.showEditModal=!1}}},[t._v(t._s(t.$L("\u53D6\u6D88")))]),s("Button",{attrs:{type:"primary",loading:t.loadIng>0},on:{click:t.handleSave}},[t._v(" "+t._s(t.$L("\u4FDD\u5B58"))+" "+t._s(t.systemTemplateIsMultiple&&t.systemTemplateMultipleData.length>0?` (${t.systemTemplateMultipleData.length})`:"")+" ")])],1)],1)],1)},jt=[];const Lt={name:"ProjectTaskTemplate",components:{VMPreviewNostyle:N},props:{projectId:{type:[Number,String],required:!0}},data(){return{loadIng:0,templates:[],showEditModal:!1,editingTemplate:this.getEmptyTemplate(),formRules:{name:[{required:!0,message:this.$L("\u8BF7\u8F93\u5165\u6A21\u677F\u540D\u79F0"),trigger:"blur"}]},systemTemplateShow:!1,systemTemplateData:[],systemTemplateIsMultiple:!1,systemTemplateMultipleData:[]}},computed:{...u(["formOptions"])},created(){this.loadTemplates()},watch:{showEditModal(t){t||(this.$refs.editForm.resetFields(),this.systemTemplateShow=!1,this.systemTemplateIsMultiple=!1)}},methods:{getEmptyTemplate(){return{id:null,project_id:this.projectId,name:"",title:"",content:"",is_default:!1}},async loadTemplates(){this.loadIng++;try{const{data:t}=await this.$store.dispatch("call",{url:"project/task/template_list",data:{project_id:this.projectId},spinner:300});this.templates=t||[]}catch({msg:t}){$A.messageError(t||"\u52A0\u8F7D\u6A21\u677F\u5931\u8D25")}finally{this.loadIng--}},handleAdd(){this.editingTemplate=this.getEmptyTemplate(),this.showEditModal=!0},handleEdit(t){this.editingTemplate={...t},this.showEditModal=!0},async handleSave(){if(!this.editingTemplate.name){$A.messageWarning("\u8BF7\u8F93\u5165\u6A21\u677F\u540D\u79F0");return}let t=[];if(this.systemTemplateIsMultiple){if(this.systemTemplateMultipleData.length===0){$A.messageWarning("\u8BF7\u9009\u62E9\u793A\u4F8B\u6A21\u677F");return}t=this.systemTemplateMultipleData.map(e=>{const s={...this.editingTemplate,id:null,name:e.name,title:e.title,content:e.content};return this.handleSaveCall(s)})}else t.push(this.handleSaveCall(this.editingTemplate));try{const e=await Promise.all(t);$A.messageSuccess(e.length===1?e[0].msg:"\u5168\u90E8\u4FDD\u5B58\u6210\u529F"),this.showEditModal=!1,this.loadTemplates()}catch(e){$A.messageError(e.msg||"\u4FDD\u5B58\u5931\u8D25")}},async handleSaveCall(t){this.loadIng++;try{return await this.$store.dispatch("call",{url:"project/task/template_save",data:t,method:"post",spinner:300})}finally{this.loadIng--}},async handleDelete(t){$A.modalConfirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u6A21\u677F\u5417\uFF1F",onOk:async()=>{this.loadIng++;try{const{msg:e}=await this.$store.dispatch("call",{url:"project/task/template_delete",data:{id:t.id},spinner:300});$A.messageSuccess(e||"\u5220\u9664\u6210\u529F"),this.loadTemplates()}catch({msg:e}){$A.messageError(e||"\u5220\u9664\u5931\u8D25")}finally{this.loadIng--}}})},async handleSetDefault(t){this.loadIng++;try{const{msg:e}=await this.$store.dispatch("call",{url:"project/task/template_default",data:{id:t.id,project_id:this.projectId},spinner:300});$A.messageSuccess(e||"\u8BBE\u7F6E\u6210\u529F"),this.loadTemplates()}catch({msg:e}){$A.messageError(e||"\u8BBE\u7F6E\u5931\u8D25")}finally{this.loadIng--}},onSystemTemplate(){const t=K();this.systemTemplateData=typeof _[t]=="undefined"?_.en:_[t],this.systemTemplateShow=!0},useSystemTemplate(t){if(this.editingTemplate.name=t.name,this.editingTemplate.title=t.title,this.editingTemplate.content=t.content,this.systemTemplateIsMultiple){const e=this.systemTemplateMultipleData.indexOf(t);e===-1?this.systemTemplateMultipleData.push(t):this.systemTemplateMultipleData.splice(e,1)}}}},C={};var Dt=x(Lt,Ct,jt,!1,It,null,null,null);function It(t){for(let e in C)this[e]=C[e]}var St=function(){return Dt.exports}(),At=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project-workflow"},[s("div",{staticClass:"workflow-title"},[t._v(" "+t._s(t.$L("\u5DE5\u4F5C\u6D41\u8BBE\u7F6E"))+" "),s("div",{staticClass:"title-icon"},[t.loadIng>0?s("Loading"):s("Icon",{attrs:{type:"ios-refresh"},on:{click:t.getData}})],1)]),t.list.length>0?s("div",{staticClass:"workflow-content"},[s("Collapse",{attrs:{accordion:""},model:{value:t.openIndex,callback:function(a){t.openIndex=a},expression:"openIndex"}},t._l(t.list,function(a){return s("Panel",{key:a.id,attrs:{name:"index_"+a.id}},[s("div",{staticClass:"workflow-item"},[s("div",{staticClass:"workflow-name"},[t._v(t._s(a.name))]),s("div",{staticClass:"workflow-status"},t._l(a.project_flow_item,function(n){return s("div",{class:n.status},[t._v(t._s(n.name))])}),0),s("div",{staticClass:"workflow-save",on:{click:function(n){n.stopPropagation()}}},[t.contrast(a.project_flow_item,a.project_flow_bak)?[s("Button",{attrs:{loading:t.loadIng>0,type:"primary"},on:{click:function(n){return t.onSave(a)}}},[t._v(t._s(t.$L("\u4FDD\u5B58")))]),a.id>0?s("Button",{attrs:{disabled:t.loadIng>0,type:"primary",ghost:""},on:{click:function(n){return t.onReduction(a,n)}}},[t._v(t._s(t.$L("\u8FD8\u539F")))]):t._e()]:t._e(),s("Button",{attrs:{disabled:t.loadIng>0,type:"error",ghost:""},on:{click:function(n){return t.onDelete(a)}}},[t._v(t._s(t.$L("\u5220\u9664")))])],2)]),s("div",{staticClass:"taskflow-config",attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"taskflow-config-table"},[s("div",{staticClass:"taskflow-config-table-left-container"},[s("div",{staticClass:"taskflow-config-table-column-header left-header"},[t._v(t._s(t.$L("\u914D\u7F6E\u9879")))]),s("div",{ref:`overlay_${a.id}`,refInFor:!0,staticClass:"taskflow-config-table-column-body"},[s("div",{staticClass:"taskflow-config-table-block"},[s("div",{staticClass:"taskflow-config-table-block-title"},[t._v(t._s(t.$L("\u8BBE\u7F6E\u72B6\u6001\u4E3A")))]),s("div",{staticClass:"taskflow-config-table-block-item"},[s("div",[s("div",{staticClass:"title"},[t._v(t._s(t.$L("\u5F00\u59CB\u72B6\u6001")))]),s("div",{staticClass:"subtitle"},[t._v(t._s(t.$L("\u65B0\u5EFA\u4EFB\u52A1\u9ED8\u8BA4\u72B6\u6001")))])])]),s("div",{staticClass:"taskflow-config-table-block-item"},[s("div",[s("div",{staticClass:"title"},[t._v(t._s(t.$L("\u8FDB\u884C\u4E2D")))]),s("div",{staticClass:"subtitle"},[t._v(t._s(t.$L("\u53EF\u8BBE\u7F6E\u591A\u4E2A\u72B6\u6001\u4E3A\u8FDB\u884C\u4E2D")))])])]),s("div",{staticClass:"taskflow-config-table-block-item"},[s("div",[s("div",{staticClass:"title"},[t._v(t._s(t.$L("\u9A8C\u6536/\u6D4B\u8BD5")))]),s("div",{staticClass:"subtitle"},[t._v(t._s(t.$L("\u53EA\u80FD\u8BBE\u7F6E\u5355\u4E2A\u72B6\u6001\u4E3A\u9A8C\u6536/\u6D4B\u8BD5")))])])]),s("div",{staticClass:"taskflow-config-table-block-item"},[s("div",[s("div",{staticClass:"title"},[t._v(t._s(t.$L("\u7ED3\u675F\u72B6\u6001")))]),s("div",{staticClass:"subtitle"},[t._v(t._s(t.$L("\u8BE5\u72B6\u6001\u4E0B\u4EFB\u52A1\u81EA\u52A8\u6807\u8BB0\u5B8C\u6210")))])])])]),s("div",{staticClass:"taskflow-config-table-block hr"},[s("div",{staticClass:"taskflow-config-table-block-title"},[t._v(t._s(t.$L("\u53EF\u6D41\u8F6C\u5230")))]),t._l(a.project_flow_item,function(n){return s("div",{staticClass:"taskflow-config-table-block-item"},[s("span",{staticClass:"transform-status-name"},[t._v(t._s(n.name))])])})],2)])]),s("div",{staticClass:"taskflow-config-table-right-container"},[s("Draggable",{staticClass:"taskflow-config-table-list-wrapper",attrs:{list:a.project_flow_item,animation:150,disabled:t.$isEEUiApp||t.windowTouch,tag:"div",draggable:".column-border"},on:{sort:function(n){}}},[t._l(a.project_flow_item,function(n){return s("div",{staticClass:"taskflow-config-table-status-column column-border",class:n.status},[s("div",{staticClass:"taskflow-config-table-status-item taskflow-config-table-column-header"},[s("div",{staticClass:"status-label-with-menu",class:n.status},[s("div",{staticClass:"name"},[t._v(t._s(t.$L(n.name)))]),s("EDropdown",{staticClass:"more",class:{opacity:n.userids.length>0||n.columnid>0},attrs:{trigger:"click"},on:{command:function(i){return t.onMore(i,n)}}},[s("div",{staticClass:"more-icon"},[s("Badge",{attrs:{dot:n.userids.length>0||n.columnid>0}},[s("Icon",{attrs:{type:"ios-more"}})],1)],1),s("EDropdownMenu",{staticClass:"taskflow-config-more-dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[n.userids.length>0?s("EDropdownItem",{attrs:{command:"user"}},[s("div",{staticClass:"users"},t._l(n.userids,function(i,o){return s("UserAvatar",{key:o,attrs:{userid:i,size:28,borderWitdh:1,showName:n.userids.length===1}})}),1)]):t._e(),s("EDropdownItem",{attrs:{command:"user"}},[s("div",{staticClass:"item"},[s("Icon",{attrs:{type:"md-settings"}}),s("Badge",{attrs:{dot:n.userids.length>0||n.columnid>0}},[t._v(" "+t._s(t.$L("\u72B6\u6001\u8BBE\u7F6E"))+" ")])],1)]),s("EDropdownItem",{attrs:{command:"name"}},[s("div",{staticClass:"item"},[s("Icon",{attrs:{type:"md-create"}}),t._v(t._s(t.$L("\u4FEE\u6539\u540D\u79F0"))+" ")],1)]),s("EDropdownItem",{attrs:{command:"remove"}},[s("div",{staticClass:"item delete"},[s("Icon",{attrs:{type:"md-trash"}}),t._v(t._s(t.$L("\u5220\u9664"))+" ")],1)])],1)],1)],1)]),s("div",{ref:`overlay_${a.id}`,refInFor:!0,staticClass:"taskflow-config-table-column-body"},[s("div",{staticClass:"taskflow-config-table-block"},[s("div",{staticClass:"taskflow-config-table-block-title"}),s("RadioGroup",{model:{value:n.status,callback:function(i){t.$set(n,"status",i)},expression:"item.status"}},[s("Radio",{attrs:{label:"start"}},[s("span")]),s("Radio",{attrs:{label:"progress"}},[s("span")]),s("Radio",{attrs:{label:"test"}},[s("span")]),s("Radio",{attrs:{label:"end"}},[s("span")])],1)],1),s("div",{staticClass:"taskflow-config-table-block"},[s("div",{staticClass:"taskflow-config-table-block-title"}),s("CheckboxGroup",{on:{"on-change":function(i){return t.onTurns(n)}},model:{value:n.turns,callback:function(i){t.$set(n,"turns",i)},expression:"item.turns"}},t._l(a.project_flow_item,function(i){return s("Checkbox",{key:i.id,attrs:{label:i.id,disabled:i.id==n.id}},[s("span")])}),1)],1)])])}),s("div",{staticClass:"taskflow-config-table-status-column addnew",on:{click:function(n){return t.onAdd(a)}}},[t._v(t._s(t.$L("\u6DFB\u52A0\u72B6\u6001")))])],2)],1)])])])}),1)],1):t.loadIng==0?s("div",{staticClass:"workflow-no"},[t._v(" "+t._s(t.$L("\u5F53\u524D\u9879\u76EE\u8FD8\u6CA1\u6709\u521B\u5EFA\u5DE5\u4F5C\u6D41"))+" "),s("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.onCreate}},[t._v(t._s(t.$L("\u521B\u5EFA\u5DE5\u4F5C\u6D41")))])],1):t._e(),s("Modal",{attrs:{styles:{width:"90%",maxWidth:"640px"},title:`${t.$L("\u72B6\u6001\u8BBE\u7F6E")} (${t.settingData.name})`,"mask-closable":!1},model:{value:t.userShow,callback:function(a){t.userShow=a},expression:"userShow"}},[s("Form",t._b({attrs:{model:t.settingData},nativeOn:{submit:function(a){a.preventDefault()}}},"Form",t.formOptions,!1),[s("div",{staticClass:"workflow-setting-box"},[s("h3",[t._v(t._s(t.$L("\u72B6\u6001\u8D1F\u8D23\u4EBA")))]),s("div",{staticClass:"form-box"},[s("FormItem",{attrs:{prop:"userids",label:t.$L("\u72B6\u6001\u8D1F\u8D23\u4EBA")}},[s("UserSelect",{attrs:{"project-id":t.projectId,"multiple-max":5,title:t.$L("\u9009\u62E9\u72B6\u6001\u8D1F\u8D23\u4EBA")},model:{value:t.settingData.userids,callback:function(a){t.$set(t.settingData,"userids",a)},expression:"settingData.userids"}})],1),s("FormItem",{attrs:{prop:"usertype",label:t.$L("\u6D41\u8F6C\u6A21\u5F0F")}},[s("RadioGroup",{model:{value:t.settingData.usertype,callback:function(a){t.$set(t.settingData,"usertype",a)},expression:"settingData.usertype"}},[s("Radio",{attrs:{label:"add"}},[t._v(t._s(t.$L("\u6DFB\u52A0\u6A21\u5F0F")))]),s("Radio",{attrs:{label:"replace"}},[t._v(t._s(t.$L("\u6D41\u8F6C\u6A21\u5F0F")))]),s("Radio",{attrs:{label:"merge"}},[t._v(t._s(t.$L("\u5254\u9664\u6A21\u5F0F")))])],1),t.settingData.usertype=="replace"?s("div",{staticClass:"form-tip"},[t._v(t._s(t.$L(`\u6D41\u8F6C\u5230\u3010${t.settingData.name}\u3011\u65F6\u6539\u53D8\u4EFB\u52A1\u8D1F\u8D23\u4EBA\u4E3A\u72B6\u6001\u8D1F\u8D23\u4EBA\uFF0C\u539F\u672C\u7684\u4EFB\u52A1\u8D1F\u8D23\u4EBA\u79FB\u81F3\u534F\u52A9\u4EBA\u5458\u3002`)))]):t.settingData.usertype=="merge"?s("div",{staticClass:"form-tip"},[t._v(t._s(t.$L(`\u6D41\u8F6C\u5230\u3010${t.settingData.name}\u3011\u65F6\u6539\u53D8\u4EFB\u52A1\u8D1F\u8D23\u4EBA\u4E3A\u72B6\u6001\u8D1F\u8D23\u4EBA\uFF08\u5E76\u4FDD\u7559\u64CD\u4F5C\u72B6\u6001\u7684\u4EBA\u5458\uFF09\uFF0C\u539F\u672C\u7684\u4EFB\u52A1\u8D1F\u8D23\u4EBA\u79FB\u81F3\u534F\u52A9\u4EBA\u5458\u3002`)))]):s("div",{staticClass:"form-tip"},[t._v(t._s(t.$L(`\u6D41\u8F6C\u5230\u3010${t.settingData.name}\u3011\u65F6\u6DFB\u52A0\u72B6\u6001\u8D1F\u8D23\u4EBA\u81F3\u4EFB\u52A1\u8D1F\u8D23\u4EBA\u3002`)))])],1),s("FormItem",{attrs:{prop:"userlimit",label:t.$L("\u9650\u5236\u8D1F\u8D23\u4EBA")}},[s("iSwitch",{attrs:{"true-value":1,"false-value":0},model:{value:t.settingData.userlimit,callback:function(a){t.$set(t.settingData,"userlimit",a)},expression:"settingData.userlimit"}}),t.settingData.userlimit===1?s("div",{staticClass:"form-tip"},[t._v(t._s(t.$L(`\u6D41\u8F6C\u5230\u3010${t.settingData.name}\u3011\u65F6\uFF0C[\u4EFB\u52A1\u8D1F\u8D23\u4EBA] \u548C [\u9879\u76EE\u7BA1\u7406\u5458] \u53EF\u4EE5\u4FEE\u6539\u72B6\u6001\u3002`)))]):s("div",{staticClass:"form-tip"},[t._v(t._s(t.$L(`\u6D41\u8F6C\u5230\u3010${t.settingData.name}\u3011\u65F6\uFF0C[\u4EFB\u52A1\u8D1F\u8D23\u4EBA] \u548C [\u9879\u76EE\u7BA1\u7406\u5458] \u53EF\u4EE5\u4FEE\u6539\u72B6\u6001\u3002`)))])],1)],1)]),s("div",{staticClass:"workflow-setting-box"},[s("h3",[t._v(t._s(t.$L("\u5173\u8054\u5217\u8868")))]),s("div",{staticClass:"form-box"},[s("FormItem",{attrs:{prop:"usertype",label:t.$L("\u5173\u8054\u5217\u8868")}},[s("Select",{attrs:{placeholder:t.$L("\u9009\u62E9\u5173\u8054\u5217\u8868"),transfer:""},model:{value:t.settingData.columnid,callback:function(a){t.$set(t.settingData,"columnid",a)},expression:"settingData.columnid"}},t._l(t.columnList,function(a,n){return s("Option",{key:n,attrs:{value:a.id}},[t._v(t._s(a.name))])}),1),s("div",{staticClass:"form-tip"},[t._v(" "+t._s(t.$L(`\u6D41\u8F6C\u5230\u3010${t.settingData.name}\u3011\u65F6\u81EA\u52A8\u5C06\u4EFB\u52A1\u79FB\u52A8\u81F3\u5173\u8054\u5217\u8868\u3002`))+" "),t.settingData.columnid?s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){t.settingData.columnid=0}}},[t._v(t._s(t.$L("\u53D6\u6D88\u5173\u8054")))]):t._e()])],1)],1)])]),s("div",{staticClass:"adaption",attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"default"},on:{click:function(a){t.userShow=!1}}},[t._v(t._s(t.$L("\u53D6\u6D88")))]),s("Button",{attrs:{type:"primary"},on:{click:t.onUser}},[t._v(t._s(t.$L("\u4FDD\u5B58")))])],1)],1)],1)},Pt=[];const Mt={name:"ProjectWorkflow",components:{UserSelect:W,Draggable:F},props:{projectId:{type:Number,default:0}},data(){return{loadIng:0,list:[],openIndex:"",userShow:!1,settingData:{}}},mounted(){},computed:{...u(["cacheColumns","formOptions"]),columnList({projectId:t,cacheColumns:e}){return e.filter(({project_id:s})=>s==t).sort((s,a)=>s.sort!=a.sort?s.sort-a.sort:s.id-a.id).map(s=>({id:s.id,name:s.name}))}},watch:{projectId:{handler(t){t&&this.getData()},immediate:!0}},methods:{getData(){this.loadIng++,this.$store.dispatch("call",{url:"project/flow/list",data:{project_id:this.projectId}}).then(({data:t})=>{this.list=t.map(e=>(e.project_flow_bak=JSON.stringify(e.project_flow_item),e)),this.openIndex=this.list.length===1?"index_"+this.list[0].id:"",this.$nextTick(this.syncScroller)}).catch(({msg:t})=>{$A.modalError(t)}).finally(t=>{this.loadIng--})},syncScroller(){this.list.some(t=>{this.$refs[`overlay_${t.id}`]&&this.$refs[`overlay_${t.id}`].some(e=>{Object.keys(e.attributes).includes("sync-scroller")||(e.setAttribute("sync-scroller",!0),e.addEventListener("scroll",({target:s})=>{let a=s.scrollTop,n=s.scrollLeft;this.$nextTick(()=>{this.$refs[`overlay_${t.id}`].some(i=>{i!=e&&i.scrollTo(n,a)})})}))})})},contrast(t,e){return JSON.stringify(t)!=e},existDiff(){return!!this.list.find(t=>this.contrast(t.project_flow_item,t.project_flow_bak))},onCreate(){let t=-1*$A.randNum(1e3,1e4);this.list.push({id:t,name:"Default",project_flow_item:[{id:-10,name:this.$L("\u5F85\u5904\u7406"),status:"start",turns:[-10,-11,-12,-13,-14],userids:[],usertype:"add",userlimit:0,columnid:0},{id:-11,name:this.$L("\u8FDB\u884C\u4E2D"),status:"progress",turns:[-10,-11,-12,-13,-14],userids:[],usertype:"add",userlimit:0,columnid:0},{id:-12,name:this.$L("\u5F85\u6D4B\u8BD5"),status:"test",turns:[-10,-11,-12,-13,-14],userids:[],usertype:"add",userlimit:0,columnid:0},{id:-13,name:this.$L("\u5DF2\u5B8C\u6210"),status:"end",turns:[-10,-11,-12,-13,-14],userids:[],usertype:"add",userlimit:0,columnid:0},{id:-14,name:this.$L("\u5DF2\u53D6\u6D88"),status:"end",turns:[-10,-11,-12,-13,-14],userids:[],usertype:"add",userlimit:0,columnid:0}]}),this.openIndex="index_"+t,this.$nextTick(this.syncScroller)},onDelete(t){$A.modalConfirm({title:"\u5220\u9664\u5DE5\u4F5C\u6D41",content:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5DE5\u4F5C\u6D41\u5417\uFF1F",loading:!0,onOk:()=>{if(t.id>0)return new Promise((s,a)=>{this.loadIng++,this.$store.dispatch("call",{url:"project/flow/delete",data:{project_id:this.projectId}}).then(({msg:n})=>{s(n);let i=this.list.findIndex(({id:o})=>o==t.id);i>-1&&this.list.splice(i,1)}).catch(({msg:n})=>{a(n)}).finally(n=>{this.loadIng--})});const e=this.list.findIndex(({id:s})=>s==t.id);e>-1&&this.list.splice(e,1)}})},onMore(t,e){switch(t){case"user":this.$set(this.settingData,"id",e.id),this.$set(this.settingData,"name",e.name),this.$set(this.settingData,"userids",e.userids),this.$set(this.settingData,"usertype",e.usertype),this.$set(this.settingData,"userlimit",e.userlimit),this.$set(this.settingData,"columnid",e.columnid),this.userShow=!0;break;case"name":this.onName(e);break;case"remove":this.onRemove(e);break}},onUser(){this.userShow=!1,this.list.some(t=>{let e=t.project_flow_item.find(s=>s.id==this.settingData.id);e&&(this.$set(e,"userids",this.settingData.userids),this.$set(e,"usertype",this.settingData.usertype),this.$set(e,"userlimit",this.settingData.userlimit),this.$set(e,"columnid",this.settingData.columnid))})},onName(t){$A.modalInput({value:t.name,title:"\u4FEE\u6539\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u6D41\u7A0B\u540D\u79F0",onOk:e=>{if(!e)return"\u8BF7\u8F93\u5165\u6D41\u7A0B\u540D\u79F0";this.$set(t,"name",e)}})},onRemove(t){this.list.some(e=>{let s=e.project_flow_item.findIndex(({id:a})=>a==t.id);s>-1&&e.project_flow_item.splice(s,1)})},onTurns(t){this.$set(t,"turns",t.turns.sort())},onAdd(t){$A.modalInput({title:"\u6DFB\u52A0\u72B6\u6001",placeholder:"\u8BF7\u8F93\u5165\u72B6\u6001\u540D\u79F0",onOk:e=>{if(!e)return"\u8BF7\u8F93\u5165\u72B6\u6001\u540D\u79F0";const s=$A.randNum(1e5,999999)*-1,a=t.project_flow_item.map(({id:n})=>n);t.project_flow_item.push({id:s,name:e,status:"end",turns:a,userids:[],usertype:"add",userlimit:0,columnid:0}),t.project_flow_item.some(n=>{n.turns.push(s)})}})},onReduction(t){this.$set(t,"project_flow_item",JSON.parse(t.project_flow_bak))},onSave(t){let e=0;t.project_flow_item.some(s=>{s.sort=e++}),this.loadIng++,this.$store.dispatch("call",{url:"project/flow/save",data:{project_id:this.projectId,flows:t.project_flow_item},method:"post"}).then(({data:s,msg:a})=>{$.messageSuccess(a),s.project_flow_bak=JSON.stringify(s.project_flow_item);let n=this.list.findIndex(({id:i})=>i==t.id);n>-1?this.list.splice(n,1,s):this.list.push(s),this.openIndex="index_"+s.id,this.$nextTick(this.syncScroller)}).catch(({msg:s})=>{$A.modalError(s)}).finally(s=>{this.loadIng--})},saveAll(){this.list.some(t=>{this.contrast(t.project_flow_item,t.project_flow_bak)&&this.onSave(t)})}}},j={};var Et=x(Mt,At,Pt,!1,Ft,null,null,null);function Ft(t){for(let e in j)this[e]=j[e]}var Ot=function(){return Et.exports}(),Rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project-permission"},[s("div",{staticClass:"permission-title"},[t._v(" "+t._s(t.$L("\u6743\u9650\u8BBE\u7F6E"))+" "),s("div",{staticClass:"title-icon"},[t.loadIng>0?s("Loading"):s("Icon",{attrs:{type:"ios-refresh"},on:{click:function(a){return t.getData()}}})],1)]),s("div",{staticClass:"permission-content"},[s("Form",t._b({attrs:{model:t.formData},nativeOn:{submit:function(a){a.preventDefault()}}},"Form",t.formOptions,!1),[s("div",{staticClass:"block-setting-box"},[s("h3",[t._v(t._s(t.$L("\u4EFB\u52A1\u5217\u6743\u9650")))]),s("div",{staticClass:"form-box"},[s("FormItem",{attrs:{label:t.$L("\u6DFB\u52A0\u5217")}},[s("CheckboxGroup",{model:{value:t.formData.task_list_add,callback:function(a){t.$set(t.formData,"task_list_add",a)},expression:"formData.task_list_add"}},[s("Checkbox",{attrs:{label:1,disabled:""}},[t._v(t._s(t.$L("\u9879\u76EE\u8D1F\u8D23\u4EBA")))]),s("Checkbox",{attrs:{label:2}},[t._v(t._s(t.$L("\u9879\u76EE\u6210\u5458")))])],1)],1),s("FormItem",{attrs:{label:t.$L("\u4FEE\u6539\u5217")}},[s("CheckboxGroup",{model:{value:t.formData.task_list_update,callback:function(a){t.$set(t.formData,"task_list_update",a)},expression:"formData.task_list_update"}},[s("Checkbox",{attrs:{label:1,disabled:""}},[t._v(t._s(t.$L("\u9879\u76EE\u8D1F\u8D23\u4EBA")))]),s("Checkbox",{attrs:{label:2}},[t._v(t._s(t.$L("\u9879\u76EE\u6210\u5458")))])],1)],1),s("FormItem",{attrs:{label:t.$L("\u5220\u9664\u5217")}},[s("CheckboxGroup",{model:{value:t.formData.task_list_remove,callback:function(a){t.$set(t.formData,"task_list_remove",a)},expression:"formData.task_list_remove"}},[s("Checkbox",{attrs:{label:1,disabled:""}},[t._v(t._s(t.$L("\u9879\u76EE\u8D1F\u8D23\u4EBA")))]),s("Checkbox",{attrs:{label:2}},[t._v(t._s(t.$L("\u9879\u76EE\u6210\u5458")))])],1)],1),s("FormItem",{attrs:{label:t.$L("\u6392\u5E8F\u5217")}},[s("CheckboxGroup",{model:{value:t.formData.task_list_sort,callback:function(a){t.$set(t.formData,"task_list_sort",a)},expression:"formData.task_list_sort"}},[s("Checkbox",{attrs:{label:1,disabled:""}},[t._v(t._s(t.$L("\u9879\u76EE\u8D1F\u8D23\u4EBA")))]),s("Checkbox",{attrs:{label:2}},[t._v(t._s(t.$L("\u9879\u76EE\u6210\u5458")))])],1)],1)],1)]),s("div",{staticClass:"block-setting-box"},[s("h3",[t._v(t._s(t.$L("\u4EFB\u52A1\u6743\u9650")))]),s("div",{staticClass:"form-box"},[s("FormItem",{attrs:{label:t.$L("\u6DFB\u52A0\u4EFB\u52A1")}},[s("CheckboxGroup",{model:{value:t.formData.task_add,callback:function(a){t.$set(t.formData,"task_add",a)},expression:"formData.task_add"}},[s("Checkbox",{attrs:{label:1,disabled:""}},[t._v(t._s(t.$L("\u9879\u76EE\u8D1F\u8D23\u4EBA")))]),s("Checkbox",{attrs:{label:2}},[t._v(t._s(t.$L("\u9879\u76EE\u6210\u5458")))])],1)],1),s("FormItem",{attrs:{label:t.$L("\u4FEE\u6539\u4EFB\u52A1")}},[s("CheckboxGroup",{model:{value:t.formData.task_update,callback:function(a){t.$set(t.formData,"task_update",a)},expression:"formData.task_update"}},[s("Checkbox",{attrs:{label:1,disabled:""}},[t._v(t._s(t.$L("\u9879\u76EE\u8D1F\u8D23\u4EBA")))]),s("Checkbox",{attrs:{label:3}},[t._v(t._s(t.$L("\u4EFB\u52A1\u8D1F\u8D23\u4EBA")))]),s("Checkbox",{attrs:{label:4}},[t._v(t._s(t.$L("\u4EFB\u52A1\u534F\u52A9\u4EBA")))]),s("Checkbox",{attrs:{label:2}},[t._v(t._s(t.$L("\u9879\u76EE\u6210\u5458")))])],1)],1),s("FormItem",{attrs:{label:t.$L("\u4FEE\u6539\u65F6\u95F4")}},[s("CheckboxGroup",{model:{value:t.formData.task_time,callback:function(a){t.$set(t.formData,"task_time",a)},expression:"formData.task_time"}},[s("Checkbox",{attrs:{label:1,disabled:""}},[t._v(t._s(t.$L("\u9879\u76EE\u8D1F\u8D23\u4EBA")))]),s("Checkbox",{attrs:{label:3}},[t._v(t._s(t.$L("\u4EFB\u52A1\u8D1F\u8D23\u4EBA")))]),s("Checkbox",{attrs:{label:4}},[t._v(t._s(t.$L("\u4EFB\u52A1\u534F\u52A9\u4EBA")))]),s("Checkbox",{attrs:{label:2}},[t._v(t._s(t.$L("\u9879\u76EE\u6210\u5458")))])],1)],1),s("FormItem",{attrs:{label:t.$L("\u4FEE\u6539\u72B6\u6001")}},[s("CheckboxGroup",{model:{value:t.formData.task_status,callback:function(a){t.$set(t.formData,"task_status",a)},expression:"formData.task_status"}},[s("Checkbox",{attrs:{label:1,disabled:""}},[t._v(t._s(t.$L("\u9879\u76EE\u8D1F\u8D23\u4EBA")))]),s("Checkbox",{attrs:{label:3}},[t._v(t._s(t.$L("\u4EFB\u52A1\u8D1F\u8D23\u4EBA")))]),s("Checkbox",{attrs:{label:4}},[t._v(t._s(t.$L("\u4EFB\u52A1\u534F\u52A9\u4EBA")))]),s("Checkbox",{attrs:{label:2}},[t._v(t._s(t.$L("\u9879\u76EE\u6210\u5458")))])],1)],1),s("FormItem",{attrs:{label:t.$L("\u5F52\u6863\u4EFB\u52A1")}},[s("CheckboxGroup",{model:{value:t.formData.task_archived,callback:function(a){t.$set(t.formData,"task_archived",a)},expression:"formData.task_archived"}},[s("Checkbox",{attrs:{label:1,disabled:""}},[t._v(t._s(t.$L("\u9879\u76EE\u8D1F\u8D23\u4EBA")))]),s("Checkbox",{attrs:{label:3}},[t._v(t._s(t.$L("\u4EFB\u52A1\u8D1F\u8D23\u4EBA")))]),s("Checkbox",{attrs:{label:4}},[t._v(t._s(t.$L("\u4EFB\u52A1\u534F\u52A9\u4EBA")))]),s("Checkbox",{attrs:{label:2}},[t._v(t._s(t.$L("\u9879\u76EE\u6210\u5458")))])],1)],1),s("FormItem",{attrs:{label:t.$L("\u5220\u9664\u4EFB\u52A1")}},[s("CheckboxGroup",{model:{value:t.formData.task_remove,callback:function(a){t.$set(t.formData,"task_remove",a)},expression:"formData.task_remove"}},[s("Checkbox",{attrs:{label:1,disabled:""}},[t._v(t._s(t.$L("\u9879\u76EE\u8D1F\u8D23\u4EBA")))]),s("Checkbox",{attrs:{label:3}},[t._v(t._s(t.$L("\u4EFB\u52A1\u8D1F\u8D23\u4EBA")))]),s("Checkbox",{attrs:{label:4}},[t._v(t._s(t.$L("\u4EFB\u52A1\u534F\u52A9\u4EBA")))]),s("Checkbox",{attrs:{label:2}},[t._v(t._s(t.$L("\u9879\u76EE\u6210\u5458")))])],1)],1),s("FormItem",{attrs:{label:t.$L("\u79FB\u52A8\u4EFB\u52A1")}},[s("CheckboxGroup",{model:{value:t.formData.task_move,callback:function(a){t.$set(t.formData,"task_move",a)},expression:"formData.task_move"}},[s("Checkbox",{attrs:{label:1,disabled:""}},[t._v(t._s(t.$L("\u9879\u76EE\u8D1F\u8D23\u4EBA")))]),s("Checkbox",{attrs:{label:3}},[t._v(t._s(t.$L("\u4EFB\u52A1\u8D1F\u8D23\u4EBA")))]),s("Checkbox",{attrs:{label:4}},[t._v(t._s(t.$L("\u4EFB\u52A1\u534F\u52A9\u4EBA")))]),s("Checkbox",{attrs:{label:2}},[t._v(t._s(t.$L("\u9879\u76EE\u6210\u5458")))])],1)],1)],1)])])],1),s("div",{staticClass:"project-permission-footer",attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"primary",loading:t.loadIng>0},on:{click:t.updateData}},[t._v(t._s(t.$L("\u4FEE\u6539")))]),s("Button",{attrs:{type:"default"},on:{click:t.onClose}},[t._v(t._s(t.$L("\u53D6\u6D88")))])],1)])},zt=[];const Wt={name:"ProjectPermission",props:{projectId:{type:Number,default:0}},data(){return{loadIng:0,formData:{project_task_list:[],task_add:[],task_update:[],task_time:[],task_status:[],task_archived:[],task_remove:[],task_move:[]}}},watch:{projectId:{handler(t){t&&this.getData()},immediate:!0}},computed:{...u(["formOptions"])},methods:{getData(){this.loadIng++,this.$store.dispatch("call",{url:"project/permission",data:{project_id:this.projectId}}).then(({data:t})=>{this.formData=t.permissions}).catch(({msg:t})=>{$A.modalError(t)}).finally(t=>{this.loadIng--})},updateData(){this.loadIng++,this.$store.dispatch("call",{url:"project/permission/update",method:"post",data:{project_id:this.projectId,...this.formData}}).then(({data:t})=>{this.formData=t.permissions,this.$Message.success(this.$L("\u4FEE\u6539\u6210\u529F"))}).catch(({msg:t})=>{$A.modalError(t)}).finally(t=>{this.loadIng--})},onClose(){this.$emit("close")}}},L={};var Bt=x(Wt,Rt,zt,!1,Nt,null,null,null);function Nt(t){for(let e in L)this[e]=L[e]}var Vt=function(){return Bt.exports}(),Ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task-deleted"},[s("div",{staticClass:"deleted-title"},[t._v(" "+t._s(t.$L("\u5220\u9664\u7684\u4EFB\u52A1"))+" "),s("div",{staticClass:"title-icon"},[t.loadIng>0?s("Loading"):t._e()],1)]),s("div",{staticClass:"search-container lr"},[s("ul",[s("li",[s("div",{staticClass:"search-label"},[t._v(" "+t._s(t.$L("\u5173\u952E\u8BCD"))+" ")]),s("div",{staticClass:"search-content"},[s("Input",{attrs:{placeholder:t.$L("ID\u3001\u4EFB\u52A1\u540D..."),clearable:""},model:{value:t.keys.name,callback:function(a){t.$set(t.keys,"name",a)},expression:"keys.name"}})],1)]),s("li",{staticClass:"search-button"},[s("Tooltip",{attrs:{theme:"light",placement:"right","transfer-class-name":"search-button-clear",transfer:""}},[s("Button",{attrs:{loading:t.loadIng>0,type:"primary",icon:"ios-search"},on:{click:t.onSearch}},[t._v(t._s(t.$L("\u641C\u7D22")))]),s("div",{attrs:{slot:"content"},slot:"content"},[t.keyIs?s("Button",{attrs:{type:"text"},on:{click:function(a){t.keyIs=!1}}},[t._v(t._s(t.$L("\u53D6\u6D88\u7B5B\u9009")))]):s("Button",{attrs:{loading:t.loadIng>0,type:"text"},on:{click:t.getLists}},[t._v(t._s(t.$L("\u5237\u65B0")))])],1)],1)],1)])]),s("div",{staticClass:"table-page-box"},[s("Table",{attrs:{columns:t.columns,data:t.list,loading:t.loadIng>0,"no-data-text":t.$L(t.noText),stripe:""}}),s("Page",{attrs:{total:t.total,current:t.page,"page-size":t.pageSize,disabled:t.loadIng>0,simple:t.windowPortrait,"page-size-opts":[10,20,30,50,100],"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.setPage,"on-page-size-change":t.setPageSize}})],1)])},Ht=[];const Kt={name:"TaskDeleted",props:{projectId:{type:Number,default:0}},data(){return{loadIng:0,keys:{},keyIs:!1,columns:[{title:"ID",key:"id",width:80,render:(t,{row:e,column:s})=>t("TableAction",{props:{column:s,align:"left"}},[t("div",e.id)])},{title:this.$L("\u4EFB\u52A1\u540D\u79F0"),key:"name",minWidth:200,render:(t,{row:e})=>t("AutoTip",e.name)},{title:this.$L("\u521B\u5EFA\u65F6\u95F4"),key:"created_at",width:168},{title:this.$L("\u5220\u9664\u65F6\u95F4"),key:"deleted_at",width:168},{title:this.$L("\u5220\u9664\u4EBA\u5458"),key:"deleted_userid",minWidth:100,render:(t,{row:e})=>e.deleted_userid?t("UserAvatar",{props:{userid:e.deleted_userid,size:24,showName:!0}}):t("span","-")},{title:this.$L("\u64CD\u4F5C"),align:"center",width:100,render:(t,e)=>{const s=[t("Poptip",{props:{title:this.$L("\u4F60\u786E\u5B9A\u8981\u8FD8\u539F\u5220\u9664\u5417\uFF1F"),confirm:!0,transfer:!0,placement:"left",okText:this.$L("\u786E\u5B9A"),cancelText:this.$L("\u53D6\u6D88")},style:{fontSize:"13px",cursor:"pointer",color:"#84C56A"},on:{"on-ok":()=>{this.recovery(e.row)}}},this.$L("\u8FD8\u539F"))];return t("TableAction",{props:{column:e.column}},s)}}],list:[],page:1,pageSize:20,total:0,noText:""}},mounted(){},computed:{...u(["cacheTasks"])},watch:{projectId:{handler(){this.getLists()},immediate:!0},keyIs(t){t||(this.keys={},this.setPage(1))}},methods:{onSearch(){this.page=1,this.getLists()},getLists(){!this.projectId||(this.loadIng++,this.keyIs=$A.objImplode(this.keys)!="",this.$store.dispatch("call",{url:"project/task/lists",data:{keys:this.keys,project_id:this.projectId,parent_id:-1,deleted:"yes",sorts:{deleted_at:"desc"},page:Math.max(this.page,1),pagesize:Math.max($A.runNum(this.pageSize),10)}}).then(({data:t})=>{this.page=t.current_page,this.total=t.total,this.list=t.data,this.noText="\u6CA1\u6709\u76F8\u5173\u7684\u6570\u636E"}).catch(()=>{this.noText="\u6570\u636E\u52A0\u8F7D\u5931\u8D25"}).finally(t=>{this.loadIng--}))},setPage(t){this.page=t,this.getLists()},setPageSize(t){this.page=1,this.pageSize=t,this.getLists()},recovery(t){this.list=this.list.filter(({id:e})=>e!=t.id),this.loadIng++,this.$store.dispatch("removeTask",{task_id:t.id,type:"recovery"}).then(({msg:e})=>{$A.messageSuccess(e),this.loadIng--,this.getLists(),this.$store.dispatch("openTask",t)}).catch(({msg:e})=>{$A.modalError(e),this.loadIng--,this.getLists()})}}},D={};var Gt=x(Kt,Ut,Ht,!1,Yt,null,null,null);function Yt(t){for(let e in D)this[e]=D[e]}var Jt=function(){return Gt.exports}(),Xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"common-gantt"},[s("div",{staticClass:"gantt-left",style:t.leftStyle},[s("div",{staticClass:"gantt-title"},[s("div",{staticClass:"gantt-title-text"},[t._v(t._s(t.$L("\u4EFB\u52A1\u540D\u79F0")))]),s("div",{staticClass:"gantt-title-right"},[t._t("titleTool")],2)]),s("ul",{ref:"ganttItem",staticClass:"gantt-item",on:{scroll:t.itemScrollListener,mouseenter:function(a){t.mouseType="item"}}},t._l(t.lists,function(a,n){return s("li",{key:n,on:{click:function(i){return t.clickItem(a,n)}}},[a.overdue?s("div",{staticClass:"item-overdue"},[t._v(t._s(t.$L("\u5DF2\u8D85\u671F")))]):t._e(),s("div",{staticClass:"item-title",class:{complete:a.complete,overdue:a.overdue}},[t._v(t._s(a.label))]),s("Icon",{staticClass:"item-icon",attrs:{type:"ios-locate-outline"},on:{click:function(i){return i.stopPropagation(),t.scrollPosition(n)}}})],1)}),0)]),s("div",{ref:"ganttRight",staticClass:"gantt-right"},[s("div",{staticClass:"gantt-size",on:{click:function(a){t.maximize=!t.maximize}}},[t.maximize?s("i",{staticClass:"taskfont"},[t._v("\uE7D4")]):s("i",{staticClass:"taskfont"},[t._v("\uE7D3")])]),s("div",{ref:"ganttChart",staticClass:"gantt-chart",on:{touchstart:t.dateTouchstart,touchmove:t.dateTouchmove,touchend:t.dateTouchend}},[s("ul",{staticClass:"gantt-month"},t._l(t.monthNum,function(a,n){return s("li",{key:n,style:t.monthStyle(n)},[s("div",{staticClass:"month-format"},[t._v(t._s(t.monthFormat(n)))])])}),0),s("ul",{staticClass:"gantt-date",on:{mousedown:t.dateMouseDown}},t._l(t.dateNum,function(a,n){return s("li",{key:n,style:t.dateStyle(n)},[s("div",{staticClass:"date-format"},[s("div",{staticClass:"format-day"},[t._v(t._s(t.dateFormat(n,"day")))]),t.dateWidth>46?s("div",{staticClass:"format-week"},[t._v(t._s(t.dateFormat(n,"week")))]):t._e()])])}),0),s("ul",{ref:"ganttTimeline",staticClass:"gantt-timeline",on:{scroll:t.timelineScrollListener,mouseenter:function(a){t.mouseType="timeline"}}},t._l(t.lists,function(a,n){return s("li",{key:n,attrs:{"data-id":a.id}},[s("div",{staticClass:"timeline-item",style:t.itemStyle(a),on:{mousedown:function(i){return t.itemMouseDown(i,a)}}},[s("div",{staticClass:"timeline-title",attrs:{title:a.label}},[t._v(t._s(a.label))]),s("div",{staticClass:"timeline-resizer"})])])}),0)])])])},qt=[];const Zt={name:"GanttView",props:{lists:{type:Array},menuWidth:{type:Number,default:300},itemWidth:{type:Number,default:100}},data(){return{mouseType:"",mouseWidth:0,mouseScaleWidth:0,dateWidth:100,ganttWidth:0,mouseItem:null,mouseBak:{},dateMove:null,maximize:!1}},mounted(){this.maximize=this.windowPortrait,this.dateWidth=this.itemWidth,this.$refs.ganttRight.addEventListener("mousewheel",this.handleScroll,!1),document.addEventListener("mousemove",this.itemMouseMove),document.addEventListener("mouseup",this.itemMouseUp),window.addEventListener("resize",this.handleResize,!1),this.handleResize()},beforeDestroy(){this.$refs.ganttRight.removeEventListener("mousewheel",this.handleScroll,!1),document.removeEventListener("mousemove",this.itemMouseMove),document.removeEventListener("mouseup",this.itemMouseUp),window.removeEventListener("resize",this.handleResize,!1)},watch:{itemWidth(t){this.dateWidth=t},maximize(){this.$nextTick(()=>{this.handleResize()})}},computed:{leftStyle({menuWidth:t,maximize:e}){const s={width:t+"px"};return e&&(s.display="none"),s},monthNum(){const{ganttWidth:t,dateWidth:e}=this;return Math.floor(t/e/30)+2},monthStyle(){const{mouseWidth:t,dateWidth:e}=this;return function(s){let a=t==0?0:t/e,i=$A.daytz().startOf("day").clone().add(a*86400,"second"),o=i.clone().endOf("month"),r=(o-i)/1e3/60/60/24,l=e*r;return s>0&&(o=i.clone().add(s+1,"month").endOf("month"),l=o.date()*e),{width:l+"px"}}},monthFormat(){const{mouseWidth:t,dateWidth:e}=this;return function(s){let a=t==0?0:t/e,i=$A.daytz().startOf("day").clone().add(a,"day");return s>0&&(i=i.add(s+1,"month")),i.format("YYYY-MM")}},dateNum(){const{ganttWidth:t,dateWidth:e}=this;return Math.floor(t/e)+2},dateStyle(){const{mouseWidth:t,dateWidth:e}=this;return function(s){const a={};let n=t==0?0:t/e,i=Math.floor(n)+s;n==Math.floor(n)&&i--;let o=t==0?s-1:i,r=$A.daytz().add(o,"day");[0,6].indexOf(r.day())!==-1&&(a.backgroundColor="#f9fafb");let l=e;return s==0&&(l=Math.abs((t%l-l)%l)),a.width=l+"px",a}},dateFormat(){const{mouseWidth:t,dateWidth:e}=this;return function(s,a){let n=t==0?0:t/e,i=Math.floor(n)+s;n==Math.floor(n)&&i--;let o=t==0?s-1:i,r=$A.daytz().add(o,"day");return a=="day"?r.date():a=="week"?this.$L(`\u661F\u671F${"\u65E5\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D".charAt(r.day())}`):r}},itemStyle(){const{mouseWidth:t,dateWidth:e,ganttWidth:s}=this;return function(a){const{start:n,end:i}=a.time,{style:o,moveX:r,moveW:l}=a;let c=$A.daytz().startOf("day").valueOf(),d=(n-c)/1e3/60/60/24,f=(i-c)/1e3/60/60/24,h=e*d+t*-1,m=Math.max(10,e*(f-d));typeof r=="number"&&(h+=r),typeof l=="number"&&(m+=l);const p={left:Math.min(Math.max(h,m*-1.2),s*1.2).toFixed(2)+"px",width:m.toFixed(2)+"px"};return h<0&&Math.abs(h)<m&&(p.paddingLeft=Math.abs(h).toFixed(2)+"px"),h+m>s&&h<s&&(p.paddingRight=Math.abs(h+m-s).toFixed(2)+"px"),typeof o=="object"?Object.assign(p,o):p}}},methods:{itemScrollListener(t){this.mouseType!="timeline"&&(this.$refs.ganttTimeline.scrollTop=t.target.scrollTop)},timelineScrollListener(t){this.mouseType!="item"&&(this.$refs.ganttItem.scrollTop=t.target.scrollTop)},handleScroll(t){if(t.preventDefault(),t.ctrlKey){this.dateWidth=Math.min(600,Math.max(24,this.dateWidth-Math.floor(t.deltaY))),this.mouseWidth=this.ganttWidth/2*((this.dateWidth-100)/100)+this.dateWidth/100*this.mouseScaleWidth;return}if(t.deltaY!=0){const e=this.$refs.ganttTimeline;let s=e.scrollTop+t.deltaY;s<0?s=0:s>e.scrollHeight-e.clientHeight&&(s=e.scrollHeight-e.clientHeight),e.scrollTop!=s&&(this.mouseType="timeline",e.scrollTop=s)}t.deltaX!=0&&(this.mouseWidth+=t.deltaX,this.mouseScaleWidth+=t.deltaX*(100/this.dateWidth))},handleResize(){this.ganttWidth=this.$refs.ganttTimeline.clientWidth},dateTouchstart(t){this.windowPortrait&&(this.maximize=!0);let e=t.target.parentNode,s=null;for(;e&&!(!e||e===this.$refs.ganttChart);){if(e.tagName==="LI"){const a=e.getAttribute("data-id");a&&(s=this.lists.find(({id:n})=>a==n))}e=e.parentNode}if(!s){this.onDateMove(t.touches[0].clientX);return}this.onItemMove(s,t.target,t.touches[0].clientX)},dateTouchmove(t){this.onMoving(t.touches[0].clientX)},dateTouchend(){this.onMoveOver(null)},dateMouseDown(t){t.preventDefault(),this.onDateMove(t.clientX)},itemMouseDown(t,e){t.preventDefault(),this.onItemMove(e,t.target,t.clientX)},itemMouseMove(t){(this.mouseItem!=null||this.dateMove!=null)&&(t.preventDefault(),this.onMoving(t.clientX))},itemMouseUp(t){this.onMoveOver(t.target)},onDateMove(t){this.mouseItem=null,this.dateMove={clientX:t}},onItemMove(t,e,s){let a="moveX";e.classList.contains("timeline-resizer")&&(a="moveW"),typeof t[a]!="number"&&this.$set(t,a,0),this.mouseBak={type:a,clientX:s,value:t[a]},this.mouseItem=t,this.dateMove=null},onMoving(t){if(this.mouseItem!=null){const e=this.mouseBak.value+(t-this.mouseBak.clientX);if(this.mouseBak.type==="moveW"){const s=864e5/this.dateWidth,{start:a,end:n}=this.mouseItem.time;let i=e*s;if(n+i-a<=0)return}this.$set(this.mouseItem,this.mouseBak.type,e);return}if(this.dateMove!=null){let e=(this.dateMove.clientX-t)*5;this.dateMove.clientX=t,this.mouseWidth+=e,this.mouseScaleWidth+=e*(100/this.dateWidth)}},onMoveOver(t){if(this.mouseItem!=null){const{start:e,end:s}=this.mouseItem.time;let a=!1,n=864e5/this.dateWidth;if(typeof this.mouseItem.moveX=="number"&&this.mouseItem.moveX!=0){let i=this.mouseItem.moveX*n;this.$set(this.mouseItem.time,"start",e+i),this.$set(this.mouseItem.time,"end",s+i),this.$set(this.mouseItem,"moveX",0),a=!0}if(typeof this.mouseItem.moveW=="number"&&this.mouseItem.moveW!=0){let i=this.mouseItem.moveW*n;this.$set(this.mouseItem.time,"end",s+i),this.$set(this.mouseItem,"moveW",0),a=!0}a?this.$emit("on-change",this.mouseItem):t&&t.className=="timeline-title"&&this.clickItem(this.mouseItem),this.mouseItem=null;return}this.dateMove!=null&&(this.dateMove=null)},scrollPosition(t){let e=$A.daytz().startOf("day").valueOf(),s=864e5/this.dateWidth,a=(this.lists[t].time.start-e)/s-this.dateWidth-this.mouseWidth;this.mouseWidth+=a,this.mouseScaleWidth+=a*(100/this.dateWidth)},clickItem(t,e=void 0){if(e!==void 0&&this.windowPortrait){this.scrollPosition(e);return}this.$emit("on-click",t)}}},I={};var Qt=x(Zt,Xt,qt,!1,te,null,null,null);function te(t){for(let e in I)this[e]=I[e]}var ee=function(){return Qt.exports}(),se=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project-gstc-gantt"},[s("GanttView",{attrs:{lists:t.lists,menuWidth:t.menuWidth,itemWidth:80},on:{"on-change":t.onChange,"on-click":t.onClick},scopedSlots:t._u([{key:"titleTool",fn:function(){return[s("Dropdown",{staticClass:"project-gstc-dropdown-filtr",attrs:{trigger:"click"},on:{"on-click":t.onSwitchColumn}},[s("Icon",{staticClass:"project-gstc-dropdown-icon",class:{filtr:t.filtrProjectId>0},attrs:{type:"md-funnel"}}),s("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[s("DropdownItem",{class:{"dropdown-active":t.filtrProjectId==0},attrs:{name:0}},[t._v(t._s(t.$L("\u5168\u90E8")))]),t._l(t.projectColumn,function(a,n){return s("DropdownItem",{key:n,class:{"dropdown-active":t.filtrProjectId==a.id},attrs:{name:a.id}},[t._v(" "+t._s(a.name)+" "),a.tasks?s("span",[t._v("("+t._s(t.filtrLength(a.tasks))+")")]):t._e()])})],2)],1)]},proxy:!0}])}),s("div",{staticClass:"project-gstc-edit",class:{info:t.editShowInfo,visible:t.editData&&t.editData.length>0}},[s("div",{staticClass:"project-gstc-edit-info"},[s("Table",{attrs:{"max-height":"600",columns:t.editColumns,data:t.editData}}),s("div",{staticClass:"project-gstc-edit-btns"},[s("Button",{attrs:{loading:t.editLoad>0,type:"text"},on:{click:function(a){return t.editSubmit(!1)}}},[t._v(t._s(t.$L("\u53D6\u6D88")))]),s("Button",{attrs:{loading:t.editLoad>0,type:"primary"},on:{click:function(a){return t.editSubmit(!0)}}},[t._v(t._s(t.$L("\u4FDD\u5B58")))]),s("Icon",{staticClass:"zoom",attrs:{type:"md-arrow-dropright"},on:{click:function(a){t.editShowInfo=!1}}})],1)],1),s("div",{staticClass:"project-gstc-edit-small"},[s("div",{staticClass:"project-gstc-edit-text",on:{click:function(a){t.editShowInfo=!0}}},[t._v(t._s(t.$L("\u672A\u4FDD\u5B58\u8BA1\u5212\u65F6\u95F4"))+": "),t.editData?s("span",[t._v(t._s(t.editData.length))]):t._e()]),s("Button",{attrs:{loading:t.editLoad>0,size:"small",type:"text"},on:{click:function(a){return t.editSubmit(!1)}}},[t._v(t._s(t.$L("\u53D6\u6D88")))]),s("Button",{attrs:{loading:t.editLoad>0,size:"small",type:"primary"},on:{click:function(a){return t.editSubmit(!0)}}},[t._v(t._s(t.$L("\u4FDD\u5B58")))])],1)])],1)},ae=[];const ne={name:"ProjectGantt",components:{GanttView:ee},props:{projectColumn:{default:[]},flowInfo:{default:{}}},data(){return{lists:[],filtrProjectId:0,editColumns:[{title:this.$L("\u4EFB\u52A1\u540D\u79F0"),key:"label",minWidth:100,ellipsis:!0},{title:this.$L("\u539F\u8BA1\u5212\u65F6\u95F4"),width:140,align:"center",render:(t,{row:e})=>e.notime===!0?t("span","-"):t("div",{style:{}},[t("div",$A.dayjs(e.baktime.start).format("YYYY-MM-DD HH:mm")),t("div",$A.dayjs(e.baktime.end).format("YYYY-MM-DD HH:mm"))])},{title:this.$L("\u65B0\u8BA1\u5212\u65F6\u95F4"),width:140,align:"center",render:(t,{row:e})=>t("div",{style:{}},[t("div",$A.dayjs(e.newTime.start).format("YYYY-MM-DD HH:mm")),t("div",$A.dayjs(e.newTime.end).format("YYYY-MM-DD HH:mm"))])}],editData:[],editLoad:0,editShowInfo:!1}},mounted(){this.initData()},computed:{...u(["taskPriority"]),...g(["projectData"]),menuWidth(){return this.windowWidth<1440?180:260},completedTask(){return this.projectData.cacheParameter.completedTask}},watch:{projectColumn:{handler(){this.initData()},deep:!0},flowInfo:{handler(){this.initData()},deep:!0},completedTask(){this.initData()}},methods:{initData(){this.lists=[],this.projectColumn&&this.projectColumn.some(this.checkAdd)},flowTask(t){return $A.leftExists(this.flowInfo.value,"user:")&&!t.task_user.find(({userid:e,owner:s})=>e===this.flowInfo.userid&&s)?!0:this.flowInfo.value>0&&t.flow_item_id!==this.flowInfo.value},filtrLength(t){return t.filter(e=>!(e.complete_at&&!this.completedTask||this.flowTask(e))).length},checkAdd(t){this.filtrProjectId>0&&t.id!=this.filtrProjectId||t.tasks&&t.tasks.some(e=>{let s=!e.start_at||!e.end_at,a=this.getTimeObj(e),n=a.start,i=a.end;if(e.complete_at&&!this.completedTask||this.flowTask(e))return!1;let o="#058ce4";this.taskPriority.some(d=>{if(d.priority===e.p_level)return o=d.color,!0});let r={start:n,end:i},l=$A.cloneJSON(r),c=this.editData.find(({id:d})=>d==e.id);c&&(r=$A.cloneJSON(c.newTime)),this.lists.push({id:e.id,label:e.name,complete:e.complete_at,overdue:e.overdue,time:r,notime:s,baktime:l,style:{background:o}})})},onChange(t){const{time:e,baktime:s}=t;if(Math.abs(s.end-e.end)>1e3||Math.abs(s.start-e.start)>1e3){let a=this.editData.find(({id:n})=>n==t.id);a?a.newTime=e:this.editData.push({id:t.id,label:t.label,notime:t.notime,baktime:t.baktime,newTime:e})}},onClick(t){this.$store.dispatch("openTask",t)},editSubmit(t){this.editData&&this.editData.forEach(e=>{let s=this.lists.find(({id:a})=>a==e.id);if(t){this.editLoad++;let a=$A.dayjs(e.newTime.start).format("YYYY-MM-DD HH:mm"),n=$A.dayjs(e.newTime.end).format("YYYY-MM-DD HH:mm"),i={task_id:e.id,times:[a,n]};this.$store.dispatch("taskUpdate",i).then(({msg:o})=>{this.editLoad--,this.editLoad===0&&$A.messageSuccess(o),s&&this.$set(s,"baktime",$A.cloneJSON(s.time))}).catch(({msg:o})=>{this.editLoad--,this.editLoad===0&&$A.modalError(o),s&&this.$set(s,"time",$A.cloneJSON(s.baktime))})}else s&&this.$set(s,"time",$A.cloneJSON(s.baktime))}),this.editData=[]},getTimeObj(t){let e=t.start_at?$A.dayjs(t.start_at):$A.dayjs(t.created_at).startOf("day"),s=t.end_at?$A.dayjs(t.end_at):e.clone();return s.unix()==e.unix()&&(s=s.endOf("day")),{start:e.valueOf(),end:Math.max(s.valueOf(),e.valueOf()+6e4)}},onSwitchColumn(t){this.filtrProjectId=$A.runNum(t),this.initData()}}},S={};var ie=x(ne,se,ae,!1,oe,null,null,null);function oe(t){for(let e in S)this[e]=S[e]}var re=function(){return ie.exports}(),le=function(){var t=this,e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"project-panel",class:[e.tabTypeActive]},[a("PageTitle",{attrs:{title:e.projectData.name}}),a("div",{staticClass:"project-titbox"},[a("div",{staticClass:"project-title"},[a("div",{staticClass:"project-back",on:{click:e.onBack}},[a("i",{staticClass:"taskfont"},[e._v("\uE676")])]),a("h1",{on:{click:e.showName}},[e._v(e._s(e.projectData.name))]),e.loading?a("div",{staticClass:"project-load"},[a("Loading")],1):e._e()]),a("ul",{staticClass:"project-icons"},[a("li",{staticClass:"project-avatar",class:{"cursor-default":e.projectData.owner_userid!==e.userId},on:{click:function(n){return e.projectDropdown("user")}}},[a("ul",[a("li",[a("UserAvatarTip",{attrs:{userid:e.projectData.owner_userid,size:36,borderWitdh:2,openDelay:0}},[a("p",[e._v(e._s(e.$L("\u9879\u76EE\u8D1F\u8D23\u4EBA")))])]),(e.windowWidth<=980||e.projectData.cacheParameter.chat)&&e.projectUser.length>0?a("Badge",{attrs:{type:"normal","overflow-count":999,count:e.projectData.project_user.length}}):e._e()],1),e._l(e.projectUser,function(n){return!(e.windowWidth<=980||e.projectData.cacheParameter.chat)&&e.projectUser.length>0?[n.userid===-1?a("li",{staticClass:"more"},[a("ETooltip",{attrs:{disabled:e.$isEEUiApp||e.windowTouch,content:e.$L("\u5171"+e.projectData.project_user.length+"\u4E2A\u6210\u5458")}},[a("Icon",{attrs:{type:"ios-more"}})],1)],1):a("li",[a("UserAvatarTip",{attrs:{userid:n.userid,size:36,borderWitdh:2,openDelay:0}})],1)]:e._e()})],2)]),a("li",{staticClass:"project-icon",on:{click:function(n){return e.addTaskOpen(0)}}},[a("ETooltip",{attrs:{disabled:e.$isEEUiApp||e.windowTouch,content:e.$L("\u6DFB\u52A0\u4EFB\u52A1")}},[a("Icon",{staticClass:"menu-icon",attrs:{type:"md-add"}})],1)],1),a("li",{class:["project-icon",e.searchText!=""?"active":""]},[a("Tooltip",{attrs:{always:e.searchText!="",theme:"light",rawIndex:10},on:{"on-popper-show":e.searchFocus}},[a("Icon",{staticClass:"menu-icon",attrs:{type:"ios-search"},on:{click:e.searchFocus}}),a("div",{attrs:{slot:"content"},slot:"content"},[a("Input",{ref:"searchInput",staticClass:"search-input",attrs:{placeholder:e.$L("ID\u3001\u540D\u79F0\u3001\u63CF\u8FF0..."),clearable:""},model:{value:e.searchText,callback:function(n){e.searchText=n},expression:"searchText"}})],1)],1)],1),a("li",{class:["project-icon",e.windowLandscape&&e.projectData.cacheParameter.chat?"active":""],on:{click:function(n){return e.toggleParameter("chat")}}},[a("Icon",{staticClass:"menu-icon",attrs:{type:"ios-chatbubbles"}}),a("Badge",{staticClass:"menu-badge",attrs:{"overflow-count":999,count:e.msgUnread}})],1),a("li",{staticClass:"project-icon"},[a("EDropdown",{attrs:{trigger:"click",transfer:""},on:{command:e.projectDropdown}},[a("Icon",{staticClass:"menu-icon",attrs:{type:"ios-more"}}),e.projectData.owner_userid===e.userId?a("EDropdownMenu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("EDropdownItem",{attrs:{command:"setting"}},[e._v(e._s(e.$L("\u9879\u76EE\u8BBE\u7F6E")))]),a("EDropdownItem",{attrs:{command:"permissions"}},[e._v(e._s(e.$L("\u6743\u9650\u8BBE\u7F6E")))]),a("EDropdownItem",{attrs:{command:"task_template"}},[e._v(e._s(e.$L("\u4EFB\u52A1\u6A21\u677F")))]),a("EDropdownItem",{attrs:{command:"task_tag"}},[e._v(e._s(e.$L("\u4EFB\u52A1\u6807\u7B7E")))]),a("EDropdownItem",{attrs:{command:"workflow"}},[e._v(e._s(e.$L("\u5DE5\u4F5C\u6D41\u8BBE\u7F6E")))]),a("EDropdownItem",{attrs:{command:"user",divided:""}},[e._v(e._s(e.$L("\u6210\u5458\u7BA1\u7406")))]),a("EDropdownItem",{attrs:{command:"invite"}},[e._v(e._s(e.$L("\u9080\u8BF7\u94FE\u63A5")))]),a("EDropdownItem",{attrs:{command:"log",divided:""}},[e._v(e._s(e.$L("\u9879\u76EE\u52A8\u6001")))]),a("EDropdownItem",{attrs:{command:"archived_task"}},[e._v(e._s(e.$L("\u5DF2\u5F52\u6863\u4EFB\u52A1")))]),a("EDropdownItem",{attrs:{command:"deleted_task"}},[e._v(e._s(e.$L("\u5DF2\u5220\u9664\u4EFB\u52A1")))]),a("EDropdownItem",{attrs:{command:"transfer",divided:""}},[e._v(e._s(e.$L("\u79FB\u4EA4\u9879\u76EE")))]),a("EDropdownItem",{attrs:{command:"archived"}},[e._v(e._s(e.$L("\u5F52\u6863\u9879\u76EE")))]),a("EDropdownItem",{staticStyle:{color:"#f40"},attrs:{command:"delete"}},[e._v(e._s(e.$L("\u5220\u9664\u9879\u76EE")))])],1):a("EDropdownMenu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("EDropdownItem",{attrs:{command:"log"}},[e._v(e._s(e.$L("\u9879\u76EE\u52A8\u6001")))]),a("EDropdownItem",{attrs:{command:"archived_task"}},[e._v(e._s(e.$L("\u5DF2\u5F52\u6863\u4EFB\u52A1")))]),a("EDropdownItem",{attrs:{command:"deleted_task"}},[e._v(e._s(e.$L("\u5DF2\u5220\u9664\u4EFB\u52A1")))]),a("EDropdownItem",{staticStyle:{color:"#f40"},attrs:{command:"exit",divided:""}},[e._v(e._s(e.$L("\u9000\u51FA\u9879\u76EE")))])],1)],1)],1)])]),a("div",{staticClass:"project-subbox"},[a("div",{staticClass:"project-subtitle",on:{click:e.showDesc}},[a("VMPreviewNostyle",{ref:"descPreview",attrs:{value:e.projectData.desc}})],1),a("div",{staticClass:"project-switch"},[e.completedCount>0?a("div",{staticClass:"project-checkbox"},[a("Checkbox",{attrs:{value:e.projectData.cacheParameter.completedTask},on:{"on-change":function(n){return e.toggleParameter("completedTask")}}},[e._v(e._s(e.$L("\u663E\u793A\u5DF2\u5B8C\u6210")))])],1):e._e(),a("div",{staticClass:"project-select"},[a("Cascader",{ref:"flow",attrs:{data:e.flowData,"transfer-class-name":"project-panel-flow-cascader",transfer:""},on:{"on-change":e.flowChange}},[a("span",{class:`project-flow ${e.flowInfo.status||""}`},[e._v(e._s(e.flowTitle))])])],1),a("div",{staticClass:"project-switch-button"},[a("div",{staticClass:"slider",style:e.tabTypeStyle}),a("div",{class:{active:e.tabTypeActive==="column"},on:{click:function(n){return e.tabTypeChange("column")}}},[a("i",{staticClass:"taskfont"},[e._v("\uE60C")])]),a("div",{class:{active:e.tabTypeActive==="table"},on:{click:function(n){return e.tabTypeChange("table")}}},[a("i",{staticClass:"taskfont"},[e._v("\uE66A")])]),a("div",{class:{active:e.tabTypeActive==="gantt"},on:{click:function(n){return e.tabTypeChange("gantt")}}},[a("i",{staticClass:"taskfont"},[e._v("\uE797")])])])])]),e.tabTypeActive==="column"?a("div",{ref:"projectColumn",staticClass:"project-column",on:{scroll:e.handleColumnScroll}},[a("Draggable",{staticClass:"column-list",attrs:{list:e.columnList,animation:150,disabled:e.sortDisabled||e.$isEEUiApp||e.windowTouch,tag:"ul",draggable:".column-item"},on:{sort:function(n){return e.sortUpdate(!0)}}},[e._l(e.columnList,function(n){return a("li",{key:n.id,ref:`column_${n.id}`,refInFor:!0,staticClass:"column-item",attrs:{"data-id":n.id}},[a("div",{class:["column-head",n.color?"custom-color":""],style:n.color?{backgroundColor:n.color}:{}},[a("div",{staticClass:"column-head-title"},[a("AutoTip",[e._v(e._s(n.name))]),a("em",[e._v("("+e._s(e.panelTask(n.tasks).length)+")")])],1),a("div",{staticClass:"column-head-icon"},[e.columnLoad[n.id]===!0?a("div",{staticClass:"loading"},[a("Loading")],1):a("EDropdown",{attrs:{trigger:"click",size:"small"},on:{command:function(i){return e.dropColumn(n,i)}}},[a("Icon",{attrs:{type:"ios-more"}}),a("EDropdownMenu",{staticClass:"project-panel-more-dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[a("EDropdownItem",{attrs:{command:"title"}},[a("div",{staticClass:"item"},[a("Icon",{attrs:{type:"md-create"}}),e._v(e._s(e.$L("\u4FEE\u6539"))+" ")],1)]),a("EDropdownItem",{attrs:{command:"remove"}},[a("div",{staticClass:"item"},[a("Icon",{attrs:{type:"md-trash"}}),e._v(e._s(e.$L("\u5220\u9664"))+" ")],1)]),e._l(e.$store.state.columnColorList,function(i,o){return a("EDropdownItem",{key:o,attrs:{divided:o==0,command:i}},[a("div",{staticClass:"item"},[a("i",{staticClass:"taskfont",style:{color:i.color||"#ddd"},domProps:{innerHTML:e._s(i.color==n.color?"&#xe61d;":"&#xe61c;")}}),e._v(e._s(e.$L(i.name))+" ")])])})],2)],1),a("Icon",{staticClass:"last",attrs:{type:"md-add"},on:{click:function(i){return e.addTopShow(n.id,!0)}}})],1)]),a("Scrollbar",{staticClass:"column-task",attrs:{"class-name":"task-scrollbar"},on:{"on-scroll":e.handleTaskScroll}},[e.columnTopShow[n.id]?a("div",{staticClass:"task-item additem"},[a("TaskAddSimple",{attrs:{"column-id":n.id,"project-id":e.projectId,"add-top":!0,"auto-active":""},on:{"on-close":function(i){return e.addTopShow(n.id,!1)},"on-priority":e.addTaskOpen}})],1):e._e(),a("Draggable",{staticClass:"task-list",attrs:{list:n.tasks,animation:150,disabled:e.sortDisabled||e.$isEEUiApp||e.windowTouch,draggable:".task-draggable",filter:".complete",group:"task"},on:{sort:e.sortUpdate,remove:e.sortUpdate}},[e._l(n.tasks,function(i){return a("div",{class:["task-item task-draggable",i.complete_at?"complete":"",e.taskIsHidden(i)?"hidden":""],style:e.taskItemStyle(i),attrs:{"data-id":i.id},on:{click:function(o){return e.openTask(i)}}},[e.taskItemVisible(i)?[a("div",{class:["task-head",i.desc?"has-desc":""]},[a("div",{staticClass:"task-title"},[i.flow_item_name?a("span",{class:i.flow_item_status,on:{click:function(o){return o.stopPropagation(),e.openMenu(o,i)}}},[e._v(e._s(i.flow_item_name))]):e._e(),a("pre",[e._v(e._s(i.name))])]),a("div",{staticClass:"task-menu",on:{click:function(o){o.stopPropagation()}}},[a("TaskMenu",{ref:`taskMenu_${i.id}`,refInFor:!0,attrs:{task:i,icon:"ios-more"}})],1)]),i.complete_at?e._e():[i.desc?a("div",{staticClass:"task-desc"},[a("pre",{domProps:{innerHTML:e._s(i.desc)}})]):e._e(),i.task_tag.length>0?a("TaskTag",{staticClass:"task-tags",attrs:{tags:i.task_tag}}):e._e(),a("div",{staticClass:"task-users"},[a("ul",[e._l(e.ownerUser(i.task_user),function(o,r){return a("li",{key:r},[a("UserAvatar",{attrs:{userid:o.userid,size:"32",borderWitdh:2,borderColor:i.color}})],1)}),e.ownerUser(i.task_user).length===0?a("li",{staticClass:"no-owner"},[a("Button",{attrs:{type:"primary",size:"small",ghost:""},on:{click:function(o){return o.stopPropagation(),e.openTask(i,!0)}}},[e._v(e._s(e.$L("\u9886\u53D6\u4EFB\u52A1")))])],1):e._e()],2),i.file_num>0?a("div",{staticClass:"task-icon"},[e._v(e._s(i.file_num)),a("Icon",{attrs:{type:"ios-link-outline"}})],1):e._e(),i.msg_num>0?a("div",{staticClass:"task-icon"},[e._v(e._s(i.msg_num)),a("Icon",{attrs:{type:"ios-chatbubbles-outline"}})],1):e._e()]),a("div",{staticClass:"task-progress"},[i.sub_num>0?a("div",{staticClass:"task-sub-num"},[e._v(e._s(i.sub_complete)+"/"+e._s(i.sub_num))]):e._e(),a("Progress",{attrs:{percent:i.percent,"stroke-width":6}}),i.end_at?a("ETooltip",{class:["task-time",i.today?"today":"",i.overdue?"overdue":""],attrs:{disabled:e.$isEEUiApp||e.windowTouch,"open-delay":600,content:i.end_at}},[i.complete_at?e._e():a("div",[a("i",{staticClass:"taskfont"},[e._v("\uE71D")]),e._v(e._s(e.expiresFormat(i.end_at)))])]):e._e()],1),i.p_name?a("em",{staticClass:"priority-color",style:{backgroundColor:i.p_color}}):e._e()]]:e._e()],2)}),a("div",{staticClass:"task-item additem"},[a("TaskAddSimple",{attrs:{"column-id":n.id,"project-id":e.projectId},on:{"on-priority":e.addTaskOpen}})],1)],2)],1)],1)}),a("li",{class:["add-column",e.addColumnShow?"show-input":""]},[a("div",{staticClass:"add-column-text",on:{click:e.addColumnOpen}},[a("Icon",{attrs:{type:"md-add"}}),e._v(e._s(e.$L("\u6DFB\u52A0\u5217\u8868"))+" ")],1),a("div",{staticClass:"add-column-input"},[a("Input",{ref:"addColumnName",attrs:{placeholder:e.$L("\u5217\u8868\u540D\u79F0\uFF0C\u56DE\u8F66\u521B\u5EFA"),clearable:""},on:{"on-blur":e.addColumnBlur,"on-enter":e.addColumnSubmit,"on-clear":function(n){e.addColumnShow=!1}},model:{value:e.addColumnName,callback:function(n){e.addColumnName=n},expression:"addColumnName"}})],1)])],2)],1):e.tabTypeActive==="table"?a("Scrollbar",{ref:"projectTableScroll",staticClass:"project-table",attrs:{"enable-x":""},on:{"on-scroll":e.handleTaskScroll}},[a("div",{staticClass:"project-table-head"},[a("Row",{staticClass:"task-row"},[a("Col",{attrs:{span:"12"}},[a("div",{staticClass:"ellipsis"},[e._v("# "+e._s(e.$L("\u4EFB\u52A1\u540D\u79F0")))])]),a("Col",{attrs:{span:"3"}},[a("div",{staticClass:"ellipsis"},[e._v(e._s(e.$L("\u5217\u8868")))])]),a("Col",{attrs:{span:"3"}},[a("div",{staticClass:"sort",on:{click:function(n){return e.onSort("level")}}},[a("div",{staticClass:"head-title"},[e._v(e._s(e.$L("\u4F18\u5148\u7EA7")))]),a("div",{staticClass:"head-sort"},[a("Icon",{class:{on:e.sortField=="level"&&e.sortType=="asc"},attrs:{type:"md-arrow-dropup"}}),a("Icon",{class:{on:e.sortField=="level"&&e.sortType=="desc"},attrs:{type:"md-arrow-dropdown"}})],1)])]),a("Col",{attrs:{span:"3"}},[a("div",{staticClass:"ellipsis"},[e._v(e._s(e.$L("\u8D1F\u8D23\u4EBA")))])]),a("Col",{attrs:{span:"3"}},[a("div",{staticClass:"sort",on:{click:function(n){return e.onSort("end_at")}}},[a("div",{staticClass:"head-title"},[e._v(e._s(e.$L("\u5230\u671F\u65F6\u95F4")))]),a("div",{staticClass:"head-sort"},[a("Icon",{class:{on:e.sortField=="end_at"&&e.sortType=="asc"},attrs:{type:"md-arrow-dropup"}}),a("Icon",{class:{on:e.sortField=="end_at"&&e.sortType=="desc"},attrs:{type:"md-arrow-dropdown"}})],1)])])],1)],1),a("div",{class:["project-table-body",e.projectData.cacheParameter.showMy?"":"project-table-hide"]},[a("Row",{staticClass:"task-row"},[a("Col",{staticClass:"row-title",attrs:{span:"12"}},[a("i",{staticClass:"taskfont",on:{click:function(n){return e.toggleParameter("showMy")}}},[e._v("\uE689")]),a("div",{staticClass:"row-h1"},[e._v(e._s(e.$L("\u6211\u7684\u4EFB\u52A1")))]),a("div",{staticClass:"row-num"},[e._v("("+e._s(e.myList.length)+")")])]),a("Col",{attrs:{span:"3"}}),a("Col",{attrs:{span:"3"}}),a("Col",{attrs:{span:"3"}}),a("Col",{attrs:{span:"3"}})],1),e.projectData.cacheParameter.showMy?a("TaskRow",{attrs:{list:e.transforTasks(e.myList),"task-visibilitys":e.taskRowVisibilitys,"open-key":"my","fast-add-task":""},on:{"on-priority":e.addTaskOpen}}):e._e()],1),e.helpList.length?a("div",{class:["project-table-body",e.projectData.cacheParameter.showHelp?"":"project-table-hide"]},[a("Row",{staticClass:"task-row"},[a("Col",{staticClass:"row-title",attrs:{span:"12"}},[a("i",{staticClass:"taskfont",on:{click:function(n){return e.toggleParameter("showHelp")}}},[e._v("\uE689")]),a("div",{staticClass:"row-h1"},[e._v(e._s(e.$L("\u534F\u52A9\u7684\u4EFB\u52A1")))]),a("div",{staticClass:"row-num"},[e._v("("+e._s(e.helpList.length)+")")])]),a("Col",{attrs:{span:"3"}}),a("Col",{attrs:{span:"3"}}),a("Col",{attrs:{span:"3"}}),a("Col",{attrs:{span:"3"}})],1),e.projectData.cacheParameter.showHelp?a("TaskRow",{attrs:{list:e.helpList,"task-visibilitys":e.taskRowVisibilitys,"open-key":"help"},on:{"on-priority":e.addTaskOpen}}):e._e()],1):e._e(),e.projectData.task_num>0?a("div",{class:["project-table-body",e.projectData.cacheParameter.showUndone?"":"project-table-hide"]},[a("Row",{staticClass:"task-row"},[a("Col",{staticClass:"row-title",attrs:{span:"12"}},[a("i",{staticClass:"taskfont",on:{click:function(n){return e.toggleParameter("showUndone")}}},[e._v("\uE689")]),a("div",{staticClass:"row-h1"},[e._v(e._s(e.$L("\u672A\u5B8C\u6210\u4EFB\u52A1")))]),a("div",{staticClass:"row-num"},[e._v("("+e._s(e.unList.length)+")")])]),a("Col",{attrs:{span:"3"}}),a("Col",{attrs:{span:"3"}}),a("Col",{attrs:{span:"3"}}),a("Col",{attrs:{span:"3"}})],1),e.projectData.cacheParameter.showUndone?a("TaskRow",{attrs:{list:e.unList,"task-visibilitys":e.taskRowVisibilitys,"open-key":"undone"},on:{"on-priority":e.addTaskOpen}}):e._e()],1):e._e(),e.projectData.task_num>0?a("div",{class:["project-table-body",e.projectData.cacheParameter.showCompleted?"":"project-table-hide"]},[a("Row",{staticClass:"task-row"},[a("Col",{staticClass:"row-title",attrs:{span:"12"}},[a("i",{staticClass:"taskfont",on:{click:function(n){return e.toggleParameter("showCompleted")}}},[e._v("\uE689")]),a("div",{staticClass:"row-h1"},[e._v(e._s(e.$L("\u5DF2\u5B8C\u6210\u4EFB\u52A1")))]),a("div",{staticClass:"row-num"},[e._v("("+e._s(e.completedList.length)+")")])]),a("Col",{attrs:{span:"3"}}),a("Col",{attrs:{span:"3"}}),a("Col",{attrs:{span:"3"}}),a("Col",{attrs:{span:"3"}},[a("div",{staticClass:"ellipsis"},[e._v(e._s(e.projectData.task_num>0&&e.projectData.cacheParameter.showCompleted?e.$L("\u5B8C\u6210\u65F6\u95F4"):""))])])],1),e.projectData.cacheParameter.showCompleted?a("TaskRow",{attrs:{list:e.completedList,"task-visibilitys":e.taskRowVisibilitys,"open-key":"completed",showCompleteAt:""},on:{"on-priority":e.addTaskOpen}}):e._e()],1):e._e()]):e.tabTypeActive==="gantt"?a("div",{staticClass:"project-gantt"},[a("ProjectGantt",{attrs:{projectColumn:e.columnList,flowInfo:e.flowInfo}})],1):e._e(),a("Modal",{attrs:{title:e.$L("\u9879\u76EE\u8BBE\u7F6E"),"mask-closable":!1},model:{value:e.settingShow,callback:function(n){e.settingShow=n},expression:"settingShow"}},[a("Form",e._b({attrs:{model:e.settingData},nativeOn:{submit:function(n){n.preventDefault()}}},"Form",e.formOptions,!1),[a("FormItem",{attrs:{prop:"name",label:e.$L("\u9879\u76EE\u540D\u79F0")}},[a("Input",{ref:"projectName",attrs:{type:"text",maxlength:32,placeholder:e.$L("\u5FC5\u586B")},model:{value:e.settingData.name,callback:function(n){e.$set(e.settingData,"name",n)},expression:"settingData.name"}})],1),a("FormItem",{attrs:{prop:"desc",label:e.$L("\u9879\u76EE\u4ECB\u7ECD")}},[a("Input",{ref:"projectDesc",attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},maxlength:255,placeholder:`${e.$L("\u9009\u586B")} (${e.$L("\u652F\u6301 Markdown \u683C\u5F0F")})`},model:{value:e.settingData.desc,callback:function(n){e.$set(e.settingData,"desc",n)},expression:"settingData.desc"}})],1),a("FormItem",{attrs:{label:e.$L("\u81EA\u52A8\u5F52\u6863"),prop:"archive_method"}},[a("RadioGroup",{attrs:{value:e.settingData.archive_method},on:{"on-change":e.formArchived}},[a("Radio",{attrs:{label:"system"}},[e._v(e._s(e.$L("\u7CFB\u7EDF\u9ED8\u8BA4")))]),a("Radio",{attrs:{label:"custom"}},[e._v(e._s(e.$L("\u81EA\u5B9A\u4E49")))])],1),e.settingData.archive_method=="custom"?[a("div",{staticClass:"form-tip"},[e._v(e._s(e.$L("\u4EFB\u52A1\u5B8C\u6210 (*) \u5929\u540E\u81EA\u52A8\u5F52\u6863\u3002",e.settingData.archive_days||"n")))]),a("div",{staticClass:"setting-auto-day"},[a("Input",{attrs:{type:"number"},model:{value:e.settingData.archive_days,callback:function(n){e.$set(e.settingData,"archive_days",n)},expression:"settingData.archive_days"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v(e._s(e.$L("\u5929")))])])],1)]:e._e()],2)],1),a("div",{staticClass:"adaption",attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:function(n){e.settingShow=!1}}},[e._v(e._s(e.$L("\u53D6\u6D88")))]),a("Button",{attrs:{type:"primary",loading:e.settingLoad>0},on:{click:e.onSetting}},[e._v(e._s(e.$L("\u4FEE\u6539")))])],1)],1),a("DrawerOverlay",{attrs:{placement:"right",size:800},model:{value:e.permissionShow,callback:function(n){e.permissionShow=n},expression:"permissionShow"}},[e.permissionShow?a("ProjectPermission",{ref:"permission",attrs:{"project-id":e.projectId},on:{close:function(){t.permissionShow=!1}}}):e._e()],1),a("Modal",{attrs:{title:e.$L("\u6210\u5458\u7BA1\u7406"),"mask-closable":!1},model:{value:e.userShow,callback:function(n){e.userShow=n},expression:"userShow"}},[a("Form",e._b({attrs:{model:e.userData},nativeOn:{submit:function(n){n.preventDefault()}}},"Form",e.formOptions,!1),[a("FormItem",{attrs:{prop:"userids",label:e.$L("\u9879\u76EE\u6210\u5458")}},[a("UserSelect",{attrs:{uncancelable:e.userData.uncancelable,"multiple-max":100,title:e.$L("\u9009\u62E9\u9879\u76EE\u6210\u5458")},model:{value:e.userData.userids,callback:function(n){e.$set(e.userData,"userids",n)},expression:"userData.userids"}})],1)],1),a("div",{staticClass:"adaption",attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:function(n){e.userShow=!1}}},[e._v(e._s(e.$L("\u53D6\u6D88")))]),e.userWaitRemove.length>0?a("Poptip",{staticStyle:{"margin-left":"8px"},attrs:{confirm:"",placement:"bottom","ok-text":e.$L("\u786E\u5B9A"),"cancel-text":e.$L("\u53D6\u6D88"),transfer:""},on:{"on-ok":e.onUser}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[a("strong",[e._v(e._s(e.$L("\u79FB\u9664\u6210\u5458\u8D1F\u8D23\u7684\u4EFB\u52A1\u5C06\u53D8\u6210\u65E0\u8D1F\u8D23\u4EBA\uFF0C")))])]),a("p",[e._v(e._s(e.$L("\u6CE8\u610F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u9006\uFF01")))]),a("ul",{staticClass:"project-panel-wait-remove"},[a("li",[e._v(e._s(e.$L("\u5373\u5C06\u79FB\u9664"))+"\uFF1A")]),e._l(e.userWaitRemove,function(n){return a("li",{key:n},[a("UserAvatar",{attrs:{userid:n,size:20,showName:""}})],1)})],2)]),a("Button",{attrs:{type:"primary",loading:e.userLoad>0}},[e._v(e._s(e.$L("\u4FDD\u5B58")))])],1):a("Button",{attrs:{type:"primary",loading:e.userLoad>0},on:{click:e.onUser}},[e._v(e._s(e.$L("\u4FDD\u5B58")))])],1)],1),a("Modal",{attrs:{title:e.$L("\u9080\u8BF7\u94FE\u63A5"),"mask-closable":!1},model:{value:e.inviteShow,callback:function(n){e.inviteShow=n},expression:"inviteShow"}},[a("Form",e._b({attrs:{model:e.inviteData},nativeOn:{submit:function(n){n.preventDefault()}}},"Form",e.formOptions,!1),[a("FormItem",{attrs:{label:e.$L("\u94FE\u63A5\u5730\u5740")}},[a("Input",{ref:"inviteInput",attrs:{type:"textarea",rows:3,readonly:""},on:{"on-focus":e.inviteFocus},model:{value:e.inviteData.url,callback:function(n){e.$set(e.inviteData,"url",n)},expression:"inviteData.url"}}),a("div",{staticClass:"form-tip"},[e._v(" "+e._s(e.$L("\u53EF\u901A\u8FC7\u6B64\u94FE\u63A5\u76F4\u63A5\u52A0\u5165\u9879\u76EE\u3002"))+" "),a("Poptip",{attrs:{confirm:"",placement:"bottom","ok-text":e.$L("\u786E\u5B9A"),"cancel-text":e.$L("\u53D6\u6D88"),transfer:""},on:{"on-ok":function(n){return e.inviteGet(!0)}}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[a("strong",[e._v(e._s(e.$L("\u6CE8\u610F\uFF1A\u5237\u65B0\u5C06\u5BFC\u81F4\u539F\u6765\u7684\u9080\u8BF7\u94FE\u63A5\u5931\u6548\uFF01")))])])]),a("a",{attrs:{href:"javascript:void(0)"}},[e._v(e._s(e.$L("\u5237\u65B0\u94FE\u63A5")))])])],1)],1)],1),a("div",{staticClass:"adaption",attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:function(n){e.inviteShow=!1}}},[e._v(e._s(e.$L("\u53D6\u6D88")))]),a("Button",{attrs:{type:"primary",loading:e.inviteLoad>0},on:{click:e.inviteCopy}},[e._v(e._s(e.$L("\u590D\u5236")))])],1)],1),a("Modal",{attrs:{title:e.$L("\u79FB\u4EA4\u9879\u76EE"),"mask-closable":!1},model:{value:e.transferShow,callback:function(n){e.transferShow=n},expression:"transferShow"}},[a("Form",e._b({attrs:{model:e.transferData},nativeOn:{submit:function(n){n.preventDefault()}}},"Form",e.formOptions,!1),[a("FormItem",{attrs:{prop:"owner_userid",label:e.$L("\u65B0\u9879\u76EE\u8D1F\u8D23\u4EBA")}},[a("UserSelect",{attrs:{"multiple-max":1,title:e.$L("\u9009\u62E9\u9879\u76EE\u8D1F\u8D23\u4EBA")},model:{value:e.transferData.owner_userid,callback:function(n){e.$set(e.transferData,"owner_userid",n)},expression:"transferData.owner_userid"}})],1)],1),a("div",{staticClass:"adaption",attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:function(n){e.transferShow=!1}}},[e._v(e._s(e.$L("\u53D6\u6D88")))]),a("Button",{attrs:{type:"primary",loading:e.transferLoad>0},on:{click:e.onTransfer}},[e._v(e._s(e.$L("\u79FB\u4EA4")))])],1)],1),a("DrawerOverlay",{attrs:{placement:"right",size:720},model:{value:e.taskTemplateShow,callback:function(n){e.taskTemplateShow=n},expression:"taskTemplateShow"}},[e.taskTemplateShow?a("ProjectTaskTemplate",{ref:"taskTemplate",attrs:{"project-id":e.projectId}}):e._e()],1),a("DrawerOverlay",{attrs:{placement:"right",size:720},model:{value:e.taskTagShow,callback:function(n){e.taskTagShow=n},expression:"taskTagShow"}},[e.taskTagShow?a("ProjectTaskTag",{ref:"taskTag",attrs:{"project-id":e.projectId}}):e._e()],1),a("DrawerOverlay",{attrs:{placement:"right",beforeClose:e.workflowBeforeClose,size:1280},model:{value:e.workflowShow,callback:function(n){e.workflowShow=n},expression:"workflowShow"}},[e.workflowShow?a("ProjectWorkflow",{ref:"workflow",attrs:{"project-id":e.projectId}}):e._e()],1),a("DrawerOverlay",{attrs:{placement:"right",size:720},model:{value:e.logShow,callback:function(n){e.logShow=n},expression:"logShow"}},[e.logShow?a("ProjectLog",{attrs:{"project-id":e.projectId}}):e._e()],1),a("DrawerOverlay",{attrs:{placement:"right",size:1e3},model:{value:e.archivedTaskShow,callback:function(n){e.archivedTaskShow=n},expression:"archivedTaskShow"}},[e.archivedTaskShow?a("TaskArchived",{attrs:{"project-id":e.projectId}}):e._e()],1),a("DrawerOverlay",{attrs:{placement:"right",size:1e3},model:{value:e.deletedTaskShow,callback:function(n){e.deletedTaskShow=n},expression:"deletedTaskShow"}},[e.deletedTaskShow?a("TaskDeleted",{attrs:{"project-id":e.projectId}}):e._e()],1)],1)},ce=[];const xe={name:"ProjectPanel",components:{VMPreviewNostyle:N,UserAvatarTip:J,UserSelect:W,TaskMenu:z,ProjectTaskTag:kt,ProjectTaskTemplate:St,ProjectWorkflow:Ot,ProjectPermission:Vt,DrawerOverlay:G,ProjectLog:H,TaskArchived:mt,TaskRow:lt,Draggable:F,TaskAddSimple:B,TaskPriority:O,TaskDeleted:Jt,TaskTag:R,ProjectGantt:re},data(){return{loading:!1,nowTime:$A.dayjs().unix(),nowInterval:null,columnLoad:{},columnTopShow:{},sortField:"end_at",sortType:"desc",searchText:"",addColumnShow:!1,addColumnLoad:!1,addColumnName:"",sortData:[],sortDisabled:!1,settingShow:!1,settingData:{},settingLoad:0,permissionShow:!1,permissionShowData:{},permissionShowLoad:0,userShow:!1,userData:{},userLoad:0,inviteShow:!1,inviteData:{},inviteLoad:0,transferShow:!1,transferData:{},transferLoad:0,taskTemplateShow:!1,taskTagShow:!1,workflowShow:!1,logShow:!1,archivedTaskShow:!1,deletedTaskShow:!1,flowInfo:{},flowList:[],columnVisibilitys:{},taskVisibilitys:{},taskRowVisibilitys:{}}},mounted(){this.nowInterval=setInterval(()=>{this.nowTime=$A.dayjs().unix()},1e3)},destroyed(){clearInterval(this.nowInterval)},computed:{...u(["cacheDialogs","projectId","projectLoad","cacheTasks","cacheColumns","taskCompleteTemps","cacheUserBasic","formOptions"]),...g(["projectData","transforTasks"]),tabTypeActive(){return this.projectData.cacheParameter.menuType},tabTypeStyle(){const t={};switch(this.tabTypeActive){case"column":t.left="0";break;case"table":t.left="33.33%";break;case"gantt":t.left="66.66%";break;default:t.display="none"}return t},userWaitRemove(){const{userids:t,useridbak:e}=this.userData;if(!t)return[];let s=[];return e.some(a=>{t.includes(a)||s.push(a)}),s},msgUnread(){const{cacheDialogs:t,projectData:e}=this,s=t.find(({id:a})=>a===e.dialog_id);return $A.getDialogNum(s)},panelTask(){const{searchText:t,flowInfo:e}=this;return function(s){return this.projectData.cacheParameter.completedTask||(s=s.filter(({complete_at:a})=>!a)),$A.leftExists(e.value,"user:")?s=s.filter(({task_user:a})=>a.find(({userid:n,owner:i})=>n===e.userid&&i)):e.value>0?s=s.filter(({flow_item_id:a})=>a===e.value):e.value==-1&&(s=s.filter(({start_at:a})=>!a)),t&&(s=s.filter(({id:a,name:n,desc:i})=>a==t||$A.strExists(`${n} ${i}`,t))),s}},projectUser(){const{projectData:t,windowWidth:e}=this;if(!t.project_user)return[];let s=e>1200?8:3,a=t.project_user.filter(({userid:i})=>i!=t.owner_userid);if(a.length<=s)return a;let n=a.slice(0,s-1);return n.push({userid:-1}),n.push(a[a.length-1]),n},allTask(){const{cacheTasks:t,projectId:e}=this;return t.filter(s=>s.archived_at||!s.created_at?!1:s.project_id==e)},columnList(){const{projectId:t,cacheColumns:e,allTask:s}=this,a=$A.cloneJSON(e).filter(({project_id:n})=>n==t).sort((n,i)=>n.sort!=i.sort?n.sort-i.sort:n.id-i.id);return a.forEach(n=>{n.tasks=this.transforTasks(s.filter(i=>i.column_id==n.id)).sort((i,o)=>i.complete_at||o.complete_at?$A.dayjs(i.complete_at)-$A.dayjs(o.complete_at):i.sort!=o.sort?i.sort-o.sort:i.id-o.id)}),a},myList(){const{allTask:t,taskCompleteTemps:e,sortField:s,sortType:a}=this;let n=t.filter(i=>this.myFilter(i));if(e.length>0){let i=t.filter(o=>e.includes(o.id)&&this.myFilter(o,!1));i.length>0&&(n=$A.cloneJSON(n),n.push(...i))}return n.sort((i,o)=>{if(a=="asc"&&([i,o]=[o,i]),s=="level")return i.p_level-o.p_level;if(s=="end_at")return i.end_at==o.end_at?i.p_level-o.p_level:$A.dayjs(i.end_at||"2099-12-31 23:59:59")-$A.dayjs(o.end_at||"2099-12-31 23:59:59")})},helpList(){const{allTask:t,taskCompleteTemps:e,sortField:s,sortType:a}=this;let n=t.filter(i=>this.helpFilter(i));if(e.length>0){let i=t.filter(o=>e.includes(o.id)&&this.helpFilter(o,!1));i.length>0&&(n=$A.cloneJSON(n),n.push(...i))}return n.sort((i,o)=>{if(a=="asc"&&([i,o]=[o,i]),s=="level")return i.p_level-o.p_level;if(s=="end_at")return i.end_at==o.end_at?i.p_level-o.p_level:$A.dayjs(i.end_at||"2099-12-31 23:59:59")-$A.dayjs(o.end_at||"2099-12-31 23:59:59")})},unList(){const{allTask:t,searchText:e,sortField:s,sortType:a}=this;return t.filter(i=>i.parent_id>0||this.flowTask(i)||e&&i.id!=e&&!$A.strExists(i.name,e)&&!$A.strExists(i.desc,e)?!1:!i.complete_at).sort((i,o)=>{if(a=="asc"&&([i,o]=[o,i]),s=="level")return i.p_level-o.p_level;if(s=="end_at")return i.end_at==o.end_at?i.p_level-o.p_level:$A.dayjs(i.end_at||"2099-12-31 23:59:59")-$A.dayjs(o.end_at||"2099-12-31 23:59:59")})},completedList(){const{allTask:t,searchText:e}=this;return t.filter(a=>a.parent_id>0||this.flowTask(a)||e&&a.id!=e&&!$A.strExists(a.name,e)&&!$A.strExists(a.desc,e)?!1:a.complete_at).sort((a,n)=>$A.dayjs(n.complete_at)-$A.dayjs(a.complete_at))},completedCount(){const{allTask:t}=this;return t.filter(e=>e.parent_id>0?!1:e.complete_at).length},flowTitle(){const{flowInfo:t,flowData:e,allTask:s}=this;if(t.value==-1)return t.label;if(t.value){const a=e.find(n=>n.value===t.value);return a?a.label:t.label}return`${this.$L("\u5168\u90E8")} (${s.length})`},flowData(){const{flowList:t,allTask:e,cacheUserBasic:s}=this,a=[{value:0,label:`${this.$L("\u5168\u90E8")} (${e.length})`,children:[]}];a.push({value:-1,label:`${this.$L("\u672A\u8BA1\u5212")} (${e.filter(({start_at:o,complete_at:r})=>!o&&!r).length})`,children:[]});const n=t.map(o=>({value:o.id,label:o.name,status:o.status,children:o.project_flow_item.map(r=>{const l=e.filter(({flow_item_id:c})=>c==r.id).length;return{value:r.id,label:`${r.name} (${l})`,status:r.status,class:r.status}})}));n.length===1?a.push(...n[0].children):n.length>0&&a.push(...n);const{project_user:i}=this.projectData;if($A.isArray(i)){let o=i.map((r,l)=>{const c=s.find(({userid:f})=>f===r.userid)||{},d=e.filter(({task_user:f,complete_at:h})=>!this.projectData.cacheParameter.completedTask&&h?!1:f.find(({userid:m,owner:p})=>m===r.userid&&p)).length;return{value:`user:${c.userid}`,label:`${c.nickname} (${d})`,userid:c.userid||0,length:d}}).filter(({userid:r,length:l})=>r>0&&l>0);o.length>0&&(o.sort((r,l)=>r.userid==this.userId?-1:1),o=o.map((r,l)=>(r.class=`user-${l}`,r)),a.push(...o))}return a}},watch:{projectId:{handler(t){t>0&&(this.getFlowData(),this.handleColumnDebounce())},immediate:!0},"columnList.length"(){this.handleColumnDebounce()},"allTask.length"(){this.handleColumnDebounce()},searchText(){this.handleColumnDebounce()},windowWidth(){this.handleColumnDebounce(100)},projectData(){this.sortData=this.getSort()},projectLoad(t){this._loadTimeout&&clearTimeout(this._loadTimeout),t>0?this._loadTimeout=setTimeout(()=>{this.loading=!0},1e3):this.loading=!1}},methods:{showName(){this.windowLandscape||$A.modalInfo({language:!1,title:this.$L("\u9879\u76EE\u540D\u79F0"),content:this.projectData.name})},showDesc(){this.windowLandscape||$A.modalInfo({language:!1,title:this.$L("\u9879\u76EE\u63CF\u8FF0"),content:this.$refs.descPreview.$el.innerHTML})},searchFocus(){this.$nextTick(()=>{this.$refs.searchInput.focus({cursor:"end"})})},getSort(){const t=[];return this.columnList.forEach(e=>{t.push({id:e.id,task:e.tasks.map(({id:s})=>s)})}),t},sortUpdate(t){const e=this.sortData,s=this.getSort();if(JSON.stringify(e)===JSON.stringify(s))return;this.sortData=s;const a={project_id:this.projectId,sort:this.sortData,only_column:t===!0?1:0};this.sortDisabled=!0,this.$store.dispatch("call",{url:"project/sort",data:a,method:"post"}).then(({msg:n})=>{$A.messageSuccess(n),this.sortDisabled=!1;let i,o=[];a.only_column?(i=-1,a.sort.forEach(r=>{i++,o.push({id:r.id,sort:i})}),this.$store.dispatch("saveColumn",o)):(a.sort.forEach(r=>{i=-1,o.push(...r.task.map(l=>(i++,o.push(...this.allTask.filter(c=>c.parent_id==l).map(({id:c})=>({id:c,sort:i,column_id:r.id}))),{id:l,sort:i,column_id:r.id})))}),this.$store.dispatch("saveTask",o))}).catch(({msg:n})=>{$A.modalError(n),this.sortDisabled=!1,this.$store.dispatch("getTaskForProject",this.projectId).catch(()=>{})})},addTopShow(t,e){this.$set(this.columnTopShow,t,e)},addTaskOpen(t){v.emit("addTask",t)},addColumnOpen(){this.addColumnShow=!0,this.$nextTick(()=>{this.$refs.addColumnName.focus()})},addColumnBlur(){this.addColumnName===""&&(this.addColumnShow=!1)},addColumnSubmit(){let t=this.addColumnName.trim();t===""||this.addColumnLoad||(this.addColumnLoad=!0,this.$store.dispatch("call",{url:"project/column/add",data:{project_id:this.projectId,name:t},spinner:600}).then(({data:e,msg:s})=>{$A.messageSuccess(s),this.addColumnName="",this.$store.dispatch("saveColumn",e)}).catch(({msg:e})=>{$A.modalError(e)}).finally(()=>{this.addColumnLoad=!1}))},dropColumn(t,e){e==="title"?this.titleColumn(t):e==="remove"?this.removeColumn(t):e.name&&this.updateColumn(t,{color:e.color}).catch(s=>{$A.modalError(s)})},titleColumn(t){$A.modalInput({value:t.name,title:"\u4FEE\u6539\u5217\u8868",placeholder:"\u8F93\u5165\u5217\u8868\u540D\u79F0",onOk:e=>e?this.updateColumn(t,{name:e}):"\u5217\u8868\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"})},updateColumn(t,e){return new Promise((s,a)=>{if(this.columnLoad[t.id]===!0){s();return}this.$set(this.columnLoad,t.id,!0),Object.keys(e).forEach(n=>this.$set(t,n,e[n])),this.$store.dispatch("call",{url:"project/column/update",data:Object.assign(e,{column_id:t.id})}).then(({data:n})=>{this.$set(this.columnLoad,t.id,!1),this.$store.dispatch("saveColumn",n),s()}).catch(({msg:n})=>{this.$set(this.columnLoad,t.id,!1),this.$store.dispatch("getColumns",this.projectId).catch(()=>{}),a(n)})})},removeColumn(t){$A.modalConfirm({title:"\u5220\u9664\u5217\u8868",content:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5217\u8868\u3010"+t.name+"\u3011\u53CA\u5217\u8868\u5185\u7684\u4EFB\u52A1\u5417\uFF1F",loading:!0,onOk:()=>{if(this.columnLoad[t.id]!==!0)return this.$set(this.columnLoad,t.id,!0),new Promise((e,s)=>{this.$store.dispatch("removeColumn",t.id).then(({msg:a})=>{e(a)}).catch(({msg:a})=>{s(a)}).finally(a=>{this.$set(this.columnLoad,t.id,!1)})})}})},onSort(t){this.sortField=t,this.sortType=this.sortType=="desc"?"asc":"desc"},onSetting(){this.settingLoad++,this.$store.dispatch("call",{url:"project/update",data:Object.assign(this.settingData,{project_id:this.projectId})}).then(({data:t,msg:e})=>{$A.messageSuccess(e),this.settingShow=!1,this.$store.dispatch("saveProject",t)}).catch(({msg:t})=>{$A.modalError(t)}).finally(t=>{this.settingLoad--})},onUser(){this.userLoad++,this.$store.dispatch("call",{url:"project/user",data:{project_id:this.projectId,userid:this.userData.userids}}).then(({msg:t})=>{$A.messageSuccess(t),this.userShow=!1,this.$store.dispatch("getProjectOne",this.projectId).catch(()=>{}),this.$store.dispatch("getTaskForProject",this.projectId).catch(()=>{})}).catch(({msg:t})=>{$A.modalError(t)}).finally(t=>{this.userLoad--})},onTransfer(){this.transferLoad++,this.$store.dispatch("call",{url:"project/transfer",data:{project_id:this.projectId,owner_userid:this.transferData.owner_userid[0]}}).then(({msg:t})=>{$A.messageSuccess(t),this.transferShow=!1,this.$store.dispatch("getProjectOne",this.projectId).catch(()=>{}),this.$store.dispatch("getTaskForProject",this.projectId).catch(()=>{})}).catch(({msg:t})=>{$A.modalError(t)}).finally(t=>{this.transferLoad--})},onArchived(){$A.modalConfirm({title:"\u5F52\u6863\u9879\u76EE",content:"\u4F60\u786E\u5B9A\u8981\u5F52\u6863\u9879\u76EE\u3010"+this.projectData.name+"\u3011\u5417\uFF1F",loading:!0,onOk:()=>new Promise((t,e)=>{this.$store.dispatch("archivedProject",this.projectId).then(({msg:s})=>{t(s)}).catch(({msg:s})=>{e(s)})})})},onDelete(){$A.modalConfirm({title:"\u5220\u9664\u9879\u76EE",content:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u9879\u76EE\u3010"+this.projectData.name+"\u3011\u5417\uFF1F",loading:!0,onOk:()=>new Promise((t,e)=>{this.$store.dispatch("removeProject",this.projectId).then(({msg:s})=>{t(s)}).catch(({msg:s})=>{e(s)})})})},onExit(){$A.modalConfirm({title:"\u9000\u51FA\u9879\u76EE",content:"\u4F60\u786E\u5B9A\u8981\u9000\u51FA\u9879\u76EE\u3010"+this.projectData.name+"\u3011\u5417\uFF1F",loading:!0,onOk:()=>new Promise((t,e)=>{this.$store.dispatch("exitProject",this.projectId).then(({msg:s})=>{t(s)}).catch(({msg:s})=>{e(s)})})})},projectDropdown(t){switch(t){case"setting":Object.assign(this.settingData,{name:this.projectData.name,desc:this.projectData.desc,archive_method:this.projectData.archive_method,archive_days:this.projectData.archive_days}),this.settingShow=!0,this.$nextTick(()=>{this.$refs.projectName.focus(),setTimeout(this.$refs.projectDesc.resizeTextarea,0)});break;case"permissions":this.permissionShow=!0;break;case"user":if(this.projectData.owner_userid!==this.userId)return;const e=this.projectData.project_user.map(({userid:s})=>s);this.$set(this.userData,"userids",e),this.$set(this.userData,"useridbak",e),this.$set(this.userData,"uncancelable",[this.projectData.owner_userid]),this.userShow=!0;break;case"invite":this.inviteData={},this.inviteShow=!0,this.inviteGet();break;case"task_template":this.taskTemplateShow=!0;break;case"task_tag":this.taskTagShow=!0;break;case"workflow":this.workflowShow=!0;break;case"log":this.logShow=!0;break;case"archived_task":this.archivedTaskShow=!0;break;case"deleted_task":this.deletedTaskShow=!0;break;case"transfer":this.$set(this.transferData,"owner_userid",[]),this.transferShow=!0;break;case"archived":this.onArchived();break;case"delete":this.onDelete();break;case"exit":this.onExit();break}},openTask(t,e){this.$store.dispatch("openTask",t),e===!0&&setTimeout(()=>{v.emit("receiveTask",!0)},300)},openMenu(t,e){const s=this.$refs[`taskMenu_${e.id}`];s&&s[0].handleClick(t)},taskIsHidden(t){const{id:e,name:s,desc:a,complete_at:n}=t,{searchText:i}=this;return!!(!this.projectData.cacheParameter.completedTask&&n||this.flowTask(t)||i&&e!=i&&!$A.strExists(`${s} ${a}`,i))},ownerUser(t){return t.filter(({owner:e})=>e==1).sort((e,s)=>e.id-s.id)},inviteGet(t){this.inviteLoad++,this.$store.dispatch("call",{url:"project/invite",data:{project_id:this.projectId,refresh:t===!0?"yes":"no"}}).then(({data:e})=>{this.inviteData=e,this.inviteCopy()}).catch(({msg:e})=>{$A.modalError(e)}).finally(e=>{this.inviteLoad--})},getFlowData(){this.flowInfo={},this.$store.dispatch("call",{url:"project/flow/list",data:{project_id:this.projectId}}).then(({data:t})=>{var e;this.flowList=t,(e=this.$refs.flow)==null||e.clearSelect()}).catch(()=>{this.flowList=[]})},flowChange(t,e){this.flowInfo=e.pop()||{},this.handleColumnDebounce()},inviteCopy(){!this.inviteData.url||(this.inviteFocus(),this.copyText(this.inviteData.url))},inviteFocus(){this.$nextTick(t=>{this.$refs.inviteInput.focus({cursor:"all"})})},workflowBeforeClose(){return new Promise(t=>{if(!this.$refs.workflow){t();return}if(!this.$refs.workflow.existDiff()){t();return}$A.modalConfirm({content:"\u8BBE\u7F6E\u5C1A\u672A\u4FDD\u5B58\uFF0C\u662F\u5426\u653E\u5F03\u4FEE\u6539\uFF1F",cancelText:"\u53D6\u6D88",okText:"\u653E\u5F03",onOk:()=>{t()}})})},myFilter(t,e=!0){return!this.projectData.cacheParameter.completedTask&&e===!0&&t.complete_at||this.flowTask(t)||this.searchText&&t.id!=this.searchText&&!$A.strExists(t.name,this.searchText)&&!$A.strExists(t.desc,this.searchText)?!1:t.owner==1},helpFilter(t,e=!0){return t.parent_id>0||!this.projectData.cacheParameter.completedTask&&e===!0&&t.complete_at||this.flowTask(t)||this.searchText&&t.id!=this.searchText&&!$A.strExists(t.name,this.searchText)&&!$A.strExists(t.desc,this.searchText)?!1:t.task_user&&t.task_user.find(({userid:s,owner:a})=>s==this.userId&&a==0)},flowTask(t){return $A.leftExists(this.flowInfo.value,"user:")&&!t.task_user.find(({userid:e,owner:s})=>e===this.flowInfo.userid&&s)||this.flowInfo.value>0&&t.flow_item_id!==this.flowInfo.value?!0:!!(this.flowInfo.value==-1&&t.start_at)},expiresFormat(t){return $A.countDownFormat(this.nowTime,t)},tabTypeChange(t){switch(t){case"column":this.toggleParameter({project_id:this.projectId,key:"menuType",value:"column"});break;case"table":this.toggleParameter({project_id:this.projectId,key:"menuType",value:"table"});break;case"gantt":this.toggleParameter({project_id:this.projectId,key:"menuType",value:"gantt"});break}},toggleParameter(t){if(t==="chat"){if(this.windowPortrait){this.$store.dispatch("openDialog",this.projectData.dialog_id);return}}else t==="completedTask"&&this.$store.dispatch("forgetTaskCompleteTemp",!0);this.$store.dispatch("toggleProjectParameter",t),this.handleColumnDebounce()},onBack(){const{name:t,params:e}=this.$store.state.routeHistoryLast;t===this.$route.name&&/^\d+$/.test(e.projectId)?this.goForward({name:this.$route.name,params:{projectId:"all"}}):this.goBack()},formArchived(t){this.settingData={...this.settingData,archive_method:t}},taskItemVisible({id:t,column_id:e}){var s;return this.columnVisibilitys[e]&&((s=this.taskVisibilitys[t])==null?void 0:s.visible)},taskItemStyle({id:t,column_id:e,complete_at:s,color:a}){var i;const n={};return a&&(n.backgroundColor=a),this.taskItemVisible({id:t,column_id:e})||(n.height=(((i=this.taskVisibilitys[t])==null?void 0:i.height)||(s?46:146))+"px"),n},handleColumnDebounce(t=10){this.columnDebounceWait!==t&&(this.columnDebounceWait=t,this.columnDebounceInvoke&&(this.columnDebounceInvoke.cancel(),this.columnDebounceInvoke=null)),this.columnDebounceInvoke||(this.columnDebounceInvoke=V.exports.debounce(e=>{this.$nextTick(s=>{var a;switch(this.tabTypeActive){case"column":this.handleColumnScroll();break;case"table":this.handleTaskScroll({target:(a=this.$refs.projectTableScroll)==null?void 0:a.$el});break}})},t)),this.columnDebounceInvoke()},handleColumnScroll(){this.columnList.forEach(({id:t})=>{const e=this.$refs[`column_${t}`];e&&this.checkColumnVisibility(e[0])})},checkColumnVisibility(t=null){if(!t)return;const e=t.getAttribute("data-id");if(!e)return;const s=this.$refs.projectColumn;if(!s)return!1;const a=s.getBoundingClientRect(),n=t.getBoundingClientRect(),i=n.left<a.right&&n.right>a.left&&n.top<a.bottom&&n.bottom>a.top;i&&this.handleTaskScroll({target:t.querySelector(".task-scrollbar")}),this.$set(this.columnVisibilitys,e,i)},async handleTaskScroll({target:t}){var n;if(!t)return;const e=t.querySelectorAll(".task-item");if(!e.length)return;let s=null;switch(this.tabTypeActive){case"column":s="taskVisibilitys";break;case"table":s="taskRowVisibilitys";break;default:return}const a=t.getBoundingClientRect();for(const i of e){const o=i.getAttribute("data-id");if(!o)continue;const r=i.getBoundingClientRect(),l=((n=this[s][o])==null?void 0:n.visible)||!1,c=r.top>=a.top-r.height&&r.bottom<=a.bottom+r.height;if(c===l)continue;const d=this[s][o]===void 0&&c;this.$set(this[s],o,{visible:c,height:r.height}),d&&await this.$nextTick()}}}},A={};var de=x(xe,le,ce,!1,ue,null,null,null);function ue(t){for(let e in A)this[e]=A[e]}var he=function(){return de.exports}(),me=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.dialogShow?s("DialogWrapper",{staticClass:"project-dialog",attrs:{"dialog-id":t.projectData.dialog_id}},[s("template",{slot:"head"},[s("div",{staticClass:"dialog-user"},[s("div",{staticClass:"member-head"},[s("div",{staticClass:"member-title"},[t._v(t._s(t.$L("\u9879\u76EE\u6210\u5458"))),s("span",{on:{click:function(a){t.memberShowAll=!t.memberShowAll}}},[t._v("("+t._s(t.projectData.project_user.length)+")")])]),s("div",{staticClass:"member-close",on:{click:t.onClose}},[s("Icon",{attrs:{type:"ios-close"}})],1)]),s("ul",{class:["member-list",t.memberShowAll?"member-all":""]},t._l(t.projectData.project_user,function(a){return s("li",[s("UserAvatar",{attrs:{userid:a.userid,size:36}})],1)}),0)]),s("div",{staticClass:"nav-wrapper"},[s("div",{staticClass:"dialog-title"},[s("h2",[t._v(t._s(t.$L("\u7FA4\u804A")))])])])])],2):t._e()},pe=[];const fe={name:"ProjectDialog",components:{DialogWrapper:X},data(){return{loadIng:!1,memberShowAll:!1}},computed:{...g(["projectData"]),dialogShow(){return this.windowLandscape&&this.projectData.dialog_id&&this.projectData.cacheParameter.chat}},methods:{onClose(){this.$store.dispatch("toggleProjectParameter","chat")}}},P={};var _e=x(fe,me,pe,!1,ve,null,null,null);function ve(t){for(let e in P)this[e]=P[e]}var ge=function(){return _e.exports}(),ke=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project-list"},[s("PageTitle",{attrs:{title:t.$L("\u9879\u76EE")}}),s("div",{staticClass:"list-search"},[s("div",{staticClass:"search-wrapper"},[s("div",{staticClass:"search-pre"},[t.loadProjects>0?s("Loading"):s("Icon",{attrs:{type:"ios-search"}})],1),s("Input",{attrs:{placeholder:t.$L(t.loadProjects>0?"\u66F4\u65B0\u4E2D...":"\u641C\u7D22"),clearable:""},model:{value:t.projectKeyValue,callback:function(a){t.projectKeyValue=a},expression:"projectKeyValue"}})],1)]),s("ul",{on:{touchstart:t.onTouchStart,scroll:t.onScroll}},[t.projectLists.length===0?[t.projectKeyLoading>0?s("li",{staticClass:"loading"},[s("Loading")],1):s("li",{staticClass:"nothing"},[t._v(" "+t._s(t.$L(t.projectKeyValue?`\u6CA1\u6709\u4EFB\u4F55\u4E0E"${t.projectKeyValue}"\u76F8\u5173\u7684\u7ED3\u679C`:"\u6CA1\u6709\u4EFB\u4F55\u9879\u76EE"))+" ")])]:t._e(),t._l(t.projectLists,function(a,n){return s("li",{directives:[{name:"longpress",rawName:"v-longpress",value:t.handleLongpress,expression:"handleLongpress"}],key:n,class:{operate:a.id==t.operateItem.id&&t.operateVisible},attrs:{"data-id":a.id},on:{click:function(i){return t.toggleRoute("project",{projectId:a.id})}}},[s("div",{staticClass:"project-item"},[s("div",{staticClass:"item-left"},[s("div",{staticClass:"project-h1"},[s("div",{staticClass:"project-name"},[t._v(t._s(a.name))]),a.top_at?s("div",{staticClass:"icon-top"}):t._e(),a.task_my_num-a.task_my_complete>0?s("div",{staticClass:"num"},[t._v(t._s(a.task_my_num-a.task_my_complete))]):t._e()]),s("div",{staticClass:"project-h2"},[t._v(" "+t._s(a.desc)+" ")])]),a.task_num>0?s("div",{staticClass:"item-right",on:{click:function(i){return i.stopPropagation(),t.modalPercent(a)}}},[s("iCircle",{attrs:{type:"circle","trail-color":"rgba(132, 197, 106, 0.2)","trail-width":7,"stroke-color":a.task_percent===100?"rgba(132, 197, 106, 0)":"#84C56A","stroke-width":7,percent:a.task_percent,size:44}},[a.task_percent===100?s("Icon",{attrs:{type:"ios-checkmark"}}):s("span",{staticClass:"percent-text"},[t._v(t._s(a.task_percent)+"%")])],1)],1):t._e()])])})],2),s("div",{directives:[{name:"show",rawName:"v-show",value:t.operateVisible,expression:"operateVisible"}],staticClass:"operate-position",style:t.operateStyles},[s("Dropdown",{attrs:{trigger:"custom",placement:t.windowLandscape?"bottom":"top",visible:t.operateVisible,transfer:""},on:{"on-clickoutside":function(a){t.operateVisible=!1}}},[s("div",{style:{userSelect:t.operateVisible?"none":"auto",height:t.operateStyles.height}}),s("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[s("DropdownItem",{nativeOn:{click:function(a){return t.handleTopClick.apply(null,arguments)}}},[t._v(" "+t._s(t.$L(t.operateItem.top_at?"\u53D6\u6D88\u7F6E\u9876":"\u7F6E\u9876\u8BE5\u9879\u76EE"))+" ")])],1)],1)],1)],1)},$e=[];const ye={name:"ProjectList",directives:{longpress:q},data(){return{projectKeyValue:"",projectKeyLoading:0,operateStyles:{},operateVisible:!1,operateItem:{}}},computed:{...u(["cacheProjects","loadProjects"]),projectLists(){const{projectKeyValue:t,cacheProjects:e}=this,s=$A.cloneJSON(e).sort((a,n)=>a.top_at||n.top_at?$A.dayjs(n.top_at)-$A.dayjs(a.top_at):n.id-a.id);return t?s.filter(a=>$A.strExists(`${a.name} ${a.desc}`,t)):s}},watch:{projectKeyValue(t){if(t!=""){if($A.loadVConsole(t)){this.projectKeyValue="";return}this.projectKeyLoading++,setTimeout(()=>{this.projectKeyValue==t&&this.searchProject(),this.projectKeyLoading--},600)}}},methods:{searchProject(){this.projectKeyLoading++,this.$store.dispatch("getProjects",{keys:{name:this.projectKeyValue}}).finally(t=>{this.projectKeyLoading--})},toggleRoute(t,e){this.operateVisible||this.goForward({name:"manage-"+t,params:e||{}})},onTouchStart(t){const e=document.activeElement;e&&e.blur()},onScroll(t){this.operateVisible=!1},modalPercent(t){if(this.operateVisible)return;let e=`<p><strong>${this.$L("\u603B\u8FDB\u5EA6")}</strong></p>`;e+=`<p>${this.$L("\u603B\u6570\u91CF")}: ${t.task_num}</p>`,e+=`<p>${this.$L("\u5DF2\u5B8C\u6210")}: ${t.task_complete}</p>`,e+=`<p style="margin-top:12px"><strong>${this.$L("\u6211\u7684\u4EFB\u52A1")}</strong></p>`,e+=`<p>${this.$L("\u603B\u6570\u91CF")}: ${t.task_my_num}</p>`,e+=`<p>${this.$L("\u5DF2\u5B8C\u6210")}: ${t.task_my_complete}</p>`,$A.modalInfo({language:!1,title:`${t.name} ${this.$L("\u9879\u76EE\u8FDB\u5EA6")}`,content:e})},handleLongpress(t,e){const s=$A.getAttr(e,"data-id"),a=this.projectLists.find(n=>n.id==s);!a||(this.operateVisible=!1,this.operateItem=$A.isJson(a)?a:{},this.$nextTick(()=>{const n=e.getBoundingClientRect();this.operateStyles={left:`${t.clientX}px`,top:`${n.top+this.windowScrollY}px`,height:n.height+"px"},this.operateVisible=!0}))},handleTopClick(){this.$store.dispatch("call",{url:"project/top",data:{project_id:this.operateItem.id}}).then(({data:t})=>{this.$store.dispatch("saveProject",t)}).catch(({msg:t})=>{$A.modalError(t)})}}},M={};var we=x(ye,ke,$e,!1,be,null,null,null);function be(t){for(let e in M)this[e]=M[e]}var Te=function(){return we.exports}(),Ce=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-project"},[t.projectId>0?[s("ProjectPanel"),s("ProjectDialog")]:t._e(),t.windowPortrait?s("ProjectList",{directives:[{name:"show",rawName:"v-show",value:t.projectId===0,expression:"projectId === 0"}]}):t._e()],2)},je=[];const Le={components:{ProjectList:Te,ProjectDialog:ge,ProjectPanel:he},deactivated(){this.$store.dispatch("forgetTaskCompleteTemp",!0)},computed:{...u(["cacheProjects","wsOpenNum"]),projectId(){const{projectId:t}=this.$route.params;return parseInt(/^\d+$/.test(t)?t:0)}},watch:{projectId:{handler(){this.getProjectData()},immediate:!0},wsOpenNum(t){t<=1||(this.wsOpenTimeout&&clearTimeout(this.wsOpenTimeout),this.wsOpenTimeout=setTimeout(()=>{this.$route.name=="manage-project"&&this.getProjectData()},5e3))}},methods:{getProjectData(){if(this.projectId<=0)return;const t=this.projectId;this.$nextTick(()=>{this.$store.state.projectId=t,this.$store.dispatch("getProjectOne",t).then(()=>{this.$store.dispatch("getColumns",t).catch(()=>{}),this.$store.dispatch("getTaskForProject",t).catch(()=>{})}).catch(({msg:e})=>{t===this.projectId&&$A.modalWarning({content:e,onOk:()=>{const s=this.cacheProjects.find(({id:a})=>a);s?$A.goForward({name:"manage-project",params:{projectId:s.id}}):$A.goForward({name:"manage-dashboard"})}})}),this.$store.dispatch("forgetTaskCompleteTemp",!0)})}}},E={};var De=x(Le,Ce,je,!1,Ie,null,null,null);function Ie(t){for(let e in E)this[e]=E[e]}var Ss=function(){return De.exports}();export{Ss as default};
